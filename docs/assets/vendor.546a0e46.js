var ne=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ru(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),t}var Mu={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,h){this.fn=u,this.context=l,this.once=h||!1}function a(u,l,h,f,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new i(h,f||u,d),c=r?r+l:l;return u._events[c]?u._events[c].fn?u._events[c]=[u._events[c],p]:u._events[c].push(p):(u._events[c]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount==0?u._events=new n:delete u._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],h,f;if(this._eventsCount===0)return l;for(f in h=this._events)t.call(h,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},s.prototype.listeners=function(l){var h=r?r+l:l,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,c=new Array(p);d<p;d++)c[d]=f[d].fn;return c},s.prototype.listenerCount=function(l){var h=r?r+l:l,f=this._events[h];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,h,f,d,p,c){var _=r?r+l:l;if(!this._events[_])return!1;var v=this._events[_],g=arguments.length,m,y;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,f),!0;case 4:return v.fn.call(v.context,h,f,d),!0;case 5:return v.fn.call(v.context,h,f,d,p),!0;case 6:return v.fn.call(v.context,h,f,d,p,c),!0}for(y=1,m=new Array(g-1);y<g;y++)m[y-1]=arguments[y];v.fn.apply(v.context,m)}else{var x=v.length,T;for(y=0;y<x;y++)switch(v[y].once&&this.removeListener(l,v[y].fn,void 0,!0),g){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,h);break;case 3:v[y].fn.call(v[y].context,h,f);break;case 4:v[y].fn.call(v[y].context,h,f,d);break;default:if(!m)for(T=1,m=new Array(g-1);T<g;T++)m[T-1]=arguments[T];v[y].fn.apply(v[y].context,m)}}return!0},s.prototype.on=function(l,h,f){return a(this,l,h,f,!1)},s.prototype.once=function(l,h,f){return a(this,l,h,f,!0)},s.prototype.removeListener=function(l,h,f,d){var p=r?r+l:l;if(!this._events[p])return this;if(!h)return o(this,p),this;var c=this._events[p];if(c.fn)c.fn===h&&(!d||c.once)&&(!f||c.context===f)&&o(this,p);else{for(var _=0,v=[],g=c.length;_<g;_++)(c[_].fn!==h||d&&!c[_].once||f&&c[_].context!==f)&&v.push(c[_]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},s.prototype.removeAllListeners=function(l){var h;return l?(h=r?r+l:l,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(Mu);var bn=Mu.exports,Sd=typeof global=="object"&&global&&global.Object===Object&&global,Ou=Sd,wd=typeof self=="object"&&self&&self.Object===Object&&self,Pd=Ou||wd||Function("return this")(),Xe=Pd,Rd=Xe.Symbol,Xt=Rd,Cu=Object.prototype,Md=Cu.hasOwnProperty,Od=Cu.toString,dr=Xt?Xt.toStringTag:void 0;function Cd(e){var t=Md.call(e,dr),r=e[dr];try{e[dr]=void 0;var n=!0}catch{}var i=Od.call(e);return n&&(t?e[dr]=r:delete e[dr]),i}var Ad=Object.prototype,Dd=Ad.toString;function Id(e){return Dd.call(e)}var Ld="[object Null]",$d="[object Undefined]",Au=Xt?Xt.toStringTag:void 0;function pr(e){return e==null?e===void 0?$d:Ld:Au&&Au in Object(e)?Cd(e):Id(e)}function vr(e){return e!=null&&typeof e=="object"}var Bd=Array.isArray,Sn=Bd;function sa(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Fd="[object AsyncFunction]",Gd="[object Function]",kd="[object GeneratorFunction]",Ud="[object Proxy]";function Du(e){if(!sa(e))return!1;var t=pr(e);return t==Gd||t==kd||t==Fd||t==Ud}var Nd=Xe["__core-js_shared__"],ua=Nd,Iu=function(){var e=/[^.]+$/.exec(ua&&ua.keys&&ua.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Hd(e){return!!Iu&&Iu in e}var Xd=Function.prototype,Wd=Xd.toString;function gt(e){if(e!=null){try{return Wd.call(e)}catch{}try{return e+""}catch{}}return""}var Vd=/[\\^$.*+?()[\]{}|]/g,qd=/^\[object .+?Constructor\]$/,Yd=Function.prototype,zd=Object.prototype,Kd=Yd.toString,Zd=zd.hasOwnProperty,Jd=RegExp("^"+Kd.call(Zd).replace(Vd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qd(e){if(!sa(e)||Hd(e))return!1;var t=Du(e)?Jd:qd;return t.test(gt(e))}function jd(e,t){return e==null?void 0:e[t]}function Wt(e,t){var r=jd(e,t);return Qd(r)?r:void 0}var ep=Wt(Xe,"WeakMap"),la=ep,tp=9007199254740991,rp=/^(?:0|[1-9]\d*)$/;function np(e,t){var r=typeof e;return t=t==null?tp:t,!!t&&(r=="number"||r!="symbol"&&rp.test(e))&&e>-1&&e%1==0&&e<t}function Lu(e,t){return e===t||e!==e&&t!==t}var ip=9007199254740991;function $u(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ip}function ap(e){return e!=null&&$u(e.length)&&!Du(e)}var op=Object.prototype;function sp(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||op;return e===r}function up(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var lp="[object Arguments]";function Bu(e){return vr(e)&&pr(e)==lp}var Fu=Object.prototype,hp=Fu.hasOwnProperty,fp=Fu.propertyIsEnumerable,cp=Bu(function(){return arguments}())?Bu:function(e){return vr(e)&&hp.call(e,"callee")&&!fp.call(e,"callee")},dp=cp;function pp(){return!1}var Gu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ku=Gu&&typeof module=="object"&&module&&!module.nodeType&&module,vp=ku&&ku.exports===Gu,Uu=vp?Xe.Buffer:void 0,_p=Uu?Uu.isBuffer:void 0,gp=_p||pp,ha=gp,yp="[object Arguments]",mp="[object Array]",xp="[object Boolean]",Tp="[object Date]",Ep="[object Error]",bp="[object Function]",Sp="[object Map]",wp="[object Number]",Pp="[object Object]",Rp="[object RegExp]",Mp="[object Set]",Op="[object String]",Cp="[object WeakMap]",Ap="[object ArrayBuffer]",Dp="[object DataView]",Ip="[object Float32Array]",Lp="[object Float64Array]",$p="[object Int8Array]",Bp="[object Int16Array]",Fp="[object Int32Array]",Gp="[object Uint8Array]",kp="[object Uint8ClampedArray]",Up="[object Uint16Array]",Np="[object Uint32Array]",ee={};ee[Ip]=ee[Lp]=ee[$p]=ee[Bp]=ee[Fp]=ee[Gp]=ee[kp]=ee[Up]=ee[Np]=!0;ee[yp]=ee[mp]=ee[Ap]=ee[xp]=ee[Dp]=ee[Tp]=ee[Ep]=ee[bp]=ee[Sp]=ee[wp]=ee[Pp]=ee[Rp]=ee[Mp]=ee[Op]=ee[Cp]=!1;function Hp(e){return vr(e)&&$u(e.length)&&!!ee[pr(e)]}function Xp(e){return function(t){return e(t)}}var Nu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_r=Nu&&typeof module=="object"&&module&&!module.nodeType&&module,Wp=_r&&_r.exports===Nu,fa=Wp&&Ou.process,Vp=function(){try{var e=_r&&_r.require&&_r.require("util").types;return e||fa&&fa.binding&&fa.binding("util")}catch{}}(),Hu=Vp,Xu=Hu&&Hu.isTypedArray,qp=Xu?Xp(Xu):Hp,Wu=qp,Yp=Object.prototype,zp=Yp.hasOwnProperty;function Kp(e,t){var r=Sn(e),n=!r&&dp(e),i=!r&&!n&&ha(e),a=!r&&!n&&!i&&Wu(e),o=r||n||i||a,s=o?up(e.length,String):[],u=s.length;for(var l in e)(t||zp.call(e,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||np(l,u)))&&s.push(l);return s}function Zp(e,t){return function(r){return e(t(r))}}var Jp=Zp(Object.keys,Object),Qp=Jp,jp=Object.prototype,ev=jp.hasOwnProperty;function tv(e){if(!sp(e))return Qp(e);var t=[];for(var r in Object(e))ev.call(e,r)&&r!="constructor"&&t.push(r);return t}function rv(e){return ap(e)?Kp(e):tv(e)}var nv=Wt(Object,"create"),gr=nv;function iv(){this.__data__=gr?gr(null):{},this.size=0}function av(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ov="__lodash_hash_undefined__",sv=Object.prototype,uv=sv.hasOwnProperty;function lv(e){var t=this.__data__;if(gr){var r=t[e];return r===ov?void 0:r}return uv.call(t,e)?t[e]:void 0}var hv=Object.prototype,fv=hv.hasOwnProperty;function cv(e){var t=this.__data__;return gr?t[e]!==void 0:fv.call(t,e)}var dv="__lodash_hash_undefined__";function pv(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=gr&&t===void 0?dv:t,this}function yt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yt.prototype.clear=iv;yt.prototype.delete=av;yt.prototype.get=lv;yt.prototype.has=cv;yt.prototype.set=pv;function vv(){this.__data__=[],this.size=0}function wn(e,t){for(var r=e.length;r--;)if(Lu(e[r][0],t))return r;return-1}var _v=Array.prototype,gv=_v.splice;function yv(e){var t=this.__data__,r=wn(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():gv.call(t,r,1),--this.size,!0}function mv(e){var t=this.__data__,r=wn(t,e);return r<0?void 0:t[r][1]}function xv(e){return wn(this.__data__,e)>-1}function Tv(e,t){var r=this.__data__,n=wn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function We(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}We.prototype.clear=vv;We.prototype.delete=yv;We.prototype.get=mv;We.prototype.has=xv;We.prototype.set=Tv;var Ev=Wt(Xe,"Map"),yr=Ev;function bv(){this.size=0,this.__data__={hash:new yt,map:new(yr||We),string:new yt}}function Sv(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Pn(e,t){var r=e.__data__;return Sv(t)?r[typeof t=="string"?"string":"hash"]:r.map}function wv(e){var t=Pn(this,e).delete(e);return this.size-=t?1:0,t}function Pv(e){return Pn(this,e).get(e)}function Rv(e){return Pn(this,e).has(e)}function Mv(e,t){var r=Pn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function mt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}mt.prototype.clear=bv;mt.prototype.delete=wv;mt.prototype.get=Pv;mt.prototype.has=Rv;mt.prototype.set=Mv;function Ov(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Cv(){this.__data__=new We,this.size=0}function Av(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Dv(e){return this.__data__.get(e)}function Iv(e){return this.__data__.has(e)}var Lv=200;function $v(e,t){var r=this.__data__;if(r instanceof We){var n=r.__data__;if(!yr||n.length<Lv-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new mt(n)}return r.set(e,t),this.size=r.size,this}function et(e){var t=this.__data__=new We(e);this.size=t.size}et.prototype.clear=Cv;et.prototype.delete=Av;et.prototype.get=Dv;et.prototype.has=Iv;et.prototype.set=$v;function Bv(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}function Fv(){return[]}var Gv=Object.prototype,kv=Gv.propertyIsEnumerable,Vu=Object.getOwnPropertySymbols,Uv=Vu?function(e){return e==null?[]:(e=Object(e),Bv(Vu(e),function(t){return kv.call(e,t)}))}:Fv,Nv=Uv;function Hv(e,t,r){var n=t(e);return Sn(e)?n:Ov(n,r(e))}function qu(e){return Hv(e,rv,Nv)}var Xv=Wt(Xe,"DataView"),ca=Xv,Wv=Wt(Xe,"Promise"),da=Wv,Vv=Wt(Xe,"Set"),pa=Vv,Yu="[object Map]",qv="[object Object]",zu="[object Promise]",Ku="[object Set]",Zu="[object WeakMap]",Ju="[object DataView]",Yv=gt(ca),zv=gt(yr),Kv=gt(da),Zv=gt(pa),Jv=gt(la),xt=pr;(ca&&xt(new ca(new ArrayBuffer(1)))!=Ju||yr&&xt(new yr)!=Yu||da&&xt(da.resolve())!=zu||pa&&xt(new pa)!=Ku||la&&xt(new la)!=Zu)&&(xt=function(e){var t=pr(e),r=t==qv?e.constructor:void 0,n=r?gt(r):"";if(n)switch(n){case Yv:return Ju;case zv:return Yu;case Kv:return zu;case Zv:return Ku;case Jv:return Zu}return t});var Qu=xt,Qv=Xe.Uint8Array,ju=Qv,jv="__lodash_hash_undefined__";function e_(e){return this.__data__.set(e,jv),this}function t_(e){return this.__data__.has(e)}function Rn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new mt;++t<r;)this.add(e[t])}Rn.prototype.add=Rn.prototype.push=e_;Rn.prototype.has=t_;function r_(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function n_(e,t){return e.has(t)}var i_=1,a_=2;function el(e,t,r,n,i,a){var o=r&i_,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(e),h=a.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,p=r&a_?new Rn:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var c=e[f],_=t[f];if(n)var v=o?n(_,c,f,t,e,a):n(c,_,f,e,t,a);if(v!==void 0){if(v)continue;d=!1;break}if(p){if(!r_(t,function(g,m){if(!n_(p,m)&&(c===g||i(c,g,r,n,a)))return p.push(m)})){d=!1;break}}else if(!(c===_||i(c,_,r,n,a))){d=!1;break}}return a.delete(e),a.delete(t),d}function o_(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}function s_(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var u_=1,l_=2,h_="[object Boolean]",f_="[object Date]",c_="[object Error]",d_="[object Map]",p_="[object Number]",v_="[object RegExp]",__="[object Set]",g_="[object String]",y_="[object Symbol]",m_="[object ArrayBuffer]",x_="[object DataView]",tl=Xt?Xt.prototype:void 0,va=tl?tl.valueOf:void 0;function T_(e,t,r,n,i,a,o){switch(r){case x_:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case m_:return!(e.byteLength!=t.byteLength||!a(new ju(e),new ju(t)));case h_:case f_:case p_:return Lu(+e,+t);case c_:return e.name==t.name&&e.message==t.message;case v_:case g_:return e==t+"";case d_:var s=o_;case __:var u=n&u_;if(s||(s=s_),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;n|=l_,o.set(e,t);var h=el(s(e),s(t),n,i,a,o);return o.delete(e),h;case y_:if(va)return va.call(e)==va.call(t)}return!1}var E_=1,b_=Object.prototype,S_=b_.hasOwnProperty;function w_(e,t,r,n,i,a){var o=r&E_,s=qu(e),u=s.length,l=qu(t),h=l.length;if(u!=h&&!o)return!1;for(var f=u;f--;){var d=s[f];if(!(o?d in t:S_.call(t,d)))return!1}var p=a.get(e),c=a.get(t);if(p&&c)return p==t&&c==e;var _=!0;a.set(e,t),a.set(t,e);for(var v=o;++f<u;){d=s[f];var g=e[d],m=t[d];if(n)var y=o?n(m,g,d,t,e,a):n(g,m,d,e,t,a);if(!(y===void 0?g===m||i(g,m,r,n,a):y)){_=!1;break}v||(v=d=="constructor")}if(_&&!v){var x=e.constructor,T=t.constructor;x!=T&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof T=="function"&&T instanceof T)&&(_=!1)}return a.delete(e),a.delete(t),_}var P_=1,rl="[object Arguments]",nl="[object Array]",Mn="[object Object]",R_=Object.prototype,il=R_.hasOwnProperty;function M_(e,t,r,n,i,a){var o=Sn(e),s=Sn(t),u=o?nl:Qu(e),l=s?nl:Qu(t);u=u==rl?Mn:u,l=l==rl?Mn:l;var h=u==Mn,f=l==Mn,d=u==l;if(d&&ha(e)){if(!ha(t))return!1;o=!0,h=!1}if(d&&!h)return a||(a=new et),o||Wu(e)?el(e,t,r,n,i,a):T_(e,t,u,r,n,i,a);if(!(r&P_)){var p=h&&il.call(e,"__wrapped__"),c=f&&il.call(t,"__wrapped__");if(p||c){var _=p?e.value():e,v=c?t.value():t;return a||(a=new et),i(_,v,r,n,a)}}return d?(a||(a=new et),w_(e,t,r,n,i,a)):!1}function al(e,t,r,n,i){return e===t?!0:e==null||t==null||!vr(e)&&!vr(t)?e!==e&&t!==t:M_(e,t,r,n,al,i)}function On(e,t){return al(e,t)}function ol(e,t){e.constructor.IDEProps||(e.constructor.IDEProps={}),e.constructor.IDEProps[t]||(e.constructor.IDEProps[t]={});var r=e.constructor.IDEProps[t];return r}function Tt(e){return function(t,r){var n=ol(t,r);n.key=r,n.type=e}}function Et(e){return function(t,r){var n=ol(t,r);n.step=e}}/*!
 * type-signals - v1.1.0
 * https://github.com/englercj/type-signals
 * Compiled Wed, 22 Apr 2020 17:58:58 UTC
 *
 * type-signals is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */var sl=function(){function e(t,r,n){r===void 0&&(r=!1),this.next=null,this.prev=null,this.owner=null,this.fn=t,this.once=r,this.thisArg=n}return e.prototype.detach=function(){return this.owner===null?!1:(this.owner.detach(this),!0)},e.prototype.dispose=function(){this.detach()},e}(),pe=function(){function e(){this._head=null,this._tail=null,this._filter=null}return e.prototype.handlers=function(){for(var t=this._head,r=[];t;)r.push(t),t=t.next;return r},e.prototype.hasAny=function(){return!!this._head},e.prototype.has=function(t){return t.owner===this},e.prototype.dispatch=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this._head;if(!n||this._filter&&!this._filter.apply(this,t))return!1;for(;n;)n.once&&this.detach(n),n.fn.apply(n.thisArg,t),n=n.next;return!0},e.prototype.add=function(t,r){return r===void 0&&(r=null),this._addSignalBinding(new sl(t,!1,r))},e.prototype.once=function(t,r){return r===void 0&&(r=null),this._addSignalBinding(new sl(t,!0,r))},e.prototype.detach=function(t){var r=t;return r.owner!==this?this:(r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r===this._head?(this._head=r.next,r.next===null&&(this._tail=null)):r===this._tail&&(this._tail=r.prev,this._tail&&(this._tail.next=null)),r.owner=null,this)},e.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=null,this._tail=null;t;)t.owner=null,t=t.next;return this},e.prototype.filter=function(t){this._filter=t},e.prototype.proxy=function(){for(var t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return t.dispatch.apply(t,o)},a=0;a<r.length;++a)r[a].add(i);return this},e.prototype._addSignalBinding=function(t){var r=t;return this._head?(this._tail&&(this._tail.next=r),r.prev=this._tail,this._tail=r):(this._head=r,this._tail=r),r.owner=this,r},e}();function O_(e,t){if(!!e){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[t.strictMode?"strict":"loose"].exec(e),i={},a=14;a--;)i[r.key[a]]=n[a]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(o,s,u){s&&(i[r.q.name][s]=u)}),i}}var mr=O_;/*!
 * resource-loader - v4.0.0-rc4
 * https://github.com/englercj/resource-loader
 * Compiled Sun, 08 Mar 2020 16:55:29 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */var Cn=function(){function e(t){this.config=t,this.onError=new pe,this.onComplete=new pe,this.onProgress=new pe}return e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _a=function(e,t){return _a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},_a(e,t)};function xr(e,t){_a(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function C_(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)n[i]=a[o];return n}function ga(e){var t=e.indexOf("data:")===0,r="";if(t){var n=e.indexOf("/");r=e.substring(n+1,e.indexOf(";",n))}else{var i=e.indexOf("?"),a=e.indexOf("#"),o=Math.min(i>-1?i:e.length,a>-1?a:e.length);e=e.substring(0,o),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()}function ul(e){throw new Error("Unexpected value. Should have been never.")}var xe;(function(e){e[e.Unknown=0]="Unknown",e[e.Buffer=1]="Buffer",e[e.Blob=2]="Blob",e[e.Json=3]="Json",e[e.Xml=4]="Xml",e[e.Image=5]="Image",e[e.Audio=6]="Audio",e[e.Video=7]="Video",e[e.Text=8]="Text"})(xe||(xe={}));var Ve;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Loading=1]="Loading",e[e.Complete=2]="Complete"})(Ve||(Ve={}));var ya=function(e){xr(t,e);function t(r,n){var i=e.call(this,r)||this;return i.elementType=n,i._boundOnLoad=i._onLoad.bind(i),i._boundOnError=i._onError.bind(i),i._boundOnTimeout=i._onTimeout.bind(i),i._element=i._createElement(),i._elementTimer=0,i}return t.prototype.load=function(){var r=this.config;r.crossOrigin&&(this._element.crossOrigin=r.crossOrigin);var n=r.sourceSet||[r.url];if(navigator.isCocoonJS)this._element.src=n[0];else for(var i=0;i<n.length;++i){var a=n[i],o=r.mimeTypes?r.mimeTypes[i]:void 0;o||(o=this.elementType+"/"+ga(a));var s=document.createElement("source");s.src=a,s.type=o,this._element.appendChild(s)}this._element.addEventListener("load",this._boundOnLoad,!1),this._element.addEventListener("canplaythrough",this._boundOnLoad,!1),this._element.addEventListener("error",this._boundOnError,!1),this._element.load(),r.timeout&&(this._elementTimer=window.setTimeout(this._boundOnTimeout,r.timeout))},t.prototype.abort=function(){for(this._clearEvents();this._element.firstChild;)this._element.removeChild(this._element.firstChild);this._error(this.elementType+" load aborted by the user.")},t.prototype._createElement=function(){return this.config.loadElement?this.config.loadElement:document.createElement(this.elementType)},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this._element.removeEventListener("load",this._boundOnLoad,!1),this._element.removeEventListener("canplaythrough",this._boundOnLoad,!1),this._element.removeEventListener("error",this._boundOnError,!1)},t.prototype._error=function(r){this._clearEvents(),this.onError.dispatch(r)},t.prototype._complete=function(){this._clearEvents();var r=xe.Unknown;switch(this.elementType){case"audio":r=xe.Audio;break;case"video":r=xe.Video;break;default:ul(this.elementType)}this.onComplete.dispatch(r,this._element)},t.prototype._onLoad=function(){this._complete()},t.prototype._onError=function(){this._error(this.elementType+" failed to load.")},t.prototype._onTimeout=function(){this._error(this.elementType+" load timed out.")},t}(Cn),An=function(e){xr(t,e);function t(r){return e.call(this,r,"audio")||this}return t}(ya),A_="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",ve=function(e){xr(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._boundOnLoad=r._onLoad.bind(r),r._boundOnError=r._onError.bind(r),r._boundOnTimeout=r._onTimeout.bind(r),r._element=r._createElement(),r._elementTimer=0,r}return t.prototype.load=function(){var r=this.config;r.crossOrigin&&(this._element.crossOrigin=r.crossOrigin),this._element.src=r.url,this._element.addEventListener("load",this._boundOnLoad,!1),this._element.addEventListener("error",this._boundOnError,!1),r.timeout&&(this._elementTimer=window.setTimeout(this._boundOnTimeout,r.timeout))},t.prototype.abort=function(){this._clearEvents(),this._element.src=A_,this._error("Image load aborted by the user.")},t.prototype._createElement=function(){return this.config.loadElement?this.config.loadElement:document.createElement("img")},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this._element.removeEventListener("load",this._boundOnLoad,!1),this._element.removeEventListener("error",this._boundOnError,!1)},t.prototype._error=function(r){this._clearEvents(),this.onError.dispatch(r)},t.prototype._complete=function(){this._clearEvents(),this.onComplete.dispatch(xe.Image,this._element)},t.prototype._onLoad=function(){this._complete()},t.prototype._onError=function(){this._error("Image failed to load.")},t.prototype._onTimeout=function(){this._error("Image load timed out.")},t}(Cn),Tr=function(e){xr(t,e);function t(r){return e.call(this,r,"video")||this}return t}(ya),Dn=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),X;(function(e){e.Default="text",e.Buffer="arraybuffer",e.Blob="blob",e.Document="document",e.Json="json",e.Text="text"})(X||(X={}));function ma(e){return e.toString().replace("object ","")}var be=function(e){xr(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._boundOnLoad=r._onLoad.bind(r),r._boundOnAbort=r._onAbort.bind(r),r._boundOnError=r._onError.bind(r),r._boundOnTimeout=r._onTimeout.bind(r),r._boundOnProgress=r._onProgress.bind(r),r._xhr=r._createRequest(),r._xhrType=X.Default,r}return t.prototype.load=function(){var r=this.config,n=ga(r.url);typeof r.xhrType!="string"&&(r.xhrType=this._determineXhrType(n));var i=this._xhr;this._xhrType=r.xhrType||X.Default,Dn?(i.timeout=r.timeout||5e3,i.onload=this._boundOnLoad,i.onerror=this._boundOnError,i.ontimeout=this._boundOnTimeout,i.onprogress=this._boundOnProgress,i.open("GET",r.url,!0),setTimeout(function(){i.send()},0)):(i.open("GET",r.url,!0),r.timeout&&(i.timeout=r.timeout),r.xhrType===X.Json||r.xhrType===X.Document?i.responseType=X.Text:i.responseType=r.xhrType,i.addEventListener("load",this._boundOnLoad,!1),i.addEventListener("abort",this._boundOnAbort,!1),i.addEventListener("error",this._boundOnError,!1),i.addEventListener("timeout",this._boundOnTimeout,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.send())},t.prototype.abort=function(){Dn?(this._clearEvents(),this._xhr.abort(),this._onAbort()):this._xhr.abort()},t.prototype._createRequest=function(){return Dn?new window.XDomainRequest:new XMLHttpRequest},t.prototype._determineXhrType=function(r){return t._xhrTypeMap[r]||X.Default},t.prototype._clearEvents=function(){Dn?(this._xhr.onload=null,this._xhr.onerror=null,this._xhr.ontimeout=null,this._xhr.onprogress=null):(this._xhr.removeEventListener("load",this._boundOnLoad,!1),this._xhr.removeEventListener("abort",this._boundOnAbort,!1),this._xhr.removeEventListener("error",this._boundOnError,!1),this._xhr.removeEventListener("timeout",this._boundOnTimeout,!1),this._xhr.removeEventListener("progress",this._boundOnProgress,!1))},t.prototype._error=function(r){this._clearEvents(),this.onError.dispatch(r)},t.prototype._complete=function(r,n){this._clearEvents(),this.onComplete.dispatch(r,n)},t.prototype._onLoad=function(){var r=this._xhr,n="",i=typeof r.status=="undefined"?200:r.status;(typeof r.responseType=="undefined"||r.responseType===""||r.responseType==="text")&&(n=r.responseText),i===0&&(n.length>0||r.responseType===X.Buffer)?i=200:i===1223&&(i=204);var a=Math.floor(i/100)*100;if(a!==200){this._error("["+r.status+"] "+r.statusText+": "+r.responseURL);return}switch(this._xhrType){case X.Buffer:this._complete(xe.Buffer,r.response);break;case X.Blob:this._complete(xe.Blob,r.response);break;case X.Document:this._parseDocument(n);break;case X.Json:this._parseJson(n);break;case X.Default:case X.Text:this._complete(xe.Text,n);break;default:ul(this._xhrType)}},t.prototype._parseDocument=function(r){try{if(window.DOMParser){var n=new DOMParser,i=n.parseFromString(r,"text/xml");this._complete(xe.Xml,i)}else{var a=document.createElement("div");a.innerHTML=r,this._complete(xe.Xml,a)}}catch(o){this._error("Error trying to parse loaded xml: "+o)}},t.prototype._parseJson=function(r){try{var n=JSON.parse(r);this._complete(xe.Json,n)}catch(i){this._error("Error trying to parse loaded json: "+i)}},t.prototype._onAbort=function(){var r=this._xhr;this._error(ma(r)+" Request was aborted by the user.")},t.prototype._onError=function(){var r=this._xhr;this._error(ma(r)+" Request failed. Status: "+r.status+', text: "'+r.statusText+'"')},t.prototype._onTimeout=function(){var r=this._xhr;this._error(ma(r)+" Request timed out.")},t.prototype._onProgress=function(r){r&&r.lengthComputable&&this.onProgress.dispatch(r.loaded/r.total)},t.setExtensionXhrType=function(r,n){r&&r.indexOf(".")===0&&(r=r.substring(1)),!!r&&(t._xhrTypeMap[r]=n)},t.ResponseType=X,t._xhrTypeMap={xhtml:X.Document,html:X.Document,htm:X.Document,xml:X.Document,tmx:X.Document,svg:X.Document,tsx:X.Document,gif:X.Blob,png:X.Blob,bmp:X.Blob,jpg:X.Blob,jpeg:X.Blob,tif:X.Blob,tiff:X.Blob,webp:X.Blob,tga:X.Blob,json:X.Json,text:X.Text,txt:X.Text,ttf:X.Buffer,otf:X.Buffer},t}(Cn);function D_(e){var t=e;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(t===null)throw new Error("Callback was already called.");var a=t;return t=null,a.apply(this,n)}}var I_=function(){function e(t,r){if(r===void 0&&(r=1),this.worker=t,this.concurrency=r,this.workers=0,this.buffer=0,this.paused=!1,this._started=!1,this._tasks=[],this.onSaturated=new pe,this.onUnsaturated=new pe,this.onEmpty=new pe,this.onDrain=new pe,this.onError=new pe,r===0)throw new Error("Concurrency must not be zero");this.buffer=r/4}return Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.onDrain.detachAll(),this.workers=0,this._started=!1,this._tasks=[]},e.prototype.push=function(t,r){this._insert(t,!1,r)},e.prototype.unshift=function(t,r){this._insert(t,!0,r)},e.prototype.process=function(){for(;!this.paused&&this.workers<this.concurrency&&this._tasks.length;){var t=this._tasks.shift();this._tasks.length===0&&this.onEmpty.dispatch(),this.workers+=1,this.workers===this.concurrency&&this.onSaturated.dispatch(),this.worker(t.data,D_(this._next(t)))}},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},e.prototype.getTask=function(t){return this._tasks[t]},e.prototype._insert=function(t,r,n){var i=this;if(n!=null&&typeof n!="function")throw new Error("task callback must be a function");if(this._started=!0,t==null&&this.idle()){setTimeout(function(){return i.onDrain.dispatch()},1);return}var a={data:t,callback:n};r?this._tasks.unshift(a):this._tasks.push(a),setTimeout(function(){return i.process()},1)},e.prototype._next=function(t){var r=this;return function(n){for(var i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];r.workers-=1,t.callback&&t.callback.apply(t,C_([n],i)),n&&r.onError.dispatch(n,t.data),r.workers<=r.concurrency-r.buffer&&r.onUnsaturated.dispatch(),r.idle()&&r.onDrain.dispatch(),r.process()}},e}(),ll=function(){function e(t,r){if(this.children=[],this.onStart=new pe,this.onProgress=new pe,this.onComplete=new pe,this.onAfterMiddleware=new pe,this.data=null,this.type=xe.Unknown,this.error="",this.progressChunk=0,this._dequeue=function(){},this._onCompleteBinding=null,this._state=Ve.NotStarted,this.name=t,this.metadata=r.metadata,typeof r.crossOrigin!="string"&&(r.crossOrigin=this._determineCrossOrigin(r.url)),r.strategy&&typeof r.strategy!="function")this._strategy=r.strategy,this._strategy.config=r;else{var n=r.strategy;n||(n=e._loadStrategyMap[ga(r.url)]),n||(n=e._defaultLoadStrategy),this._strategy=new n(r)}this._strategy.onError.add(this._error,this),this._strategy.onComplete.add(this._complete,this),this._strategy.onProgress.add(this._progress,this)}return e.setDefaultLoadStrategy=function(t){e._defaultLoadStrategy=t},e.setLoadStrategy=function(t,r){t&&t.indexOf(".")===0&&(t=t.substring(1)),!!t&&(e._loadStrategyMap[t]=r)},Object.defineProperty(e.prototype,"strategy",{get:function(){return this._strategy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._strategy.config.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._state===Ve.Loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._state===Ve.Complete},enumerable:!0,configurable:!0}),e.prototype.abort=function(){this._strategy.abort()},e.prototype.load=function(){this._state=Ve.Loading,this.onStart.dispatch(this),this._strategy.load()},e.prototype._error=function(t){this._state=Ve.Complete,this.error=t,this.onComplete.dispatch(this)},e.prototype._complete=function(t,r){this._state=Ve.Complete,this.type=t,this.data=r,this.onComplete.dispatch(this)},e.prototype._progress=function(t){this.onProgress.dispatch(this,t)},e.prototype._determineCrossOrigin=function(t,r){if(r===void 0&&(r=window.location),t.indexOf("data:")===0||t.indexOf("javascript:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";e._tempAnchor||(e._tempAnchor=document.createElement("a")),e._tempAnchor.href=t;var n=mr(e._tempAnchor.href,{strictMode:!0}),i=!n.port&&r.port===""||n.port===r.port,a=n.protocol?n.protocol+":":"";return n.host!==r.hostname||!i||a!==r.protocol?"anonymous":""},e._tempAnchor=null,e._defaultLoadStrategy=be,e._loadStrategyMap={gif:ve,png:ve,bmp:ve,jpg:ve,jpeg:ve,tif:ve,tiff:ve,webp:ve,tga:ve,svg:ve,"svg+xml":ve,mp3:An,ogg:An,wav:An,mp4:Tr,webm:Tr,mov:Tr},e}();function L_(e,t,r,n){n===void 0&&(n=!1);var i=0,a=e.length;(function o(s){if(s||i===a){r&&r(s);return}n?setTimeout(function(){return t(e[i++],o)},1):t(e[i++],o)})()}var xa=100,$_=/(#[\w-]+)?$/,hl=function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this.resources={},this.onError=new pe,this.onLoad=new pe,this.onStart=new pe,this.onComplete=new pe,this.onProgress=new pe,this._baseUrl="",this._urlResolvers=[],this._middleware=[],this._resourcesParsing=[],this._boundLoadResource=this._loadResource.bind(this),this.baseUrl=t,this._queue=new I_(this._boundLoadResource,r),this._queue.pause(),this._middleware=e._defaultMiddleware.slice()}return Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(t){for(;t.length&&t.charAt(t.length-1)==="/";)t=t.slice(0,-1);this._baseUrl=t},enumerable:!0,configurable:!0}),e.prototype.add=function(t,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}var i="",a="",o=this._baseUrl,s={url:""};if(typeof t=="object"?(i=t.url,a=t.name||t.url,o=t.baseUrl||o,s=t):(a=t,typeof r=="string"?i=r:i=a),!i)throw new Error("You must specify the `url` property.");if(this.loading&&!s.parentResource)throw new Error("Cannot add root resources while the loader is running.");if(this.resources[a])throw new Error('Resource named "'+a+'" already exists.');i=this._prepareUrl(i,o),s.url=i;var u=new ll(a,s);if(this.resources[a]=u,typeof s.onComplete=="function"&&u.onAfterMiddleware.once(s.onComplete),this.loading){for(var l=s.parentResource,h=[],n=0;n<l.children.length;++n)l.children[n].isComplete||h.push(l.children[n]);var f=l.progressChunk*(h.length+1),d=f/(h.length+2);l.children.push(u),l.progressChunk=d;for(var n=0;n<h.length;++n)h[n].progressChunk=d;u.progressChunk=d}return this._queue.push(u),this},e.prototype.use=function(t,r){return r===void 0&&(r=e.DefaultMiddlewarePriority),this._middleware.push({fn:t,priority:r}),this._middleware.sort(function(n,i){return n.priority-i.priority}),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.reset(),this._queue.pause();for(var t in this.resources){var r=this.resources[t];!r||(r._onCompleteBinding&&r._onCompleteBinding.detach(),r.isLoading&&r.abort())}return this.resources={},this},e.prototype.load=function(t){if(typeof t=="function"&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue.length(),n=xa/r,i=0;i<this._queue.length();++i)this._queue.getTask(i).data.progressChunk=n;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!0,configurable:!0}),e.prototype.addUrlResolver=function(t){return this._urlResolvers.push(t),this},e.prototype._prepareUrl=function(t,r){var n=mr(t,{strictMode:!0});if(this._urlResolvers.forEach(function(o){t=o(t,n),n=mr(t,{strictMode:!0})}),!n.protocol&&t.indexOf("//")!==0&&(r.length&&t.charAt(0)!=="/"?t=r+"/"+t:t=r+t),this.defaultQueryString){var i=$_.exec(t);if(i){var a=i[0];t=t.substr(0,t.length-a.length),t.indexOf("?")!==-1?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=a}}return t},e.prototype._loadResource=function(t,r){t._dequeue=r,t._onCompleteBinding=t.onComplete.once(this._onLoad,this),t.load()},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=xa,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(t){var r=this;t._onCompleteBinding=null,this._resourcesParsing.push(t),t._dequeue(),L_(this._middleware,function(n,i){n.fn.call(r,t,i)},function(){t.onAfterMiddleware.dispatch(t),r.progress=Math.min(xa,r.progress+t.progressChunk),r.onProgress.dispatch(r,t),t.error?r.onError.dispatch(t.error,r,t):r.onLoad.dispatch(r,t),r._resourcesParsing.splice(r._resourcesParsing.indexOf(t),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},e.use=function(t,r){return r===void 0&&(r=e.DefaultMiddlewarePriority),e._defaultMiddleware.push({fn:t,priority:r}),e._defaultMiddleware.sort(function(n,i){return n.priority-i.priority}),e},e.DefaultMiddlewarePriority=50,e._defaultMiddleware=[],e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ta=function(e,t){return Ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ta(e,t)};function Vt(e,t){Ta(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function bt(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function St(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(l){try{u(n.next(l))}catch(h){a(h)}}function s(l){try{u(n.throw(l))}catch(h){a(h)}}function u(l){l.done?i(l.value):new r(function(h){h(l.value)}).then(o,s)}u((n=n.apply(e,t||[])).next())})}function wt(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(h){return u([l,h])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(h){l=[6,h],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ie(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function B_(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function In(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(B_(arguments[t]));return e}function F_(e){if(e instanceof fl)return e.name;if(e instanceof Function)return e.componentName}var fl=function(e){Vt(t,e);function t(r){var n=e.call(this)||this;return n.started=!1,n.name=n.constructor.componentName,n.__componentDefaultParams=r,n}return t}(bn),qt=fl,Re;(function(e){e.ADD="ADD",e.REMOVE="REMOVE",e.CHANGE="CHANGE"})(Re||(Re={}));var Ln={},$n={},Pt={},Yt={};function G_(e,t){Ln[e.gameObject.id]||(Ln[e.gameObject.id]={});var r=Ln[e.gameObject.id],n=e.name+"_"+t.join(",");if(r[n])return r[n];for(var i=t.length-1,a=e,o=0;o<i;o++)a=a[t[o]];return r[n]={property:a,key:t[i]},r[n]}function k_(e){e.gameObject&&delete Ln[e.gameObject.id]}function U_(e){var t=e.systemName,r=e.componentName,n=e.component,i=e.prop,a=e.type;$n[t].componentObserver.add({component:n,prop:i,type:a,componentName:r})}function N_(e){var t=e.prop,r=e.component,n=e.componentName;for(var i in Pt){var a=Pt[i]||{},o=a[n];if(!!o){var s=o.findIndex(function(u){return On(u,t)});s>-1&&U_({systemName:i,componentName:n,component:r,prop:t,type:Re.CHANGE})}}}function cl(e){var t,r,n=e.obj,i=e.key,a=e.prop,o=e.component,s=e.componentName;if(n!==void 0){if(!(i in n)){console.error("prop "+i+" not in component: "+s+", Can not observer");return}if(Object.defineProperty(n,"_"+i,{enumerable:!1,writable:!0,value:n[i]}),a.deep&&sa(n[i]))try{for(var u=ie(Object.keys(n[i])),l=u.next();!l.done;l=u.next()){var h=l.value;cl({obj:n[i],key:h,prop:a,component:o,componentName:s})}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}Object.defineProperty(n,i,{enumerable:!0,set:function(f){n["_"+i]!==f&&(n["_"+i]=f,N_({prop:a,component:o,componentName:s}))},get:function(){return n["_"+i]}})}}function H_(e){return e&&e.constructor&&"componentName"in e.constructor}function X_(e){var t,r,n,i,a=[];e instanceof Array?a.push.apply(a,In(e)):a.push(e);try{for(var o=ie(a),s=o.next();!s.done;s=o.next()){var u=s.value;for(var l in u.observerInfo){Yt[l]=Yt[l]||[];var h=Yt[l],f=function(_){var v=h.findIndex(function(g){return On(g,_)});v===-1&&Yt[l].push(_)};try{for(var d=(n=void 0,ie(u.observerInfo[l])),p=d.next();!p.done;p=d.next()){var c=p.value;f(c)}}catch(_){n={error:_}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}}}catch(_){t={error:_}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}function W_(e,t){var r,n;if(t===void 0&&(t=e.name),!(!t||!Yt[t])){if(!e||!H_(e))throw new Error("component param must be an instance of Component");if(!e.gameObject||!e.gameObject.id)throw new Error("component should be add to a gameObject");try{for(var i=ie(Yt[t]),a=i.next();!a.done;a=i.next()){var o=a.value,s=G_(e,o.prop),u=s.property,l=s.key;cl({obj:u,key:l,prop:o,component:e,componentName:t})}}catch(h){r={error:h}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}}function V_(e,t){t===void 0&&(t=e.name);for(var r in Pt){var n=Pt[r]||{},i=n[t];i&&$n[r].componentObserver.add({component:e,type:Re.ADD,componentName:t})}}function q_(e,t){t===void 0&&(t=e.name);for(var r in Pt){var n=Pt[r]||{},i=n[t];i&&$n[r].componentObserver.add({component:e,type:Re.REMOVE,componentName:t})}k_(e)}function Y_(e,t){Pt[t.systemName]=t.observerInfo,$n[t.systemName]=e}var z_=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.name="Transform",r._parent=null,r.inScene=!1,r.children=[],r.position={x:0,y:0},r.size={width:0,height:0},r.origin={x:0,y:0},r.anchor={x:0,y:0},r.scale={x:1,y:1},r.skew={x:0,y:0},r.rotation=0,r}return t.prototype.init=function(r){var n,i;r===void 0&&(r={});var a=["position","size","origin","anchor","scale","skew"];try{for(var o=ie(a),s=o.next();!s.done;s=o.next()){var u=s.value;Object.assign(this[u],r[u])}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.rotation=r.rotation||this.rotation},Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(r){r?r.addChild(this):this.parent&&this.parent.removeChild(this)},enumerable:!1,configurable:!0}),t.prototype.addChild=function(r){if(r.parent===this){var n=this.children.findIndex(function(i){return i===r});this.children.splice(n,1)}else r.parent&&r.parent.removeChild(r);r._parent=this,this.children.push(r)},t.prototype.removeChild=function(r){var n=this.children.findIndex(function(i){return i===r});n>-1&&(this.children.splice(n,1),r._parent=null)},t.prototype.clearChildren=function(){this.children.length=0},t.componentName="Transform",bt([Tt("vector2"),Et(1)],t.prototype,"position",void 0),bt([Tt("size"),Et(1)],t.prototype,"size",void 0),bt([Tt("vector2"),Et(.1)],t.prototype,"origin",void 0),bt([Tt("vector2"),Et(.1)],t.prototype,"anchor",void 0),bt([Tt("vector2"),Et(.1)],t.prototype,"scale",void 0),bt([Tt("vector2"),Et(.1)],t.prototype,"skew",void 0),bt([Tt("number"),Et(.1)],t.prototype,"rotation",void 0),t}(qt),dl=z_,K_=0;function Z_(){return++K_}var J_=function(){function e(t,r){this._componentCache={},this.components=[],this._name=t,this.id=Z_(),this.addComponent(dl,r)}return Object.defineProperty(e.prototype,"transform",{get:function(){return this.getComponent(dl)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.transform&&this.transform.parent&&this.transform.parent.gameObject},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},set:function(t){var r,n;if(this._scene!==t){var i=this._scene;if(this._scene=t,this.transform&&this.transform.children)try{for(var a=ie(this.transform.children),o=a.next();!o.done;o=a.next()){var s=o.value;s.gameObject.scene=t}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}t?t.addGameObject(this):i&&i.removeGameObject(this)}},enumerable:!1,configurable:!0}),e.prototype.addChild=function(t){if(!(!t||!t.transform||t===this)){if(!(t instanceof e))throw new Error("addChild only receive GameObject");if(!this.transform)throw new Error("gameObject '"+this.name+"' has been destroy");t.transform.parent=this.transform,t.scene=this.scene}},e.prototype.removeChild=function(t){return!(t instanceof e)||!t.parent||t.parent!==this||(t.transform.parent=null,t.scene=null),t},e.prototype.addComponent=function(t,r){var n=F_(t);if(!this._componentCache[n]){var i;if(t instanceof Function)i=new t(r);else if(t instanceof qt)i=t;else throw new Error("addComponent recieve Component and Component Constructor");if(i.gameObject)throw new Error("component has been added on gameObject "+i.gameObject.name);return i.gameObject=this,i.init&&i.init(i.__componentDefaultParams),V_(i,i.name),W_(i,i.name),this.components.push(i),this._componentCache[n]=i,i.awake&&i.awake(),i}},e.prototype.removeComponent=function(t){var r;if(typeof t=="string"?r=t:t instanceof qt?r=t.name:t.componentName&&(r=t.componentName),r==="Transform")throw new Error("Transform can't be removed");return this._removeComponent(r)},e.prototype._removeComponent=function(t){var r=this.components.findIndex(function(i){var a=i.name;return a===t});if(r!==-1){var n=this.components.splice(r,1)[0];return delete this._componentCache[t],delete n.__componentDefaultParams,n.onDestroy&&n.onDestroy(),q_(n,t),n.gameObject=void 0,n}},e.prototype.getComponent=function(t){var r;if(typeof t=="string"?r=t:t instanceof qt?r=t.name:t.componentName&&(r=t.componentName),typeof this._componentCache[r]!="undefined")return this._componentCache[r]},e.prototype.remove=function(){if(this.parent)return this.parent.removeChild(this)},e.prototype.destroy=function(){Array.from(this.transform.children).forEach(function(r){var n=r.gameObject;n.destroy()}),this.remove(),this.transform.clearChildren();for(var t in this._componentCache)this._removeComponent(t);this.components.length=0},e}(),Q_=J_,j_=function(){function e(){this.events=[]}return e.prototype.add=function(t){var r=t.component,n=t.prop,i=t.type,a=t.componentName;if(i===Re.REMOVE){if(this.events.find(function(s){return s.component===r&&s.type===Re.ADD}))return;this.events=this.events.filter(function(s){return s.component!==r})}var o=this.events.findIndex(function(s){return s.component===r&&On(s.prop,n)&&s.type===i});o>-1&&this.events.splice(o,1),this.events.push({gameObject:r.gameObject,component:r,prop:n,type:i,componentName:a})},e.prototype.getChanged=function(){return this.events},Object.defineProperty(e.prototype,"changed",{get:function(){return this.events},enumerable:!1,configurable:!0}),e.prototype.clear=function(){var t=this.events;return this.events=[],t},e}(),eg=j_,tg=function(){function e(t){this.started=!1,this.componentObserver=new eg,this.__systemDefaultParams=t,this.name=this.constructor.systemName}return e.prototype.destroy=function(){var t;this.componentObserver=null,this.__systemDefaultParams=null,(t=this.onDestroy)===null||t===void 0||t.call(this)},e}(),Er=tg;function rg(){var e=null;return Date.now?e=Date.now:e=function(){return new Date().getTime()},e}var pl=rg(),ng={originTime:0,playbackRate:1},ig=function(){function e(t,r){t instanceof e&&(r=t,t={}),t=Object.assign({},ng,t),r&&(this._parent=r),this._createTime=pl(),this._timeMark=[{globalTime:this.globalTime,localTime:-t.originTime,entropy:-t.originTime,playbackRate:t.playbackRate,globalEntropy:0}],this._parent&&(this._timeMark[0].globalEntropy=this._parent.entropy),this._playbackRate=t.playbackRate}return Object.defineProperty(e.prototype,"globalTime",{get:function(){return this.parent?this.parent.currentTime:pl()-this._createTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastTimeMark",{get:function(){return this._timeMark[this._timeMark.length-1]},enumerable:!1,configurable:!0}),e.prototype.markTime=function(t){var r=t===void 0?{}:t,n=r.time,i=n===void 0?this.currentTime:n,a=r.entropy,o=a===void 0?this.entropy:a,s=r.playbackRate,u=s===void 0?this.playbackRate:s,l={globalTime:this.globalTime,localTime:i,entropy:o,playbackRate:u,globalEntropy:this.globalEntropy};this._timeMark.push(l)},Object.defineProperty(e.prototype,"currentTime",{get:function(){var t=this.lastTimeMark,r=t.localTime,n=t.globalTime;return r+(this.globalTime-n)*this.playbackRate},set:function(t){this.markTime({time:t})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalEntropy",{get:function(){return this._parent?this._parent.entropy:this.globalTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entropy",{get:function(){var t=this.lastTimeMark,r=t.entropy,n=t.globalEntropy;return r+Math.abs((this.globalEntropy-n)*this.playbackRate)},set:function(t){if(this.entropy>t){var r=this.seekTimeMark(t);this._timeMark.length=r+1}this.markTime({entropy:t})},enumerable:!1,configurable:!0}),e.prototype.fork=function(t){return new e(t,this)},e.prototype.seekGlobalTime=function(t){var r=this.seekTimeMark(t),n=this._timeMark[r],i=n.entropy,a=n.playbackRate,o=n.globalTime;return o+(t-i)/Math.abs(a)},e.prototype.seekLocalTime=function(t){var r=this.seekTimeMark(t),n=this._timeMark[r],i=n.localTime,a=n.entropy,o=n.playbackRate;return o>0?i+(t-a):i-(t-a)},e.prototype.seekTimeMark=function(t){var r=this._timeMark,n=0,i=r.length-1;if(t<=r[n].entropy)return n;if(t>=r[i].entropy)return i;for(var a=Math.floor((n+i)/2);a>n&&a<i;){if(t===r[a].entropy)return a;t<r[a].entropy?i=a:t>r[a].entropy&&(n=a),a=Math.floor((n+i)/2)}return n},Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){t!==this.playbackRate&&(this.markTime({playbackRate:t}),this._playbackRate=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){if(this.playbackRate===0)return!0;for(var t=this.parent;t;){if(t.playbackRate===0)return!0;t=t.parent}return!1},enumerable:!1,configurable:!0}),e}(),ag=ig,og={autoStart:!0,frameRate:60},sg=function(){function e(t){var r=this;t=Object.assign({},og,t),this._frameCount=0,this._frameDuration=1e3/t.frameRate,this.autoStart=t.autoStart,this.frameRate=t.frameRate,this.timeline=new ag({originTime:0,playbackRate:1}),this._lastFrameTime=this.timeline.currentTime,this._tickers=new Set,this._requestId=null,this._ticker=function(){r._started&&(r._requestId=requestAnimationFrame(r._ticker),r.update())},this.autoStart&&this.start()}return e.prototype.update=function(){var t,r,n=this.timeline.currentTime,i=n-this._lastFrameTime;if(i>=this._frameDuration){var a=n-i%this._frameDuration,o=a-this._lastFrameTime;this._lastFrameTime=a;var s={deltaTime:o,time:a,currentTime:a,frameCount:++this._frameCount,fps:Math.round(1e3/o)};try{for(var u=ie(this._tickers),l=u.next();!l.done;l=u.next()){var h=l.value;typeof h=="function"&&h(s)}}catch(f){t={error:f}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}}},e.prototype.add=function(t){this._tickers.add(t)},e.prototype.remove=function(t){this._tickers.delete(t)},e.prototype.start=function(){this._started||(this._started=!0,this.timeline.playbackRate=1,this._requestId=requestAnimationFrame(this._ticker))},e.prototype.pause=function(){this._started=!1,this.timeline.playbackRate=0},e.prototype.setPlaybackRate=function(t){this.timeline.playbackRate=t},e}(),ug=sg,lg=function(e){Vt(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.gameObjects=[],i.scene=i,i}return t.prototype.addGameObject=function(r){this.gameObjects.push(r),r.transform&&(r.transform.inScene=!0)},t.prototype.removeGameObject=function(r){var n=this.gameObjects.indexOf(r);n!==-1&&(r.transform&&(r.transform.inScene=!1),this.gameObjects.splice(n,1))},t.prototype.destroy=function(){this.scene=null,e.prototype.destroy.call(this),this.gameObjects=null,this.canvas=null},t}(Q_),hg=lg,Rt;(function(e){e.SINGLE="SINGLE",e.MULTI_CANVAS="MULTI_CANVAS"})(Rt||(Rt={}));var vl=function(e){if(!(!(e instanceof Er)&&!(e instanceof qt))&&!e.started){e.started=!0;try{e.start&&e.start()}catch(t){e instanceof qt?console.error(e.constructor.componentName+" start error",t):console.error(e.constructor.systemName+" start error",t)}}},fg=function(e){var t,r,n,i=((n=e==null?void 0:e.scene)===null||n===void 0?void 0:n.gameObjects)||[],a=e==null?void 0:e.multiScenes.map(function(h){var f=h.gameObjects;return f}),o=[];try{for(var s=ie(a),u=s.next();!u.done;u=s.next()){var l=u.value;o=In(o,l)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return In(i,o)},cg=function(e,t){var r,n,i,a,o,s,u,l;t===void 0&&(t=[]);try{for(var h=ie(t),f=h.next();!f.done;f=h.next()){var d=f.value;try{for(var p=(i=void 0,ie(d.components)),c=p.next();!c.done;c=p.next()){var _=c.value;try{vl(_),_.update&&_.update(e)}catch(x){console.error("gameObject: "+d.name+" "+_.name+" update error",x)}}}catch(x){i={error:x}}finally{try{c&&!c.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}try{for(var v=ie(t),g=v.next();!g.done;g=v.next()){var d=g.value;try{for(var m=(u=void 0,ie(d.components)),y=m.next();!y.done;y=m.next()){var _=y.value;try{_.lateUpdate&&_.lateUpdate(e)}catch(E){console.error("gameObject: "+d.name+" "+_.name+" lateUpdate error",E)}}}catch(T){u={error:T}}finally{try{y&&!y.done&&(l=m.return)&&l.call(m)}finally{if(u)throw u.error}}}}catch(x){o={error:x}}finally{try{g&&!g.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}},dg=function(e){var t,r,n,i;try{for(var a=ie(e),o=a.next();!o.done;o=a.next()){var s=o.value;try{for(var u=(n=void 0,ie(s.components)),l=u.next();!l.done;l=u.next()){var h=l.value;try{h.onResume&&h.onResume()}catch(f){console.error("gameObject: "+s.name+", "+h.name+", onResume error",f)}}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},pg=function(e){var t,r,n,i;try{for(var a=ie(e),o=a.next();!o.done;o=a.next()){var s=o.value;try{for(var u=(n=void 0,ie(s.components)),l=u.next();!l.done;l=u.next()){var h=l.value;try{h.onPause&&h.onPause()}catch(f){console.error("gameObject: "+s.name+", "+h.name+", onResume error",f)}}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},vg=function(e){Vt(t,e);function t(r){var n,i,a=r===void 0?{}:r,o=a.systems,s=a.frameRate,u=s===void 0?60:s,l=a.autoStart,h=l===void 0?!0:l,f=a.needScene,d=f===void 0?!0:f,p=e.call(this)||this;if(p.playing=!1,p.started=!1,p.multiScenes=[],p.systems=[],window.__EVA_INSPECTOR_ENV__&&(window.__EVA_GAME_INSTANCE__=p),p.ticker=new ug({autoStart:!1,frameRate:u}),p.initTicker(),o&&o.length)try{for(var c=ie(o),_=c.next();!_.done;_=c.next()){var v=_.value;p.addSystem(v)}}catch(g){n={error:g}}finally{try{_&&!_.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return d&&p.loadScene(new hg("scene")),h&&p.start(),p}return Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},set:function(r){this._scene=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameObjects",{get:function(){return fg(this)},enumerable:!1,configurable:!0}),t.prototype.addSystem=function(r,n){var i;if(r instanceof Function)i=new r(n);else if(r instanceof Er)i=r;else{console.warn("can only add System");return}var a=this.systems.find(function(o){return o.constructor===i.constructor});if(a){console.warn(i.constructor.systemName+" System has been added");return}i.game=this,i.init&&i.init(i.__systemDefaultParams),Y_(i,i.constructor),X_(i.constructor);try{i.awake&&i.awake()}catch(o){console.error(i.constructor.systemName+" awake error",o)}return this.systems.push(i),i},t.prototype.removeSystem=function(r){if(!!r){var n=-1;typeof r=="string"?n=this.systems.findIndex(function(i){return i.name===r}):r instanceof Function?n=this.systems.findIndex(function(i){return i.constructor===r}):r instanceof Er&&(n=this.systems.findIndex(function(i){return i===r})),n>-1&&(this.systems[n].destroy&&this.systems[n].destroy(),this.systems.splice(n,1))}},t.prototype.getSystem=function(r){return this.systems.find(function(n){return typeof r=="string"?n.name===r:n instanceof r})},t.prototype.pause=function(){!this.playing||(this.playing=!1,this.ticker.pause(),this.triggerPause())},t.prototype.start=function(){this.playing||(this.playing=!0,this.started=!0,this.ticker.start())},t.prototype.resume=function(){this.playing||(this.playing=!0,this.ticker.start(),this.triggerResume())},t.prototype.initTicker=function(){var r=this;this.ticker.add(function(n){var i,a,o,s;r.scene&&cg(n,r.gameObjects);try{for(var u=ie(r.systems),l=u.next();!l.done;l=u.next()){var h=l.value;try{vl(h),h.update&&h.update(n)}catch(p){console.error(h.constructor.systemName+" update error",p)}}}catch(p){i={error:p}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}try{for(var f=ie(r.systems),d=f.next();!d.done;d=f.next()){var h=d.value;try{h.lateUpdate&&h.lateUpdate(n)}catch(c){console.error(h.constructor.systemName+" lateUpdate error",c)}}}catch(p){o={error:p}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}})},t.prototype.triggerResume=function(){var r,n;dg(this.gameObjects);try{for(var i=ie(this.systems),a=i.next();!a.done;a=i.next()){var o=a.value;try{o.onResume&&o.onResume()}catch(s){console.error(o.constructor.systemName+", onResume error",s)}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.triggerPause=function(){var r,n;pg(this.gameObjects);try{for(var i=ie(this.systems),a=i.next();!a.done;a=i.next()){var o=a.value;try{o.onPause&&o.onPause()}catch(s){console.error(o.constructor.systemName+", onPause error",s)}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.destroySystems=function(){var r,n;try{for(var i=ie(In(this.systems)),a=i.next();!a.done;a=i.next()){var o=a.value;this.removeSystem(o)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.systems.length=0},t.prototype.destroy=function(){this.removeAllListeners(),this.pause(),this.scene.destroy(),this.destroySystems(),this.ticker=null,this.scene=null,this.canvas=null,this.multiScenes=null},t.prototype.loadScene=function(r){var n=r.scene,i=r.mode,a=i===void 0?Rt.SINGLE:i,o=r.params,s=o===void 0?{}:o;if(!!n){switch(a){case Rt.SINGLE:this.scene=n;break;case Rt.MULTI_CANVAS:this.multiScenes.push(n);break}this.emit("sceneChanged",{scene:n,mode:a,params:s})}},t}(bn),eN=vg;function _g(e,t){e.constructor.IDEProps||(e.constructor.IDEProps=[]),e.constructor.IDEProps.push(t)}function gg(e){return e===void 0&&(e={}),function(t){if(!t.observerInfo){for(var r in e)for(var n in e[r]){typeof e[r][n]=="string"&&(e[r][n]=[e[r][n]]);var i=void 0;Array.isArray(e[r][n])&&(i={prop:e[r][n],deep:!1},e[r][n]=i),i=e[r][n],typeof i.prop=="string"&&(i.prop=[i.prop])}t.observerInfo=e}}}var yg=function(e){Vt(t,e);function t(r){var n=r.resource,i=r.resourceTotal,a=e.call(this)||this;return a.progress=0,a.resourceTotal=0,a.resourceLoadedCount=0,a.resource=n,a.resourceTotal=i,i===0&&a.resource.emit(tt.COMPLETE,a),a}return t.prototype.onStart=function(){this.resource.emit(tt.START,this)},t.prototype.onProgress=function(r){this.resourceLoadedCount++,this.progress=Math.floor(this.resourceLoadedCount/this.resourceTotal*100)/100,r.success?this.resource.emit(tt.LOADED,this,r):this.resource.emit(tt.ERROR,this,r),this.resource.emit(tt.PROGRESS,this,r),this.resourceLoadedCount===this.resourceTotal&&this.resource.emit(tt.COMPLETE,this)},t}(bn),mg=yg,_l={AbstractLoadStrategy:Cn,AudioLoadStrategy:An,ImageLoadStrategy:ve,XhrResponseType:X,MediaElementLoadStrategy:ya,VideoLoadStrategy:Tr,XhrLoadStrategy:be,Loader:hl,Resource:ll,ResourceType:xe,ResourceState:Ve},tt;(function(e){e.START="start",e.PROGRESS="progress",e.LOADED="loaded",e.COMPLETE="complete",e.ERROR="error"})(tt||(tt={}));var yl;(function(e){e.IMAGE="IMAGE",e.SPRITE="SPRITE",e.SPRITE_ANIMATION="SPRITE_ANIMATION",e.DRAGONBONE="DRAGONBONE",e.SPINE="SPINE",e.AUDIO="AUDIO",e.VIDEO="VIDEO"})(yl||(yl={}));be.setExtensionXhrType("json",X.Json);be.setExtensionXhrType("tex",X.Json);be.setExtensionXhrType("ske",X.Json);be.setExtensionXhrType("mp3",X.Buffer);be.setExtensionXhrType("wav",X.Buffer);be.setExtensionXhrType("aac",X.Buffer);be.setExtensionXhrType("ogg",X.Buffer);var ml={png:ve,jpg:ve,jpeg:ve,webp:ve,json:be,tex:be,ske:be,audio:be,video:Tr},xg=function(e){Vt(t,e);function t(r){var n=e.call(this)||this;return n.timeout=6e3,n.preProcessResourceHandlers=[],n.resourcesMap={},n.makeInstanceFunctions={},n.destroyInstanceFunctions={},n.promiseMap={},n.loaders=[],r&&typeof r.timeout=="number"&&(n.timeout=r.timeout),n}return t.prototype.loadConfig=function(r){this.addResource(r),this.preload()},t.prototype.loadSingle=function(r){return this.addResource([r]),this.getResource(r.name)},t.prototype.addResource=function(r){var n,i;if(!r||r.length<1){console.warn("no resources");return}try{for(var a=ie(r),o=a.next();!o.done;o=a.next()){var s=o.value;if(this.resourcesMap[s.name]){console.warn(s.name+" was already added");continue}this.resourcesMap[s.name]=s,this.resourcesMap[s.name].data={}}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.addPreProcessResourceHandler=function(r){this.preProcessResourceHandlers.push(r)},t.prototype.removePreProcessResourceHandler=function(r){this.preProcessResourceHandlers.splice(this.preProcessResourceHandlers.indexOf(r),1)},t.prototype.preload=function(){var r=[];for(var n in this.resourcesMap){var i=this.resourcesMap[n];i.preload&&!i.complete&&r.push(i.name)}this.progress=new mg({resource:this,resourceTotal:r.length}),this.loadResource({names:r,preload:!0})},t.prototype.getResource=function(r){return St(this,void 0,void 0,function(){return wt(this,function(n){return this.loadResource({names:[r]}),[2,this.promiseMap[r]||Promise.resolve({})]})})},t.prototype.instance=function(r){return St(this,void 0,void 0,function(){var n,i;return wt(this,function(a){switch(a.label){case 0:return n=this.resourcesMap[r],i=this.makeInstanceFunctions[n.type],i?[4,this.makeInstanceFunctions[n.type](n)]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return[2,i]}})})},t.prototype.destroy=function(r){return St(this,void 0,void 0,function(){return wt(this,function(n){switch(n.label){case 0:return[4,this._destroy(r)];case 1:return n.sent(),[2]}})})},t.prototype._destroy=function(r,n){return n===void 0&&(n=!1),St(this,void 0,void 0,function(){var i,a;return wt(this,function(o){switch(o.label){case 0:if(i=this.resourcesMap[r],!i)return[2];if(n)return[3,5];o.label=1;case 1:return o.trys.push([1,4,,5]),this.destroyInstanceFunctions[i.type]?[4,this.destroyInstanceFunctions[i.type](i)]:[3,3];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:return a=o.sent(),console.warn("destroy resource "+i.name+" error with '"+a.message+"'"),[3,5];case 5:return delete this.promiseMap[r],i.data={},i.complete=!1,i.instance=void 0,[2]}})})},t.prototype.registerInstance=function(r,n){this.makeInstanceFunctions[r]=n},t.prototype.registerDestroy=function(r,n){this.destroyInstanceFunctions[r]=n},t.prototype.loadResource=function(r){var n=this,i=r.names,a=i===void 0?[]:i,o=r.preload,s=o===void 0?!1:o,u=a.filter(function(f){return!n.promiseMap[f]&&n.resourcesMap[f]});if(!!u.length){var l={},h=this.getLoader(s);u.forEach(function(f){var d,p;n.promiseMap[f]=new Promise(function(x){return l[f]=x});var c=n.resourcesMap[f];try{for(var _=ie(n.preProcessResourceHandlers),v=_.next();!v.done;v=_.next()){var g=v.value;g(c)}}catch(x){d={error:x}}finally{try{v&&!v.done&&(p=_.return)&&p.call(_)}finally{if(d)throw d.error}}for(var m in c.src){var y=c.src[m].type;y==="data"?(c.data[m]=c.src[m].data,n.doComplete(f,l[f],s)):h.add({url:c.src[m].url,name:c.name+"_"+m,strategy:ml[y],metadata:{key:m,name:c.name,resolves:l}})}}),h.load()}},t.prototype.doComplete=function(r,n,i){return i===void 0&&(i=!1),St(this,void 0,void 0,function(){var a,o,s,u;return wt(this,function(l){switch(l.label){case 0:if(a=this.resourcesMap[r],o={name:r,resource:this.resourcesMap[r],success:!0},!this.checkAllLoaded(r))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),s=a,[4,this.instance(r)];case 2:return s.instance=l.sent(),a.complete=!0,i&&this.progress.onProgress(o),n(a),[3,4];case 3:return u=l.sent(),console.error(u),a.complete=!1,i&&(o.errMsg=u.message,o.success=!1,this.progress.onProgress(o)),n({}),[3,4];case 4:return[2]}})})},t.prototype.checkAllLoaded=function(r){var n=this.resourcesMap[r];return Array.from(Object.keys(n.src)).every(function(i){return n.data[i]})},t.prototype.getLoader=function(r){var n=this;r===void 0&&(r=!1);var i=this.loaders.find(function(a){var o=a.loading;return!o});return i||(i=new hl,this.loaders.push(i)),r&&i.onStart.once(function(){n.progress.onStart()}),i.onLoad.add(function(a,o){n.onLoad({preload:r,resource:o})}),i.onError.add(function(a,o,s){n.onError({errMsg:a,resource:s,preload:r})}),i.onComplete.once(function(){i.onLoad.detachAll(),i.onError.detachAll(),i.reset()}),i},t.prototype.onLoad=function(r){var n=r.preload,i=n===void 0?!1:n,a=r.resource;return St(this,void 0,void 0,function(){var o,s,u,l,h,f;return wt(this,function(d){return o=a.metadata,s=o.key,u=o.name,l=o.resolves,h=a.data,f=this.resourcesMap[u],f.data[s]=h,this.doComplete(u,l[u],i),[2]})})},t.prototype.onError=function(r){var n=r.errMsg,i=r.preload,a=i===void 0?!1:i,o=r.resource;return St(this,void 0,void 0,function(){var s,u,l,h;return wt(this,function(f){return s=o.metadata,u=s.name,l=s.resolves,this._destroy(u,!0),l[u]({}),a&&(h={name:u,resource:this.resourcesMap[u],success:!1,errMsg:n},this.progress.onProgress(h)),[2]})})},t}(bn),xl=new xg,Tl={IDEProp:_g,componentObserver:gg},Tg="1.2.1";console.log("Eva.js version: "+Tg);var K={},Eg={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var El=Object.getOwnPropertySymbols,bg=Object.prototype.hasOwnProperty,Sg=Object.prototype.propertyIsEnumerable;function wg(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Pg(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(a){i[a]=a}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Rg=Pg()?Object.assign:function(e,t){for(var r,n=wg(e),i,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var o in r)bg.call(r,o)&&(n[o]=r[o]);if(El){i=El(r);for(var s=0;s<i.length;s++)Sg.call(r,i[s])&&(n[i[s]]=r[i[s]])}}return n},Mg=Rg,Og=Cg(Mg);function Cg(e){return e&&e.__esModule?e:{default:e}}Object.assign||(Object.assign=Og.default);var Ag=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(ne.performance&&ne.performance.now)){var Dg=Date.now();ne.performance||(ne.performance={}),ne.performance.now=function(){return Date.now()-Dg}}var Ea=Date.now(),bl=["ms","moz","webkit","o"];for(var ba=0;ba<bl.length&&!ne.requestAnimationFrame;++ba){var Sa=bl[ba];ne.requestAnimationFrame=ne[Sa+"RequestAnimationFrame"],ne.cancelAnimationFrame=ne[Sa+"CancelAnimationFrame"]||ne[Sa+"CancelRequestAnimationFrame"]}ne.requestAnimationFrame||(ne.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var t=Date.now(),r=Ag+Ea-t;return r<0&&(r=0),Ea=t,setTimeout(function(){Ea=Date.now(),e(performance.now())},r)});ne.cancelAnimationFrame||(ne.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});window.ArrayBuffer||(window.ArrayBuffer=Array);window.Float32Array||(window.Float32Array=Array);window.Uint32Array||(window.Uint32Array=Array);window.Uint16Array||(window.Uint16Array=Array);var J={},k={};k.__esModule=!0;k.VERSION="4.8.9";k.PI_2=Math.PI*2;k.RAD_TO_DEG=180/Math.PI;k.DEG_TO_RAD=Math.PI/180;k.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2};k.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19};k.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};k.SCALE_MODES={LINEAR:0,NEAREST:1};k.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2};k.GC_MODES={AUTO:0,MANUAL:1};k.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i;k.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;k.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;k.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4};k.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"};k.TRANSFORM_MODE={STATIC:0,DYNAMIC:1};k.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1};k.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50};var ce={},br={};br.__esModule=!0;function Ig(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Lg=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ig(this,e),this.x=t,this.y=r}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(r){this.set(r.x,r.y)},e.prototype.equals=function(r){return r.x===this.x&&r.y===this.y},e.prototype.set=function(r,n){this.x=r||0,this.y=n||(n!==0?this.x:0)},e}();br.default=Lg;var Bn={};Bn.__esModule=!0;var $g=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Bg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Fg=function(){function e(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;Bg(this,e),this._x=n,this._y=i,this.cb=t,this.scope=r}return e.prototype.clone=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=r||this.cb,a=n||this.scope;return new e(i,a,this._x,this._y)},e.prototype.set=function(r,n){var i=r||0,a=n||(n!==0?i:0);(this._x!==i||this._y!==a)&&(this._x=i,this._y=a,this.cb.call(this.scope))},e.prototype.copy=function(r){(this._x!==r.x||this._y!==r.y)&&(this._x=r.x,this._y=r.y,this.cb.call(this.scope))},e.prototype.equals=function(r){return r.x===this._x&&r.y===this._y},$g(e,[{key:"x",get:function(){return this._x},set:function(r){this._x!==r&&(this._x=r,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(r){this._y!==r&&(this._y=r,this.cb.call(this.scope))}}]),e}();Bn.default=Fg;var Sr={};Sr.__esModule=!0;var Gg=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),kg=br,Sl=Ng(kg),Ug=k;function Ng(e){return e&&e.__esModule?e:{default:e}}function Hg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Xg=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;Hg(this,e),this.a=t,this.b=r,this.c=n,this.d=i,this.tx=a,this.ty=o,this.array=null}return e.prototype.fromArray=function(r){this.a=r[0],this.b=r[1],this.c=r[3],this.d=r[4],this.tx=r[2],this.ty=r[5]},e.prototype.set=function(r,n,i,a,o,s){return this.a=r,this.b=n,this.c=i,this.d=a,this.tx=o,this.ty=s,this},e.prototype.toArray=function(r,n){this.array||(this.array=new Float32Array(9));var i=n||this.array;return r?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},e.prototype.apply=function(r,n){n=n||new Sl.default;var i=r.x,a=r.y;return n.x=this.a*i+this.c*a+this.tx,n.y=this.b*i+this.d*a+this.ty,n},e.prototype.applyInverse=function(r,n){n=n||new Sl.default;var i=1/(this.a*this.d+this.c*-this.b),a=r.x,o=r.y;return n.x=this.d*i*a+-this.c*i*o+(this.ty*this.c-this.tx*this.d)*i,n.y=this.a*i*o+-this.b*i*a+(-this.ty*this.a+this.tx*this.b)*i,n},e.prototype.translate=function(r,n){return this.tx+=r,this.ty+=n,this},e.prototype.scale=function(r,n){return this.a*=r,this.d*=n,this.c*=r,this.b*=n,this.tx*=r,this.ty*=n,this},e.prototype.rotate=function(r){var n=Math.cos(r),i=Math.sin(r),a=this.a,o=this.c,s=this.tx;return this.a=a*n-this.b*i,this.b=a*i+this.b*n,this.c=o*n-this.d*i,this.d=o*i+this.d*n,this.tx=s*n-this.ty*i,this.ty=s*i+this.ty*n,this},e.prototype.append=function(r){var n=this.a,i=this.b,a=this.c,o=this.d;return this.a=r.a*n+r.b*a,this.b=r.a*i+r.b*o,this.c=r.c*n+r.d*a,this.d=r.c*i+r.d*o,this.tx=r.tx*n+r.ty*a+this.tx,this.ty=r.tx*i+r.ty*o+this.ty,this},e.prototype.setTransform=function(r,n,i,a,o,s,u,l,h){return this.a=Math.cos(u+h)*o,this.b=Math.sin(u+h)*o,this.c=-Math.sin(u-l)*s,this.d=Math.cos(u-l)*s,this.tx=r-(i*this.a+a*this.c),this.ty=n-(i*this.b+a*this.d),this},e.prototype.prepend=function(r){var n=this.tx;if(r.a!==1||r.b!==0||r.c!==0||r.d!==1){var i=this.a,a=this.c;this.a=i*r.a+this.b*r.c,this.b=i*r.b+this.b*r.d,this.c=a*r.a+this.d*r.c,this.d=a*r.b+this.d*r.d}return this.tx=n*r.a+this.ty*r.c+r.tx,this.ty=n*r.b+this.ty*r.d+r.ty,this},e.prototype.decompose=function(r){var n=this.a,i=this.b,a=this.c,o=this.d,s=-Math.atan2(-a,o),u=Math.atan2(i,n),l=Math.abs(s+u);return l<1e-5||Math.abs(Ug.PI_2-l)<1e-5?(r.rotation=u,r.skew.x=r.skew.y=0):(r.rotation=0,r.skew.x=s,r.skew.y=u),r.scale.x=Math.sqrt(n*n+i*i),r.scale.y=Math.sqrt(a*a+o*o),r.position.x=this.tx,r.position.y=this.ty,r},e.prototype.invert=function(){var r=this.a,n=this.b,i=this.c,a=this.d,o=this.tx,s=r*a-n*i;return this.a=a/s,this.b=-n/s,this.c=-i/s,this.d=r/s,this.tx=(i*this.ty-a*o)/s,this.ty=-(r*this.ty-n*o)/s,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var r=new e;return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},e.prototype.copy=function(r){return r.a=this.a,r.b=this.b,r.c=this.c,r.d=this.d,r.tx=this.tx,r.ty=this.ty,r},Gg(e,null,[{key:"IDENTITY",get:function(){return new e}},{key:"TEMP_MATRIX",get:function(){return new e}}]),e}();Sr.default=Xg;var Fn={};Fn.__esModule=!0;var Wg=Sr,Vg=qg(Wg);function qg(e){return e&&e.__esModule?e:{default:e}}var Mt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ot=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ct=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],At=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],wl=[],wa=[];function Gn(e){return e<0?-1:e>0?1:0}function Yg(){for(var e=0;e<16;e++){var t=[];wa.push(t);for(var r=0;r<16;r++)for(var n=Gn(Mt[e]*Mt[r]+Ct[e]*Ot[r]),i=Gn(Ot[e]*Mt[r]+At[e]*Ot[r]),a=Gn(Mt[e]*Ct[r]+Ct[e]*At[r]),o=Gn(Ot[e]*Ct[r]+At[e]*At[r]),s=0;s<16;s++)if(Mt[s]===n&&Ot[s]===i&&Ct[s]===a&&At[s]===o){t.push(s);break}}for(var u=0;u<16;u++){var l=new Vg.default;l.set(Mt[u],Ot[u],Ct[u],At[u],0,0),wl.push(l)}}Yg();var De={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return Mt[t]},uY:function(t){return Ot[t]},vX:function(t){return Ct[t]},vY:function(t){return At[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,r){return wa[t][r]},sub:function(t,r){return wa[t][De.inv(r)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)==2},byDirection:function(t,r){return Math.abs(t)*2<=Math.abs(r)?r>=0?De.S:De.N:Math.abs(r)*2<=Math.abs(t)?t>0?De.E:De.W:r>0?t>0?De.SE:De.SW:t>0?De.NE:De.NW},matrixAppendRotationInv:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=wl[De.inv(r)];a.tx=n,a.ty=i,t.append(a)}};Fn.default=De;var Pa={},wr={};wr.__esModule=!0;var zg=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Kg=k;function Zg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Jg=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;Zg(this,e),this.x=Number(t),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=Kg.SHAPES.RECT}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(r){return this.x=r.x,this.y=r.y,this.width=r.width,this.height=r.height,this},e.prototype.contains=function(r,n){return this.width<=0||this.height<=0?!1:r>=this.x&&r<this.x+this.width&&n>=this.y&&n<this.y+this.height},e.prototype.pad=function(r,n){r=r||0,n=n||(n!==0?r:0),this.x-=r,this.y-=n,this.width+=r*2,this.height+=n*2},e.prototype.fit=function(r){var n=Math.max(this.x,r.x),i=Math.min(this.x+this.width,r.x+r.width),a=Math.max(this.y,r.y),o=Math.min(this.y+this.height,r.y+r.height);this.x=n,this.width=Math.max(i-n,0),this.y=a,this.height=Math.max(o-a,0)},e.prototype.enlarge=function(r){var n=Math.min(this.x,r.x),i=Math.max(this.x+this.width,r.x+r.width),a=Math.min(this.y,r.y),o=Math.max(this.y+this.height,r.y+r.height);this.x=n,this.width=i-n,this.y=a,this.height=o-a},e.prototype.ceil=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.001,i=Math.ceil((this.x+this.width-n)*r)/r,a=Math.ceil((this.y+this.height-n)*r)/r;this.x=Math.floor((this.x+n)*r)/r,this.y=Math.floor((this.y+n)*r)/r,this.width=i-this.x,this.height=a-this.y},zg(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new e(0,0,0,0)}}]),e}();wr.default=Jg;Pa.__esModule=!0;var Qg=wr,jg=ty(Qg),ey=k;function ty(e){return e&&e.__esModule?e:{default:e}}function ry(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ny=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;ry(this,e),this.x=t,this.y=r,this.radius=n,this.type=ey.SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(r,n){if(this.radius<=0)return!1;var i=this.radius*this.radius,a=this.x-r,o=this.y-n;return a*=a,o*=o,a+o<=i},e.prototype.getBounds=function(){return new jg.default(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e}();Pa.default=ny;var Ra={};Ra.__esModule=!0;var iy=wr,ay=sy(iy),oy=k;function sy(e){return e&&e.__esModule?e:{default:e}}function uy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ly=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;uy(this,e),this.x=t,this.y=r,this.width=n,this.height=i,this.type=oy.SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(r,n){if(this.width<=0||this.height<=0)return!1;var i=(r-this.x)/this.width,a=(n-this.y)/this.height;return i*=i,a*=a,i+a<=1},e.prototype.getBounds=function(){return new ay.default(this.x-this.width,this.y-this.height,this.width,this.height)},e}();Ra.default=ly;var Ma={};Ma.__esModule=!0;var hy=br,fy=dy(hy),cy=k;function dy(e){return e&&e.__esModule?e:{default:e}}function py(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var vy=function(){function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(py(this,e),Array.isArray(r[0])&&(r=r[0]),r[0]instanceof fy.default){for(var i=[],a=0,o=r.length;a<o;a++)i.push(r[a].x,r[a].y);r=i}this.closed=!0,this.points=r,this.type=cy.SHAPES.POLY}return e.prototype.clone=function(){return new e(this.points.slice())},e.prototype.close=function(){var r=this.points;(r[0]!==r[r.length-2]||r[1]!==r[r.length-1])&&r.push(r[0],r[1])},e.prototype.contains=function(r,n){for(var i=!1,a=this.points.length/2,o=0,s=a-1;o<a;s=o++){var u=this.points[o*2],l=this.points[o*2+1],h=this.points[s*2],f=this.points[s*2+1],d=l>n!=f>n&&r<(h-u)*((n-l)/(f-l))+u;d&&(i=!i)}return i},e}();Ma.default=vy;var Oa={};Oa.__esModule=!0;var _y=k;function gy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var yy=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:20;gy(this,e),this.x=t,this.y=r,this.width=n,this.height=i,this.radius=a,this.type=_y.SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(r,n){if(this.width<=0||this.height<=0)return!1;if(r>=this.x&&r<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){if(n>=this.y+this.radius&&n<=this.y+this.height-this.radius||r>=this.x+this.radius&&r<=this.x+this.width-this.radius)return!0;var i=r-(this.x+this.radius),a=n-(this.y+this.radius),o=this.radius*this.radius;if(i*i+a*a<=o||(i=r-(this.x+this.width-this.radius),i*i+a*a<=o)||(a=n-(this.y+this.height-this.radius),i*i+a*a<=o)||(i=r-(this.x+this.radius),i*i+a*a<=o))return!0}return!1},e}();Oa.default=yy;(function(e){e.__esModule=!0;var t=br;Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return h(t).default}});var r=Bn;Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return h(r).default}});var n=Sr;Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return h(n).default}});var i=Fn;Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return h(i).default}});var a=Pa;Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return h(a).default}});var o=Ra;Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return h(o).default}});var s=Ma;Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return h(s).default}});var u=wr;Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return h(u).default}});var l=Oa;Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return h(l).default}});function h(f){return f&&f.__esModule?f:{default:f}}})(ce);var Se={exports:{}},my=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r},xy=my,Ty=function(e,t,r){var n;if(r){var i=r.tempAttribState,a=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<t.length;n++)i[t[n].attribute.location]=!0;for(n=0;n<a.length;n++)a[n]!==i[n]&&(a[n]=i[n],r.attribState[n]?e.enableVertexAttribArray(n):e.disableVertexAttribArray(n))}else for(n=0;n<t.length;n++){var o=t[n];e.enableVertexAttribArray(o.attribute.location)}},Pl=Ty,Ey=new ArrayBuffer(0),Ge=function(e,t,r,n){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=n||e.STATIC_DRAW,this.data=Ey,r&&this.upload(r),this._updateID=0};Ge.prototype.upload=function(e,t,r){r||this.bind();var n=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?n.bufferSubData(this.type,t,e):n.bufferData(this.type,e,this.drawType),this.data=e};Ge.prototype.bind=function(){var e=this.gl;e.bindBuffer(this.type,this.buffer)};Ge.createVertexBuffer=function(e,t,r){return new Ge(e,e.ARRAY_BUFFER,t,r)};Ge.createIndexBuffer=function(e,t,r){return new Ge(e,e.ELEMENT_ARRAY_BUFFER,t,r)};Ge.create=function(e,t,r,n){return new Ge(e,t,r,n)};Ge.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)};var by=Ge,de=function(e,t,r,n,i){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=r||-1,this.format=n||e.RGBA,this.type=i||e.UNSIGNED_BYTE};de.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=e.videoWidth||e.width,n=e.videoHeight||e.height;n!==this.height||r!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=r,this.height=n};var Rl=!1;de.prototype.uploadData=function(e,t,r){this.bind();var n=this.gl;if(e instanceof Float32Array){if(!Rl){var i=n.getExtension("OES_texture_float");if(i)Rl=!0;else throw new Error("floating point textures not available")}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,t,r,0,this.format,this.type,e||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,this.format,this.type,e||null),this.width=t,this.height=r};de.prototype.bind=function(e){var t=this.gl;e!==void 0&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)};de.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)};de.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)};de.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)};de.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)};de.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)};de.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)};de.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)};de.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)};de.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)};de.prototype.destroy=function(){var e=this.gl;e.deleteTexture(this.texture)};de.fromSource=function(e,t,r){var n=new de(e);return n.premultiplyAlpha=r||!1,n.upload(t),n};de.fromData=function(e,t,r,n){var i=new de(e);return i.uploadData(t,r,n),i};var Ml=de,Ca=Ml,Me=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};Me.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new Ca(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)};Me.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}};Me.prototype.clear=function(e,t,r,n){this.bind();var i=this.gl;i.clearColor(e,t,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)};Me.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)};Me.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)};Me.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))};Me.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null};Me.createRGBA=function(e,t,r,n){var i=Ca.fromData(e,null,t,r);i.enableNearestScaling(),i.enableWrapClamp();var a=new Me(e,t,r);return a.enableTexture(i),a.unbind(),a};Me.createFloat32=function(e,t,r,n){var i=new Ca.fromData(e,n,t,r);i.enableNearestScaling(),i.enableWrapClamp();var a=new Me(e,t,r);return a.enableTexture(i),a.unbind(),a};var Sy=Me,wy=function(e,t,r,n){var i=Ol(e,e.VERTEX_SHADER,t),a=Ol(e,e.FRAGMENT_SHADER,r),o=e.createProgram();if(e.attachShader(o,i),e.attachShader(o,a),n)for(var s in n)e.bindAttribLocation(o,n[s],s);return e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(o,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),e.getProgramInfoLog(o)!==""&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(o)),e.deleteProgram(o),o=null),e.deleteShader(i),e.deleteShader(a),o},Ol=function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.log(e.getShaderInfoLog(n)),null)},Cl=wy,Py=function(e,t){if(!kn){var r=Object.keys(Al);kn={};for(var n=0;n<r.length;++n){var i=r[n];kn[e[i]]=Al[i]}}return kn[t]},kn=null,Al={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"},Aa=Py,Ry=function(e){return My[e]},My={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1},Dl=Ry,Oy=Aa,Cy=Dl,Ay=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var a=e.getActiveAttrib(t,i),o=Oy(e,a.type);r[a.name]={type:o,size:Cy(o),location:e.getAttribLocation(t,a.name),pointer:Dy}}return r},Dy=function(e,t,r,n){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,r||0,n||0)},Il=Ay,Iy=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return Da(2*t);case"bvec3":return Da(3*t);case"bvec4":return Da(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},Da=function(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t},Ll=Iy,Ly=Aa,$y=Ll,By=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var a=e.getActiveUniform(t,i),o=a.name.replace(/\[.*?\]/,""),s=Ly(e,a.type);r[o]={type:s,size:a.size,location:e.getUniformLocation(t,o),value:$y(s,a.size)}}return r},$l=By,Fy=function(e,t){return e.substring(0,9)!=="precision"?"precision "+t+` float;
`+e:e},Bl=Fy,Gy=function(e,t){var r={data:{}};r.gl=e;for(var n=Object.keys(t),i=0;i<n.length;i++){var a=n[i],o=a.split("."),s=o[o.length-1],u=Xy(o,r),l=t[a];u.data[s]=l,u.gl=e,Object.defineProperty(u,s,{get:ky(s),set:Hy(s,l)})}return r},ky=function(e){return function(){return this.data[e].value}},Uy={float:function(t,r,n){t.uniform1f(r,n)},vec2:function(t,r,n){t.uniform2f(r,n[0],n[1])},vec3:function(t,r,n){t.uniform3f(r,n[0],n[1],n[2])},vec4:function(t,r,n){t.uniform4f(r,n[0],n[1],n[2],n[3])},int:function(t,r,n){t.uniform1i(r,n)},ivec2:function(t,r,n){t.uniform2i(r,n[0],n[1])},ivec3:function(t,r,n){t.uniform3i(r,n[0],n[1],n[2])},ivec4:function(t,r,n){t.uniform4i(r,n[0],n[1],n[2],n[3])},bool:function(t,r,n){t.uniform1i(r,n)},bvec2:function(t,r,n){t.uniform2i(r,n[0],n[1])},bvec3:function(t,r,n){t.uniform3i(r,n[0],n[1],n[2])},bvec4:function(t,r,n){t.uniform4i(r,n[0],n[1],n[2],n[3])},mat2:function(t,r,n){t.uniformMatrix2fv(r,!1,n)},mat3:function(t,r,n){t.uniformMatrix3fv(r,!1,n)},mat4:function(t,r,n){t.uniformMatrix4fv(r,!1,n)},sampler2D:function(t,r,n){t.uniform1i(r,n)}},Ny={float:function(t,r,n){t.uniform1fv(r,n)},vec2:function(t,r,n){t.uniform2fv(r,n)},vec3:function(t,r,n){t.uniform3fv(r,n)},vec4:function(t,r,n){t.uniform4fv(r,n)},int:function(t,r,n){t.uniform1iv(r,n)},ivec2:function(t,r,n){t.uniform2iv(r,n)},ivec3:function(t,r,n){t.uniform3iv(r,n)},ivec4:function(t,r,n){t.uniform4iv(r,n)},bool:function(t,r,n){t.uniform1iv(r,n)},bvec2:function(t,r,n){t.uniform2iv(r,n)},bvec3:function(t,r,n){t.uniform3iv(r,n)},bvec4:function(t,r,n){t.uniform4iv(r,n)},sampler2D:function(t,r,n){t.uniform1iv(r,n)}};function Hy(e,t){return function(r){this.data[e].value=r;var n=this.data[e].location;t.size===1?Uy[t.type](this.gl,n,r):Ny[t.type](this.gl,n,r)}}function Xy(e,t){for(var r=t,n=0;n<e.length-1;n++){var i=r[e[n]]||{data:{}};r[e[n]]=i,r=i}return r}var Fl=Gy,Wy=Cl,Vy=Il,qy=$l,Gl=Bl,Yy=Fl,Ia=function(e,t,r,n,i){this.gl=e,n&&(t=Gl(t,n),r=Gl(r,n)),this.program=Wy(e,t,r,i),this.attributes=Vy(e,this.program),this.uniformData=qy(e,this.program),this.uniforms=Yy(e,this.uniformData)};Ia.prototype.bind=function(){return this.gl.useProgram(this.program),this};Ia.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var e=this.gl;e.deleteProgram(this.program)};var zy=Ia,Ky=Pl;function Te(e,t){if(this.nativeVaoExtension=null,Te.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}Te.prototype.constructor=Te;var Zy=Te;Te.FORCE_NATIVE=!1;Te.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this};Te.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this};Te.prototype.activate=function(){for(var e=this.gl,t=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];t!==n.buffer&&(n.buffer.bind(),t=n.buffer),e.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||e.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return Ky(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this};Te.prototype.addAttribute=function(e,t,r,n,i,a){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:a||0}),this.dirty=!0,this};Te.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this};Te.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this};Te.prototype.draw=function(e,t,r){var n=this.gl;return this.indexBuffer?n.drawElements(e,t||this.indexBuffer.data.length,n.UNSIGNED_SHORT,(r||0)*2):n.drawArrays(e,r,t||this.getSize()),this};Te.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null};Te.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)};var Jy={compileProgram:Cl,defaultValue:Ll,extractAttributes:Il,extractUniforms:$l,generateUniformAccessObject:Fl,setPrecision:Bl,mapSize:Dl,mapType:Aa};(function(e){var t={createContext:xy,setVertexAttribArrays:Pl,GLBuffer:by,GLFramebuffer:Sy,GLShader:zy,GLTexture:Ml,VertexArrayObject:Zy,shader:Jy};e.exports&&(e.exports=t),typeof window!="undefined"&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=t)})(Se);var Pr={};Pr.__esModule=!0;var kl=ce;function Qy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var jy=function(){function e(){Qy(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(r){return this.minX>this.maxX||this.minY>this.maxY?kl.Rectangle.EMPTY:(r=r||new kl.Rectangle(0,0,1,1),r.x=this.minX,r.y=this.minY,r.width=this.maxX-this.minX,r.height=this.maxY-this.minY,r)},e.prototype.addPoint=function(r){this.minX=Math.min(this.minX,r.x),this.maxX=Math.max(this.maxX,r.x),this.minY=Math.min(this.minY,r.y),this.maxY=Math.max(this.maxY,r.y)},e.prototype.addQuad=function(r){var n=this.minX,i=this.minY,a=this.maxX,o=this.maxY,s=r[0],u=r[1];n=s<n?s:n,i=u<i?u:i,a=s>a?s:a,o=u>o?u:o,s=r[2],u=r[3],n=s<n?s:n,i=u<i?u:i,a=s>a?s:a,o=u>o?u:o,s=r[4],u=r[5],n=s<n?s:n,i=u<i?u:i,a=s>a?s:a,o=u>o?u:o,s=r[6],u=r[7],n=s<n?s:n,i=u<i?u:i,a=s>a?s:a,o=u>o?u:o,this.minX=n,this.minY=i,this.maxX=a,this.maxY=o},e.prototype.addFrame=function(r,n,i,a,o){var s=r.worldTransform,u=s.a,l=s.b,h=s.c,f=s.d,d=s.tx,p=s.ty,c=this.minX,_=this.minY,v=this.maxX,g=this.maxY,m=u*n+h*i+d,y=l*n+f*i+p;c=m<c?m:c,_=y<_?y:_,v=m>v?m:v,g=y>g?y:g,m=u*a+h*i+d,y=l*a+f*i+p,c=m<c?m:c,_=y<_?y:_,v=m>v?m:v,g=y>g?y:g,m=u*n+h*o+d,y=l*n+f*o+p,c=m<c?m:c,_=y<_?y:_,v=m>v?m:v,g=y>g?y:g,m=u*a+h*o+d,y=l*a+f*o+p,c=m<c?m:c,_=y<_?y:_,v=m>v?m:v,g=y>g?y:g,this.minX=c,this.minY=_,this.maxX=v,this.maxY=g},e.prototype.addVertices=function(r,n,i,a){for(var o=r.worldTransform,s=o.a,u=o.b,l=o.c,h=o.d,f=o.tx,d=o.ty,p=this.minX,c=this.minY,_=this.maxX,v=this.maxY,g=i;g<a;g+=2){var m=n[g],y=n[g+1],x=s*m+l*y+f,T=h*y+u*m+d;p=x<p?x:p,c=T<c?T:c,_=x>_?x:_,v=T>v?T:v}this.minX=p,this.minY=c,this.maxX=_,this.maxY=v},e.prototype.addBounds=function(r){var n=this.minX,i=this.minY,a=this.maxX,o=this.maxY;this.minX=r.minX<n?r.minX:n,this.minY=r.minY<i?r.minY:i,this.maxX=r.maxX>a?r.maxX:a,this.maxY=r.maxY>o?r.maxY:o},e.prototype.addBoundsMask=function(r,n){var i=r.minX>n.minX?r.minX:n.minX,a=r.minY>n.minY?r.minY:n.minY,o=r.maxX<n.maxX?r.maxX:n.maxX,s=r.maxY<n.maxY?r.maxY:n.maxY;if(i<=o&&a<=s){var u=this.minX,l=this.minY,h=this.maxX,f=this.maxY;this.minX=i<u?i:u,this.minY=a<l?a:l,this.maxX=o>h?o:h,this.maxY=s>f?s:f}},e.prototype.addBoundsArea=function(r,n){var i=r.minX>n.x?r.minX:n.x,a=r.minY>n.y?r.minY:n.y,o=r.maxX<n.x+n.width?r.maxX:n.x+n.width,s=r.maxY<n.y+n.height?r.maxY:n.y+n.height;if(i<=o&&a<=s){var u=this.minX,l=this.minY,h=this.maxX,f=this.maxY;this.minX=i<u?i:u,this.minY=a<l?a:l,this.maxX=o>h?o:h,this.maxY=s>f?s:f}},e}();Pr.default=jy;var Un={},rt={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(o,s,u){this.fn=o,this.context=s,this.once=u||!1}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var s=[],u,l;if(this._eventsCount===0)return s;for(l in u=this._events)t.call(u,l)&&s.push(r?l.slice(1):l);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(u)):s},a.prototype.listeners=function(s,u){var l=r?r+s:s,h=this._events[l];if(u)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(var f=0,d=h.length,p=new Array(d);f<d;f++)p[f]=h[f].fn;return p},a.prototype.emit=function(s,u,l,h,f,d){var p=r?r+s:s;if(!this._events[p])return!1;var c=this._events[p],_=arguments.length,v,g;if(c.fn){switch(c.once&&this.removeListener(s,c.fn,void 0,!0),_){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,u),!0;case 3:return c.fn.call(c.context,u,l),!0;case 4:return c.fn.call(c.context,u,l,h),!0;case 5:return c.fn.call(c.context,u,l,h,f),!0;case 6:return c.fn.call(c.context,u,l,h,f,d),!0}for(g=1,v=new Array(_-1);g<_;g++)v[g-1]=arguments[g];c.fn.apply(c.context,v)}else{var m=c.length,y;for(g=0;g<m;g++)switch(c[g].once&&this.removeListener(s,c[g].fn,void 0,!0),_){case 1:c[g].fn.call(c[g].context);break;case 2:c[g].fn.call(c[g].context,u);break;case 3:c[g].fn.call(c[g].context,u,l);break;case 4:c[g].fn.call(c[g].context,u,l,h);break;default:if(!v)for(y=1,v=new Array(_-1);y<_;y++)v[y-1]=arguments[y];c[g].fn.apply(c[g].context,v)}}return!0},a.prototype.on=function(s,u,l){var h=new i(u,l||this),f=r?r+s:s;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],h]:this._events[f].push(h):(this._events[f]=h,this._eventsCount++),this},a.prototype.once=function(s,u,l){var h=new i(u,l||this,!0),f=r?r+s:s;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],h]:this._events[f].push(h):(this._events[f]=h,this._eventsCount++),this},a.prototype.removeListener=function(s,u,l,h){var f=r?r+s:s;if(!this._events[f])return this;if(!u)return--this._eventsCount==0?this._events=new n:delete this._events[f],this;var d=this._events[f];if(d.fn)d.fn===u&&(!h||d.once)&&(!l||d.context===l)&&(--this._eventsCount==0?this._events=new n:delete this._events[f]);else{for(var p=0,c=[],_=d.length;p<_;p++)(d[p].fn!==u||h&&!d[p].once||l&&d[p].context!==l)&&c.push(d[p]);c.length?this._events[f]=c.length===1?c[0]:c:--this._eventsCount==0?this._events=new n:delete this._events[f]}return this},a.prototype.removeAllListeners=function(s){var u;return s?(u=r?r+s:s,this._events[u]&&(--this._eventsCount==0?this._events=new n:delete this._events[u])):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=r,a.EventEmitter=a,e.exports=a})(rt);var ue={},La={},Nn={exports:{}};(function(e){(function(t){var r=/iPhone/i,n=/iPod/i,i=/iPad/i,a=/\bAndroid(?:.+)Mobile\b/i,o=/Android/i,s=/\bAndroid(?:.+)SD4930UR\b/i,u=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,l=/Windows Phone/i,h=/\bWindows(?:.+)ARM\b/i,f=/BlackBerry/i,d=/BB10/i,p=/Opera Mini/i,c=/\b(CriOS|Chrome)(?:.+)Mobile/i,_=/Mobile(?:.+)Firefox\b/i;function v(m,y){return m.test(y)}function g(m){var y=m||(typeof navigator!="undefined"?navigator.userAgent:""),x=y.split("[FBAN");x[1]!==void 0&&(y=x[0]),(x=y.split("Twitter"))[1]!==void 0&&(y=x[0]);var T={apple:{phone:v(r,y)&&!v(l,y),ipod:v(n,y),tablet:!v(r,y)&&v(i,y)&&!v(l,y),device:(v(r,y)||v(n,y)||v(i,y))&&!v(l,y)},amazon:{phone:v(s,y),tablet:!v(s,y)&&v(u,y),device:v(s,y)||v(u,y)},android:{phone:!v(l,y)&&v(s,y)||!v(l,y)&&v(a,y),tablet:!v(l,y)&&!v(s,y)&&!v(a,y)&&(v(u,y)||v(o,y)),device:!v(l,y)&&(v(s,y)||v(u,y)||v(a,y)||v(o,y))||v(/\bokhttp\b/i,y)},windows:{phone:v(l,y),tablet:v(h,y),device:v(l,y)||v(h,y)},other:{blackberry:v(f,y),blackberry10:v(d,y),opera:v(p,y),firefox:v(_,y),chrome:v(c,y),device:v(f,y)||v(d,y)||v(p,y)||v(_,y)||v(c,y)}};return T.any=T.apple.device||T.android.device||T.windows.device||T.other.device,T.phone=T.apple.phone||T.android.phone||T.windows.phone,T.tablet=T.apple.tablet||T.android.tablet||T.windows.tablet,T}e.exports&&typeof window=="undefined"?e.exports=g:e.exports&&typeof window!="undefined"?(e.exports=g(),e.exports.isMobile=g):t.isMobile=g()})(ne)})(Nn);La.__esModule=!0;La.default=rm;var em=Nn.exports,Ul=tm(em);function tm(e){return e&&e.__esModule?e:{default:e}}function rm(e){return Ul.default.tablet||Ul.default.phone?4:e}var $a={};$a.__esModule=!0;$a.default=nm;function nm(){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!e}ue.__esModule=!0;var im=La,am=Nl(im),om=$a,sm=Nl(om);function Nl(e){return e&&e.__esModule?e:{default:e}}ue.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,am.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,sm.default)(),MESH_CANVAS_PADDING:0};var Hn={},Rr={};Rr.__esModule=!0;var Hl=ce;function um(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Mr=function(){function e(){um(this,e),this.worldTransform=new Hl.Matrix,this.localTransform=new Hl.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(r){var n=r.worldTransform,i=this.worldTransform,a=this.localTransform;i.a=a.a*n.a+a.b*n.c,i.b=a.a*n.b+a.b*n.d,i.c=a.c*n.a+a.d*n.c,i.d=a.c*n.b+a.d*n.d,i.tx=a.tx*n.a+a.ty*n.c+n.tx,i.ty=a.tx*n.b+a.ty*n.d+n.ty,this._worldID++},e}();Rr.default=Mr;Mr.prototype.updateWorldTransform=Mr.prototype.updateTransform;Mr.IDENTITY=new Mr;Hn.__esModule=!0;var lm=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Xn=ce,hm=Rr,fm=cm(hm);function cm(e){return e&&e.__esModule?e:{default:e}}function dm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pm(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function vm(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _m=function(e){vm(t,e);function t(){dm(this,t);var r=pm(this,e.call(this));return r.position=new Xn.ObservablePoint(r.onChange,r,0,0),r.scale=new Xn.ObservablePoint(r.onChange,r,1,1),r.pivot=new Xn.ObservablePoint(r.onChange,r,0,0),r.skew=new Xn.ObservablePoint(r.updateSkew,r,0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r._localID=0,r._currentLocalID=0,r}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale._x,n.b=this._sx*this.scale._x,n.c=this._cy*this.scale._y,n.d=this._sy*this.scale._y,n.tx=this.position._x-(this.pivot._x*n.a+this.pivot._y*n.c),n.ty=this.position._y-(this.pivot._x*n.b+this.pivot._y*n.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(n){var i=this.localTransform;if(this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale._x,i.b=this._sx*this.scale._x,i.c=this._cy*this.scale._y,i.d=this._sy*this.scale._y,i.tx=this.position._x-(this.pivot._x*i.a+this.pivot._y*i.c),i.ty=this.position._y-(this.pivot._x*i.b+this.pivot._y*i.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){var a=n.worldTransform,o=this.worldTransform;o.a=i.a*a.a+i.b*a.c,o.b=i.a*a.b+i.b*a.d,o.c=i.c*a.a+i.d*a.c,o.d=i.c*a.b+i.d*a.d,o.tx=i.tx*a.a+i.ty*a.c+a.tx,o.ty=i.tx*a.b+i.ty*a.d+a.ty,this._parentID=n._worldID,this._worldID++}},t.prototype.setFromMatrix=function(n){n.decompose(this),this._localID++},lm(t,[{key:"rotation",get:function(){return this._rotation},set:function(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}}]),t}(fm.default);Hn.default=_m;var Wn={};Wn.__esModule=!0;var gm=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Vn=ce,ym=Rr,mm=xm(ym);function xm(e){return e&&e.__esModule?e:{default:e}}function Tm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Em(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function bm(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Sm=function(e){bm(t,e);function t(){Tm(this,t);var r=Em(this,e.call(this));return r.position=new Vn.Point(0,0),r.scale=new Vn.Point(1,1),r.skew=new Vn.ObservablePoint(r.updateSkew,r,0,0),r.pivot=new Vn.Point(0,0),r._rotation=0,r._cx=1,r._sx=0,r._cy=0,r._sy=1,r}return t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var n=this.localTransform;n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d)},t.prototype.updateTransform=function(n){var i=this.localTransform;i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d);var a=n.worldTransform,o=this.worldTransform;o.a=i.a*a.a+i.b*a.c,o.b=i.a*a.b+i.b*a.d,o.c=i.c*a.a+i.d*a.c,o.d=i.c*a.b+i.d*a.d,o.tx=i.tx*a.a+i.ty*a.c+a.tx,o.ty=i.tx*a.b+i.ty*a.d+a.ty,this._worldID++},t.prototype.setFromMatrix=function(n){n.decompose(this)},gm(t,[{key:"rotation",get:function(){return this._rotation},set:function(n){this._rotation=n,this.updateSkew()}}]),t}(mm.default);Wn.default=Sm;Un.__esModule=!0;var wm=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Pm=rt.exports,Rm=Or(Pm),Mm=k,Om=ue,Cm=Or(Om),Am=Hn,Dm=Or(Am),Im=Wn,Lm=Or(Im),$m=Pr,Bm=Or($m),Xl=ce;function Or(e){return e&&e.__esModule?e:{default:e}}function Fm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gm(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function km(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ba=function(e){km(t,e);function t(){Fm(this,t);var r=Gm(this,e.call(this)),n=Cm.default.TRANSFORM_MODE===Mm.TRANSFORM_MODE.STATIC?Dm.default:Lm.default;return r.tempDisplayObjectParent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new Bm.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r}return t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(n,i){return n||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),i||(this._boundsRect||(this._boundsRect=new Xl.Rectangle),i=this._boundsRect),this._bounds.getRectangle(i)},t.prototype.getLocalBounds=function(n){var i=this.transform,a=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,n||(this._localBoundsRect||(this._localBoundsRect=new Xl.Rectangle),n=this._localBoundsRect);var o=this.getBounds(!1,n);return this.parent=a,this.transform=i,o},t.prototype.toGlobal=function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(n,i)},t.prototype.toLocal=function(n,i,a,o){return i&&(n=i.toGlobal(n,a,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(n,a)},t.prototype.renderWebGL=function(n){},t.prototype.renderCanvas=function(n){},t.prototype.setParent=function(n){if(!n||!n.addChild)throw new Error("setParent: Argument must be a Container");return n.addChild(this),n},t.prototype.setTransform=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,h=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,f=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0;return this.position.x=n,this.position.y=i,this.scale.x=a||1,this.scale.y=o||1,this.rotation=s,this.skew.x=u,this.skew.y=l,this.pivot.x=h,this.pivot.y=f,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},wm(t,[{key:"_tempDisplayObjectParent",get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(n){this.transform.position.x=n}},{key:"y",get:function(){return this.position.y},set:function(n){this.transform.position.y=n}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(n){this.transform.position.copy(n)}},{key:"scale",get:function(){return this.transform.scale},set:function(n){this.transform.scale.copy(n)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(n){this.transform.pivot.copy(n)}},{key:"skew",get:function(){return this.transform.skew},set:function(n){this.transform.skew.copy(n)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(n){this.transform.rotation=n}},{key:"worldVisible",get:function(){var n=this;do{if(!n.visible)return!1;n=n.parent}while(n);return!0}},{key:"mask",get:function(){return this._mask},set:function(n){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=n,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(n){this._filters=n&&n.slice()}}]),t}(Rm.default);Un.default=Ba;Ba.prototype.displayObjectUpdateTransform=Ba.prototype.updateTransform;var Dt={},L={},Fa={};Fa.__esModule=!0;function Um(e){e.__plugins={},e.registerPlugin=function(r,n){e.__plugins[r]=n},e.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var r in e.__plugins)this.plugins[r]=new e.__plugins[r](this)},e.prototype.destroyPlugins=function(){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;this.plugins=null}}Fa.default={mixin:function(t){Um(t)}};var Cr={};Cr.__esModule=!0;Cr.mixin=Wl;Cr.delayMixin=Nm;Cr.performMixins=Hm;function Wl(e,t){if(!(!e||!t))for(var r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}}var Ar=[];function Nm(e,t){Ar.push(e,t)}function Hm(){for(var e=0;e<Ar.length;e+=2)Wl(Ar[e],Ar[e+1]);Ar.length=0}var Xm=function(t,r,n){var i,a=t.length;if(!(r>=a||n===0)){n=r+n>a?a-r:n;var o=a-n;for(i=r;i<o;++i)t[i]=t[i+n];t.length=o}},Ga={};Ga.__esModule=!0;Ga.default=Wm;var Oe=k;function Wm(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[Oe.BLEND_MODES.NORMAL_NPM]=Oe.BLEND_MODES.NORMAL,e[Oe.BLEND_MODES.ADD_NPM]=Oe.BLEND_MODES.ADD,e[Oe.BLEND_MODES.SCREEN_NPM]=Oe.BLEND_MODES.SCREEN,t[Oe.BLEND_MODES.NORMAL]=Oe.BLEND_MODES.NORMAL_NPM,t[Oe.BLEND_MODES.ADD]=Oe.BLEND_MODES.ADD_NPM,t[Oe.BLEND_MODES.SCREEN]=Oe.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n}var Dr={exports:{}};Dr.exports=qn;Dr.exports.default=qn;function qn(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,a=Vl(e,0,i,r,!0),o=[];if(!a||a.next===a.prev)return o;var s,u,l,h,f,d,p;if(n&&(a=Km(e,t,a,r)),e.length>80*r){s=l=e[0],u=h=e[1];for(var c=r;c<i;c+=r)f=e[c],d=e[c+1],f<s&&(s=f),d<u&&(u=d),f>l&&(l=f),d>h&&(h=d);p=Math.max(l-s,h-u),p=p!==0?1/p:0}return Ir(a,o,r,s,u,p),o}function Vl(e,t,r,n,i){var a,o;if(i===Na(e,t,r,n)>0)for(a=t;a<r;a+=n)o=zl(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=zl(a,e[a],e[a+1],o);return o&&Yn(o,o.next)&&($r(o),o=o.next),o}function nt(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(Yn(r,r.next)||oe(r.prev,r,r.next)===0)){if($r(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function Ir(e,t,r,n,i,a,o){if(!!e){!o&&a&&e0(e,n,i,a);for(var s=e,u,l;e.prev!==e.next;){if(u=e.prev,l=e.next,a?qm(e,n,i,a):Vm(e)){t.push(u.i/r),t.push(e.i/r),t.push(l.i/r),$r(e),e=l.next,s=l.next;continue}if(e=l,e===s){o?o===1?(e=Ym(nt(e),t,r),Ir(e,t,r,n,i,a,2)):o===2&&zm(e,t,r,n,i,a):Ir(nt(e),t,r,n,i,a,1);break}}}}function Vm(e){var t=e.prev,r=e,n=e.next;if(oe(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(zt(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&oe(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function qm(e,t,r,n){var i=e.prev,a=e,o=e.next;if(oe(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,h=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=ka(s,u,t,r,n),d=ka(l,h,t,r,n),p=e.prevZ,c=e.nextZ;p&&p.z>=f&&c&&c.z<=d;){if(p!==e.prev&&p!==e.next&&zt(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&oe(p.prev,p,p.next)>=0||(p=p.prevZ,c!==e.prev&&c!==e.next&&zt(i.x,i.y,a.x,a.y,o.x,o.y,c.x,c.y)&&oe(c.prev,c,c.next)>=0))return!1;c=c.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&zt(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&oe(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;c&&c.z<=d;){if(c!==e.prev&&c!==e.next&&zt(i.x,i.y,a.x,a.y,o.x,o.y,c.x,c.y)&&oe(c.prev,c,c.next)>=0)return!1;c=c.nextZ}return!0}function Ym(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!Yn(i,a)&&ql(i,n,n.next,a)&&Lr(i,a)&&Lr(a,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(a.i/r),$r(n),$r(n.next),n=e=a),n=n.next}while(n!==e);return nt(n)}function zm(e,t,r,n,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&n0(o,s)){var u=Yl(o,s);o=nt(o,o.next),u=nt(u,u.next),Ir(o,t,r,n,i,a),Ir(u,t,r,n,i,a);return}s=s.next}o=o.next}while(o!==e)}function Km(e,t,r,n){var i=[],a,o,s,u,l;for(a=0,o=t.length;a<o;a++)s=t[a]*n,u=a<o-1?t[a+1]*n:e.length,l=Vl(e,s,u,n,!1),l===l.next&&(l.steiner=!0),i.push(r0(l));for(i.sort(Zm),a=0;a<i.length;a++)r=Jm(i[a],r),r=nt(r,r.next);return r}function Zm(e,t){return e.x-t.x}function Jm(e,t){var r=Qm(e,t);if(!r)return t;var n=Yl(r,e),i=nt(r,r.next);return nt(n,n.next),t===r?i:t}function Qm(e,t){var r=t,n=e.x,i=e.y,a=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){if(a=s,s===n){if(i===r.y)return r;if(i===r.next.y)return r.next}o=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!o)return null;if(n===a)return o;var u=o,l=o.x,h=o.y,f=1/0,d;r=o;do n>=r.x&&r.x>=l&&n!==r.x&&zt(i<h?n:a,i,l,h,i<h?a:n,i,r.x,r.y)&&(d=Math.abs(i-r.y)/(n-r.x),Lr(r,e)&&(d<f||d===f&&(r.x>o.x||r.x===o.x&&jm(o,r)))&&(o=r,f=d)),r=r.next;while(r!==u);return o}function jm(e,t){return oe(e.prev,e,t.prev)<0&&oe(t.next,e,e.next)<0}function e0(e,t,r,n){var i=e;do i.z===null&&(i.z=ka(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,t0(i)}function t0(e){var t,r,n,i,a,o,s,u,l=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ,!!n);t++);for(u=l;s>0||u>0&&n;)s!==0&&(u===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1);return e}function ka(e,t,r,n,i){return e=32767*(e-r)*i,t=32767*(t-n)*i,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function r0(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function zt(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function n0(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!i0(e,t)&&(Lr(e,t)&&Lr(t,e)&&a0(e,t)&&(oe(e.prev,e,t.prev)||oe(e,t.prev,t))||Yn(e,t)&&oe(e.prev,e,e.next)>0&&oe(t.prev,t,t.next)>0)}function oe(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Yn(e,t){return e.x===t.x&&e.y===t.y}function ql(e,t,r,n){var i=Kn(oe(e,t,r)),a=Kn(oe(e,t,n)),o=Kn(oe(r,n,e)),s=Kn(oe(r,n,t));return!!(i!==a&&o!==s||i===0&&zn(e,r,t)||a===0&&zn(e,n,t)||o===0&&zn(r,e,n)||s===0&&zn(r,t,n))}function zn(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Kn(e){return e>0?1:e<0?-1:0}function i0(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&ql(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function Lr(e,t){return oe(e.prev,e,e.next)<0?oe(e,t,e.next)>=0&&oe(e,e.prev,t)>=0:oe(e,t,e.prev)<0||oe(e,e.next,t)<0}function a0(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function Yl(e,t){var r=new Ua(e.i,e.x,e.y),n=new Ua(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function zl(e,t,r,n){var i=new Ua(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function $r(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ua(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}qn.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,o=Math.abs(Na(e,0,a,r));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,h=s<u-1?t[s+1]*r:e.length;o-=Math.abs(Na(e,l,h,r))}var f=0;for(s=0;s<n.length;s+=3){var d=n[s]*r,p=n[s+1]*r,c=n[s+2]*r;f+=Math.abs((e[d]-e[c])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[c+1]-e[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function Na(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}qn.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};L.__esModule=!0;L.premultiplyBlendMode=L.BaseTextureCache=L.TextureCache=L.earcut=L.mixins=L.pluginTarget=L.EventEmitter=L.removeItems=L.isMobile=void 0;L.uid=b0;L.hex2rgb=S0;L.hex2string=w0;L.rgb2hex=P0;L.getResolutionOfUrl=R0;L.decomposeDataUri=M0;L.getUrlFileExtension=O0;L.getSvgSize=C0;L.skipHello=A0;L.sayHello=D0;L.isWebGLSupported=I0;L.sign=L0;L.destroyTextureCache=$0;L.clearTextureCache=B0;L.correctBlendMode=G0;L.premultiplyTint=k0;L.premultiplyRgba=U0;L.premultiplyTintToRgba=N0;var Br=k,o0=ue,s0=Kt(o0),u0=rt.exports,l0=Kt(u0),h0=Fa,f0=Kt(h0),c0=Cr,d0=Kl(c0),p0=Nn.exports,v0=Kl(p0),_0=Xm,g0=Kt(_0),y0=Ga,m0=Kt(y0),x0=Dr.exports,T0=Kt(x0);function Kl(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Kt(e){return e&&e.__esModule?e:{default:e}}var E0=0,Ha=!1;L.isMobile=v0;L.removeItems=g0.default;L.EventEmitter=l0.default;L.pluginTarget=f0.default;L.mixins=d0;L.earcut=T0.default;function b0(){return++E0}function S0(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function w0(e){return e=e.toString(16),e="000000".substr(0,6-e.length)+e,"#"+e}function P0(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function R0(e,t){var r=s0.default.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):t!==void 0?t:1}function M0(e){var t=Br.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}function O0(e){var t=Br.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase()}function C0(e){var t=Br.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}function A0(){Ha=!0}function D0(e){if(!Ha){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+Br.VERSION+" - \u2730 "+e+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+Br.VERSION+" - "+e+" - http://www.pixijs.com/");Ha=!0}}function I0(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!!(r&&r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch{return!1}}function L0(e){return e===0?0:e<0?-1:1}var Zn=L.TextureCache=Object.create(null),Jn=L.BaseTextureCache=Object.create(null);function $0(){var e=void 0;for(e in Zn)Zn[e].destroy();for(e in Jn)Jn[e].destroy()}function B0(){var e=void 0;for(e in Zn)delete Zn[e];for(e in Jn)delete Jn[e]}var F0=L.premultiplyBlendMode=(0,m0.default)();function G0(e,t){return F0[t?1:0][e]}function k0(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;var r=e>>16&255,n=e>>8&255,i=e&255;return r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0,(t*255<<24)+(r<<16)+(n<<8)+i}function U0(e,t,r,n){return r=r||new Float32Array(4),n||n===void 0?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function N0(e,t,r,n){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,(n||n===void 0)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}Dt.__esModule=!0;var H0=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Xa=L,X0=Un,W0=V0(X0);function V0(e){return e&&e.__esModule?e:{default:e}}function q0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y0(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function z0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Wa=function(e){z0(t,e);function t(){q0(this,t);var r=Y0(this,e.call(this));return r.children=[],r}return t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(n){var i=arguments.length;if(i>1)for(var a=0;a<i;a++)this.addChild(arguments[a]);else n.parent&&n.parent.removeChild(n),n.parent=this,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),n.emit("added",this);return n},t.prototype.addChildAt=function(n,i){if(i<0||i>this.children.length)throw new Error(n+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return n.parent&&n.parent.removeChild(n),n.parent=this,n.transform._parentID=-1,this.children.splice(i,0,n),this._boundsID++,this.onChildrenChange(i),n.emit("added",this),n},t.prototype.swapChildren=function(n,i){if(n!==i){var a=this.getChildIndex(n),o=this.getChildIndex(i);this.children[a]=i,this.children[o]=n,this.onChildrenChange(a<o?a:o)}},t.prototype.getChildIndex=function(n){var i=this.children.indexOf(n);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},t.prototype.setChildIndex=function(n,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var a=this.getChildIndex(n);(0,Xa.removeItems)(this.children,a,1),this.children.splice(i,0,n),this.onChildrenChange(i)},t.prototype.getChildAt=function(n){if(n<0||n>=this.children.length)throw new Error("getChildAt: Index ("+n+") does not exist.");return this.children[n]},t.prototype.removeChild=function(n){var i=arguments.length;if(i>1)for(var a=0;a<i;a++)this.removeChild(arguments[a]);else{var o=this.children.indexOf(n);if(o===-1)return null;n.parent=null,n.transform._parentID=-1,(0,Xa.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),n.emit("removed",this)}return n},t.prototype.removeChildAt=function(n){var i=this.getChildAt(n);return i.parent=null,i.transform._parentID=-1,(0,Xa.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),i.emit("removed",this),i},t.prototype.removeChildren=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments[1],a=n,o=typeof i=="number"?i:this.children.length,s=o-a,u=void 0;if(s>0&&s<=o){u=this.children.splice(a,s);for(var l=0;l<u.length;++l)u[l].parent=null,u[l].transform&&(u[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(n);for(var h=0;h<u.length;++h)u[h].emit("removed",this);return u}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var n=0,i=this.children.length;n<i;++n){var a=this.children[n];a.visible&&a.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var n=0;n<this.children.length;n++){var i=this.children[n];!i.visible||!i.renderable||(i.calculateBounds(),i._mask?(i._mask.calculateBounds(),this._bounds.addBoundsMask(i._bounds,i._mask._bounds)):i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(n);else{this._renderWebGL(n);for(var i=0,a=this.children.length;i<a;++i)this.children[i].renderWebGL(n)}},t.prototype.renderAdvancedWebGL=function(n){n.flush();var i=this._filters,a=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o]);this._enabledFilters.length&&n.filterManager.pushFilter(this,this._enabledFilters)}a&&n.maskManager.pushMask(this,this._mask),this._renderWebGL(n);for(var s=0,u=this.children.length;s<u;s++)this.children[s].renderWebGL(n);n.flush(),a&&n.maskManager.popMask(this,this._mask),i&&this._enabledFilters&&this._enabledFilters.length&&n.filterManager.popFilter()},t.prototype._renderWebGL=function(n){},t.prototype._renderCanvas=function(n){},t.prototype.renderCanvas=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){this._mask&&n.maskManager.pushMask(this._mask),this._renderCanvas(n);for(var i=0,a=this.children.length;i<a;++i)this.children[i].renderCanvas(n);this._mask&&n.maskManager.popMask(n)}},t.prototype.destroy=function(n){e.prototype.destroy.call(this);var i=typeof n=="boolean"?n:n&&n.children,a=this.removeChildren(0,this.children.length);if(i)for(var o=0;o<a.length;++o)a[o].destroy(n)},H0(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(n){var i=this.getLocalBounds().width;i!==0?this.scale.x=n/i:this.scale.x=1,this._width=n}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(n){var i=this.getLocalBounds().height;i!==0?this.scale.y=n/i:this.scale.y=1,this._height=n}}]),t}(W0.default);Dt.default=Wa;Wa.prototype.containerUpdateTransform=Wa.prototype.updateTransform;var Fr={},ke={},it={},Qn={},It={},Va={exports:{}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,a=typeof ne=="object"&&ne;(a.global===a||a.window===a||a.self===a)&&(r=a);var o,s=2147483647,u=36,l=1,h=26,f=38,d=700,p=72,c=128,_="-",v=/^xn--/,g=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=u-l,T=Math.floor,E=String.fromCharCode,S;function b(M){throw RangeError(y[M])}function w(M,C){for(var N=M.length,W=[];N--;)W[N]=C(M[N]);return W}function P(M,C){var N=M.split("@"),W="";N.length>1&&(W=N[0]+"@",M=N[1]),M=M.replace(m,".");var Y=M.split("."),Q=w(Y,C).join(".");return W+Q}function A(M){for(var C=[],N=0,W=M.length,Y,Q;N<W;)Y=M.charCodeAt(N++),Y>=55296&&Y<=56319&&N<W?(Q=M.charCodeAt(N++),(Q&64512)==56320?C.push(((Y&1023)<<10)+(Q&1023)+65536):(C.push(Y),N--)):C.push(Y);return C}function $(M){return w(M,function(C){var N="";return C>65535&&(C-=65536,N+=E(C>>>10&1023|55296),C=56320|C&1023),N+=E(C),N}).join("")}function B(M){return M-48<10?M-22:M-65<26?M-65:M-97<26?M-97:u}function I(M,C){return M+22+75*(M<26)-((C!=0)<<5)}function G(M,C,N){var W=0;for(M=N?T(M/d):M>>1,M+=T(M/C);M>x*h>>1;W+=u)M=T(M/x);return T(W+(x+1)*M/(M+f))}function F(M){var C=[],N=M.length,W,Y=0,Q=c,re=p,se,_e,ge,Ae,fe,ye,me,H,D;for(se=M.lastIndexOf(_),se<0&&(se=0),_e=0;_e<se;++_e)M.charCodeAt(_e)>=128&&b("not-basic"),C.push(M.charCodeAt(_e));for(ge=se>0?se+1:0;ge<N;){for(Ae=Y,fe=1,ye=u;ge>=N&&b("invalid-input"),me=B(M.charCodeAt(ge++)),(me>=u||me>T((s-Y)/fe))&&b("overflow"),Y+=me*fe,H=ye<=re?l:ye>=re+h?h:ye-re,!(me<H);ye+=u)D=u-H,fe>T(s/D)&&b("overflow"),fe*=D;W=C.length+1,re=G(Y-Ae,W,Ae==0),T(Y/W)>s-Q&&b("overflow"),Q+=T(Y/W),Y%=W,C.splice(Y++,0,Q)}return $(C)}function U(M){var C,N,W,Y,Q,re,se,_e,ge,Ae,fe,ye=[],me,H,D,He;for(M=A(M),me=M.length,C=c,N=0,Q=p,re=0;re<me;++re)fe=M[re],fe<128&&ye.push(E(fe));for(W=Y=ye.length,Y&&ye.push(_);W<me;){for(se=s,re=0;re<me;++re)fe=M[re],fe>=C&&fe<se&&(se=fe);for(H=W+1,se-C>T((s-N)/H)&&b("overflow"),N+=(se-C)*H,C=se,re=0;re<me;++re)if(fe=M[re],fe<C&&++N>s&&b("overflow"),fe==C){for(_e=N,ge=u;Ae=ge<=Q?l:ge>=Q+h?h:ge-Q,!(_e<Ae);ge+=u)He=_e-Ae,D=u-Ae,ye.push(E(I(Ae+He%D,0))),_e=T(He/D);ye.push(E(I(_e,0))),Q=G(N,H,W==Y),N=0,++W}++N,++C}return ye.join("")}function V(M){return P(M,function(C){return v.test(C)?F(C.slice(4).toLowerCase()):C})}function j(M){return P(M,function(C){return g.test(C)?"xn--"+U(C):C})}if(o={version:"1.3.2",ucs2:{decode:A,encode:$},decode:F,encode:U,toASCII:j,toUnicode:V},n&&i)if(e.exports==n)i.exports=o;else for(S in o)o.hasOwnProperty(S)&&(n[S]=o[S]);else r.punycode=o})(ne)})(Va,Va.exports);var K0={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},Gr={};function Z0(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var J0=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if(typeof e!="string"||e.length===0)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var u=0;u<s;++u){var l=e[u].replace(a,"%20"),h=l.indexOf(r),f,d,p,c;h>=0?(f=l.substr(0,h),d=l.substr(h+1)):(f=l,d=""),p=decodeURIComponent(f),c=decodeURIComponent(d),Z0(i,p)?Array.isArray(i[p])?i[p].push(c):i[p]=[i[p],c]:i[p]=c}return i},kr=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Q0=function(e,t,r,n){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(i){var a=encodeURIComponent(kr(i))+r;return Array.isArray(e[i])?e[i].map(function(o){return a+encodeURIComponent(kr(o))}).join(t):a+encodeURIComponent(kr(e[i]))}).join(t):n?encodeURIComponent(kr(n))+r+encodeURIComponent(kr(e)):""};Gr.decode=Gr.parse=J0;Gr.encode=Gr.stringify=Q0;var j0=Va.exports,Ue=K0;It.parse=Ur;It.resolve=lx;It.resolveObject=hx;It.format=ux;It.Url=Ce;function Ce(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ex=/^([a-z0-9.+-]+:)/i,tx=/:[0-9]*$/,rx=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,nx=["<",">",'"',"`"," ","\r",`
`,"	"],ix=["{","}","|","\\","^","`"].concat(nx),qa=["'"].concat(ix),Zl=["%","/","?",";","#"].concat(qa),Jl=["/","?","#"],ax=255,Ql=/^[+a-z0-9A-Z_-]{0,63}$/,ox=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,sx={javascript:!0,"javascript:":!0},Ya={javascript:!0,"javascript:":!0},Zt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},za=Gr;function Ur(e,t,r){if(e&&Ue.isObject(e)&&e instanceof Ce)return e;var n=new Ce;return n.parse(e,t,r),n}Ce.prototype.parse=function(e,t,r){if(!Ue.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",a=e.split(i),o=/\\/g;a[0]=a[0].replace(o,"/"),e=a.join(i);var s=e;if(s=s.trim(),!r&&e.split("#").length===1){var u=rx.exec(s);if(u)return this.path=s,this.href=s,this.pathname=u[1],u[2]?(this.search=u[2],t?this.query=za.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=ex.exec(s);if(l){l=l[0];var h=l.toLowerCase();this.protocol=h,s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=s.substr(0,2)==="//";f&&!(l&&Ya[l])&&(s=s.substr(2),this.slashes=!0)}if(!Ya[l]&&(f||l&&!Zt[l])){for(var d=-1,p=0;p<Jl.length;p++){var c=s.indexOf(Jl[p]);c!==-1&&(d===-1||c<d)&&(d=c)}var _,v;d===-1?v=s.lastIndexOf("@"):v=s.lastIndexOf("@",d),v!==-1&&(_=s.slice(0,v),s=s.slice(v+1),this.auth=decodeURIComponent(_)),d=-1;for(var p=0;p<Zl.length;p++){var c=s.indexOf(Zl[p]);c!==-1&&(d===-1||c<d)&&(d=c)}d===-1&&(d=s.length),this.host=s.slice(0,d),s=s.slice(d),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var m=this.hostname.split(/\./),p=0,y=m.length;p<y;p++){var x=m[p];if(!!x&&!x.match(Ql)){for(var T="",E=0,S=x.length;E<S;E++)x.charCodeAt(E)>127?T+="x":T+=x[E];if(!T.match(Ql)){var b=m.slice(0,p),w=m.slice(p+1),P=x.match(ox);P&&(b.push(P[1]),w.unshift(P[2])),w.length&&(s="/"+w.join(".")+s),this.hostname=b.join(".");break}}}this.hostname.length>ax?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=j0.toASCII(this.hostname));var A=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+A,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),s[0]!=="/"&&(s="/"+s))}if(!sx[h])for(var p=0,y=qa.length;p<y;p++){var B=qa[p];if(s.indexOf(B)!==-1){var I=encodeURIComponent(B);I===B&&(I=escape(B)),s=s.split(B).join(I)}}var G=s.indexOf("#");G!==-1&&(this.hash=s.substr(G),s=s.slice(0,G));var F=s.indexOf("?");if(F!==-1?(this.search=s.substr(F),this.query=s.substr(F+1),t&&(this.query=za.parse(this.query)),s=s.slice(0,F)):t&&(this.search="",this.query={}),s&&(this.pathname=s),Zt[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var A=this.pathname||"",U=this.search||"";this.path=A+U}return this.href=this.format(),this};function ux(e){return Ue.isString(e)&&(e=Ur(e)),e instanceof Ce?e.format():Ce.prototype.format.call(e)}Ce.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&Ue.isObject(this.query)&&Object.keys(this.query).length&&(a=za.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Zt[t])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(s){return encodeURIComponent(s)}),o=o.replace("#","%23"),t+i+r+o+n};function lx(e,t){return Ur(e,!1,!0).resolve(t)}Ce.prototype.resolve=function(e){return this.resolveObject(Ur(e,!1,!0)).format()};function hx(e,t){return e?Ur(e,!1,!0).resolveObject(t):t}Ce.prototype.resolveObject=function(e){if(Ue.isString(e)){var t=new Ce;t.parse(e,!1,!0),e=t}for(var r=new Ce,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=e.hash,e.href==="")return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var u=o[s];u!=="protocol"&&(r[u]=e[u])}return Zt[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Zt[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var f=l[h];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!Ya[e.protocol]){for(var y=(e.pathname||"").split("/");y.length&&!(e.host=y.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),y[0]!==""&&y.unshift(""),y.length<2&&y.unshift(""),r.pathname=y.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",p=r.search||"";r.path=d+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var c=r.pathname&&r.pathname.charAt(0)==="/",_=e.host||e.pathname&&e.pathname.charAt(0)==="/",v=_||c||r.host&&e.pathname,g=v,m=r.pathname&&r.pathname.split("/")||[],y=e.pathname&&e.pathname.split("/")||[],x=r.protocol&&!Zt[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(m[0]===""?m[0]=r.host:m.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(y[0]===""?y[0]=e.host:y.unshift(e.host)),e.host=null),v=v&&(y[0]===""||m[0]==="")),_)r.host=e.host||e.host===""?e.host:r.host,r.hostname=e.hostname||e.hostname===""?e.hostname:r.hostname,r.search=e.search,r.query=e.query,m=y;else if(y.length)m||(m=[]),m.pop(),m=m.concat(y),r.search=e.search,r.query=e.query;else if(!Ue.isNullOrUndefined(e.search)){if(x){r.hostname=r.host=m.shift();var T=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())}return r.search=e.search,r.query=e.query,(!Ue.isNull(r.pathname)||!Ue.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!m.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=m.slice(-1)[0],S=(r.host||e.host||m.length>1)&&(E==="."||E==="..")||E==="",b=0,w=m.length;w>=0;w--)E=m[w],E==="."?m.splice(w,1):E===".."?(m.splice(w,1),b++):b&&(m.splice(w,1),b--);if(!v&&!g)for(;b--;b)m.unshift("..");v&&m[0]!==""&&(!m[0]||m[0].charAt(0)!=="/")&&m.unshift(""),S&&m.join("/").substr(-1)!=="/"&&m.push("");var P=m[0]===""||m[0]&&m[0].charAt(0)==="/";if(x){r.hostname=r.host=P?"":m.length?m.shift():"";var T=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;T&&(r.auth=T.shift(),r.host=r.hostname=T.shift())}return v=v||r.host&&m.length,v&&!P&&m.unshift(""),m.length?r.pathname=m.join("/"):(r.pathname=null,r.path=null),(!Ue.isNull(r.pathname)||!Ue.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r};Ce.prototype.parseHost=function(){var e=this.host,t=tx.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};Qn.__esModule=!0;Qn.default=px;var fx=It,cx=dx(fx);function dx(e){return e&&e.__esModule?e:{default:e}}var jn=void 0;function px(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location;if(e.indexOf("data:")===0)return"";t=t||window.location,jn||(jn=document.createElement("a")),jn.href=e,e=cx.default.parse(jn.href);var r=!e.port&&t.port===""||e.port===t.port;return e.hostname!==t.hostname||!r||e.protocol!==t.protocol?"anonymous":""}var ae={},Ka=32;ae.INT_BITS=Ka;ae.INT_MAX=2147483647;ae.INT_MIN=-1<<Ka-1;ae.sign=function(e){return(e>0)-(e<0)};ae.abs=function(e){var t=e>>Ka-1;return(e^t)-t};ae.min=function(e,t){return t^(e^t)&-(e<t)};ae.max=function(e,t){return e^(e^t)&-(e<t)};ae.isPow2=function(e){return!(e&e-1)&&!!e};ae.log2=function(e){var t,r;return t=(e>65535)<<4,e>>>=t,r=(e>255)<<3,e>>>=r,t|=r,r=(e>15)<<2,e>>>=r,t|=r,r=(e>3)<<1,e>>>=r,t|=r,t|e>>1};ae.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0};ae.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function jl(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}ae.countTrailingZeros=jl;ae.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1};ae.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)};ae.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var Nr=new Array(256);(function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=r&1,--i;e[t]=n<<i&255}})(Nr);ae.reverse=function(e){return Nr[e&255]<<24|Nr[e>>>8&255]<<16|Nr[e>>>16&255]<<8|Nr[e>>>24&255]};ae.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1};ae.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16};ae.interleave3=function(e,t,r){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,e|r<<2};ae.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22};ae.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>jl(e)+1};it.__esModule=!0;var he=L,vx=ue,ei=ti(vx),_x=rt.exports,gx=ti(_x),yx=Qn,mx=ti(yx),xx=ae,eh=ti(xx);function ti(e){return e&&e.__esModule?e:{default:e}}function Tx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ex(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function bx(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Sx=function(e){bx(t,e);function t(r,n,i){Tx(this,t);var a=Ex(this,e.call(this));return a.uid=(0,he.uid)(),a.touched=0,a.resolution=i||ei.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=n!==void 0?n:ei.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=ei.default.MIPMAP_TEXTURES,a.wrapMode=ei.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],r&&a.loadSource(r),a}return t.prototype.update=function(){this.imageType!=="svg"&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=eh.default.isPow2(this.realWidth)&&eh.default.isPow2(this.realHeight)},t.prototype.loadSource=function(n){var i=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,i&&this.source&&(this.source.onload=null,this.source.onerror=null);var a=!this.source;if(this.source=n,(n.src&&n.complete||n.getContext)&&n.width&&n.height)this._updateImageType(),this.imageType==="svg"?this._loadSvgSource():this._sourceLoaded(),a&&this.emit("loaded",this);else if(!n.getContext){this.isLoading=!0;var o=this;if(n.onload=function(){if(o._updateImageType(),n.onload=null,n.onerror=null,!!o.isLoading){if(o.isLoading=!1,o._sourceLoaded(),o.imageType==="svg"){o._loadSvgSource();return}o.emit("loaded",o)}},n.onerror=function(){n.onload=null,n.onerror=null,!!o.isLoading&&(o.isLoading=!1,o.emit("error",o))},n.complete&&n.src){if(n.onload=null,n.onerror=null,o.imageType==="svg"){o._loadSvgSource();return}this.isLoading=!1,n.width&&n.height?(this._sourceLoaded(),i&&this.emit("loaded",this)):i&&this.emit("error",this)}}},t.prototype._updateImageType=function(){if(!!this.imageUrl){var n=(0,he.decomposeDataUri)(this.imageUrl),i=void 0;if(n&&n.mediaType==="image"){var a=n.subType.split("+")[0];if(i=(0,he.getUrlFileExtension)("."+a),!i)throw new Error("Invalid image type in data URI.")}else i=(0,he.getUrlFileExtension)(this.imageUrl),i||(i="png");this.imageType=i}},t.prototype._loadSvgSource=function(){if(this.imageType==="svg"){var n=(0,he.decomposeDataUri)(this.imageUrl);n?this._loadSvgSourceUsingDataUri(n):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(n){var i=void 0;if(n.encoding==="base64"){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");i=atob(n.data)}else i=n.data;this._loadSvgSourceUsingString(i)},t.prototype._loadSvgSourceUsingXhr=function(){var n=this,i=new XMLHttpRequest;i.onload=function(){if(i.readyState!==i.DONE||i.status!==200)throw new Error("Failed to load SVG using XHR.");n._loadSvgSourceUsingString(i.response)},i.onerror=function(){return n.emit("error",n)},i.open("GET",this.imageUrl,!0),i.send()},t.prototype._loadSvgSourceUsingString=function(n){var i=(0,he.getSvgSize)(n),a=i.width,o=i.height;if(!a||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(a*this.sourceScale),this.realHeight=Math.round(o*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,he.uid)(),s.getContext("2d").drawImage(this.source,0,0,a,o,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,t.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete he.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(n){this.source.src=n,this.loadSource(this.source)},t.fromImage=function(n,i,a,o){var s=he.BaseTextureCache[n];if(!s){var u=new Image;i===void 0&&n.indexOf("data:")!==0?u.crossOrigin=(0,mx.default)(n):i&&(u.crossOrigin=typeof i=="string"?i:"anonymous"),s=new t(u,a),s.imageUrl=n,o&&(s.sourceScale=o),s.resolution=(0,he.getResolutionOfUrl)(n),u.src=n,t.addToCache(s,n)}return s},t.fromCanvas=function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas";n._pixiId||(n._pixiId=a+"_"+(0,he.uid)());var o=he.BaseTextureCache[n._pixiId];return o||(o=new t(n,i),t.addToCache(o,n._pixiId)),o},t.from=function(n,i,a){if(typeof n=="string")return t.fromImage(n,void 0,i,a);if(n instanceof HTMLImageElement){var o=n.src,s=he.BaseTextureCache[o];return s||(s=new t(n,i),s.imageUrl=o,a&&(s.sourceScale=a),s.resolution=(0,he.getResolutionOfUrl)(o),t.addToCache(s,o)),s}else if(n instanceof HTMLCanvasElement)return t.fromCanvas(n,i);return n},t.addToCache=function(n,i){i&&(n.textureCacheIds.indexOf(i)===-1&&n.textureCacheIds.push(i),he.BaseTextureCache[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),he.BaseTextureCache[i]=n)},t.removeFromCache=function(n){if(typeof n=="string"){var i=he.BaseTextureCache[n];if(i){var a=i.textureCacheIds.indexOf(n);return a>-1&&i.textureCacheIds.splice(a,1),delete he.BaseTextureCache[n],i}}else if(n&&n.textureCacheIds){for(var o=0;o<n.textureCacheIds.length;++o)delete he.BaseTextureCache[n.textureCacheIds[o]];return n.textureCacheIds.length=0,n}return null},t}(gx.default);it.default=Sx;var ri={},at={},Za={},Ja={};Ja.__esModule=!0;function wx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Px=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;wx(this,e),this.fn=t,this.context=r,this.priority=n,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(r,n){return n=n||null,this.fn===r&&this.context===n},e.prototype.emit=function(r){this.fn&&(this.context?this.fn.call(this.context,r):this.fn(r));var n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n},e.prototype.connect=function(r){this.previous=r,r.next&&(r.next.previous=this),this.next=r.next,r.next=this},e.prototype.destroy=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var n=this.next;return this.next=r?null:n,this.previous=null,n},e}();Ja.default=Px;Za.__esModule=!0;var Rx=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Mx=ue,Qa=rh(Mx),th=k,Ox=Ja,ja=rh(Ox);function rh(e){return e&&e.__esModule?e:{default:e}}function Cx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ax=function(){function e(){var t=this;Cx(this,e),this._head=new ja.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/Qa.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(r){t._requestId=null,t.started&&(t.update(r),t.started&&t._requestId===null&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:th.UPDATE_PRIORITY.NORMAL;return this._addListener(new ja.default(r,n,i))},e.prototype.addOnce=function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:th.UPDATE_PRIORITY.NORMAL;return this._addListener(new ja.default(r,n,i,!0))},e.prototype._addListener=function(r){var n=this._head.next,i=this._head;if(!n)r.connect(i);else{for(;n;){if(r.priority>n.priority){r.connect(i);break}i=n,n=n.next}r.previous||r.connect(i)}return this._startIfPossible(),this},e.prototype.remove=function(r,n){for(var i=this._head.next;i;)i.match(r,n)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var r=this._head.next;r;)r=r.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:performance.now(),n=void 0;if(r>this.lastTime){n=this.elapsedMS=r-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),this.deltaTime=n*Qa.default.TARGET_FPMS*this.speed;for(var i=this._head,a=i.next;a;)a=a.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=r},Rx(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(r){var n=Math.min(Math.max(0,r)/1e3,Qa.default.TARGET_FPMS);this._maxElapsedMS=1/n}}]),e}();Za.default=Ax;at.__esModule=!0;at.Ticker=at.shared=void 0;var Dx=Za,nh=Ix(Dx);function Ix(e){return e&&e.__esModule?e:{default:e}}var eo=new nh.default;eo.autoStart=!0;eo.destroy=function(){};at.shared=eo;at.Ticker=nh.default;ri.__esModule=!0;var Lx=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),$x=it,to=oh($x),ih=L,Hr=at,ah=k,Bx=Qn,Fx=oh(Bx);function oh(e){return e&&e.__esModule?e:{default:e}}function Gx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kx(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ux(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ro=function(e){Ux(t,e);function t(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(Gx(this,t),!r)throw new Error("No video source element specified.");(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0);var a=kx(this,e.call(this,r,n));return a.width=r.videoWidth,a.height=r.videoHeight,a._autoUpdate=!0,a._isAutoUpdating=!1,a.autoPlay=i,a.update=a.update.bind(a),a._onCanPlay=a._onCanPlay.bind(a),r.addEventListener("play",a._onPlayStart.bind(a)),r.addEventListener("pause",a._onPlayStop.bind(a)),a.hasLoaded=!1,a.__loaded=!1,a._isSourceReady()?a._onCanPlay():(r.addEventListener("canplay",a._onCanPlay),r.addEventListener("canplaythrough",a._onCanPlay)),a}return t.prototype._isSourcePlaying=function(){var n=this.source;return n.currentTime>0&&n.paused===!1&&n.ended===!1&&n.readyState>2},t.prototype._isSourceReady=function(){return this.source.readyState===3||this.source.readyState===4},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(Hr.shared.add(this.update,this,ah.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(Hr.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&Hr.shared.remove(this.update,this),this.source&&this.source._pixiId&&(to.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),e.prototype.destroy.call(this)},t.fromVideo=function(n,i,a){n._pixiId||(n._pixiId="video_"+(0,ih.uid)());var o=ih.BaseTextureCache[n._pixiId];return o||(o=new t(n,i,a),to.default.addToCache(o,n._pixiId)),o},t.fromUrl=function(n,i,a,o){var s=document.createElement("video");s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline","");var u=Array.isArray(n)?n[0].src||n[0]:n.src||n;if(a===void 0&&u.indexOf("data:")!==0?s.crossOrigin=(0,Fx.default)(u):a&&(s.crossOrigin=typeof a=="string"?a:"anonymous"),Array.isArray(n))for(var l=0;l<n.length;++l)s.appendChild(sh(n[l].src||n[l],n[l].mime));else s.appendChild(sh(u,n.mime));return s.load(),t.fromVideo(s,i,o)},Lx(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(n){n!==this._autoUpdate&&(this._autoUpdate=n,!this._autoUpdate&&this._isAutoUpdating?(Hr.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(Hr.shared.add(this.update,this,ah.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(to.default);ri.default=ro;ro.fromUrls=ro.fromUrl;function sh(e,t){if(!t){var r=e.split("?").shift().toLowerCase();t="video/"+r.substr(r.lastIndexOf(".")+1)}var n=document.createElement("source");return n.src=e,n.type=t,n}var ni={};ni.__esModule=!0;var Nx=Fn,we=Hx(Nx);function Hx(e){return e&&e.__esModule?e:{default:e}}function Xx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Wx=function(){function e(){Xx(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(r,n,i){var a=n.width,o=n.height;if(i){var s=r.width/2/a,u=r.height/2/o,l=r.x/a+s,h=r.y/o+u;i=we.default.add(i,we.default.NW),this.x0=l+s*we.default.uX(i),this.y0=h+u*we.default.uY(i),i=we.default.add(i,2),this.x1=l+s*we.default.uX(i),this.y1=h+u*we.default.uY(i),i=we.default.add(i,2),this.x2=l+s*we.default.uX(i),this.y2=h+u*we.default.uY(i),i=we.default.add(i,2),this.x3=l+s*we.default.uX(i),this.y3=h+u*we.default.uY(i)}else this.x0=r.x/a,this.y0=r.y/o,this.x1=(r.x+r.width)/a,this.y1=r.y/o,this.x2=(r.x+r.width)/a,this.y2=(r.y+r.height)/o,this.x3=r.x/a,this.y3=(r.y+r.height)/o;this.uvsUint32[0]=(Math.round(this.y0*65535)&65535)<<16|Math.round(this.x0*65535)&65535,this.uvsUint32[1]=(Math.round(this.y1*65535)&65535)<<16|Math.round(this.x1*65535)&65535,this.uvsUint32[2]=(Math.round(this.y2*65535)&65535)<<16|Math.round(this.x2*65535)&65535,this.uvsUint32[3]=(Math.round(this.y3*65535)&65535)<<16|Math.round(this.x3*65535)&65535},e}();ni.default=Wx;ke.__esModule=!0;var Vx=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),qx=it,qe=Wr(qx),Yx=ri,uh=Wr(Yx),zx=ni,Kx=Wr(zx),Zx=rt.exports,Jx=Wr(Zx),Xr=ce,Ie=L,Qx=ue,jx=Wr(Qx);function Wr(e){return e&&e.__esModule?e:{default:e}}function eT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tT(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function rT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ye=function(e){rT(t,e);function t(r,n,i,a,o,s){eT(this,t);var u=tT(this,e.call(this));if(u.noFrame=!1,n||(u.noFrame=!0,n=new Xr.Rectangle(0,0,1,1)),r instanceof t&&(r=r.baseTexture),u.baseTexture=r,u._frame=n,u.trim=a,u.valid=!1,u.requiresUpdate=!1,u._uvs=null,u.orig=i||n,u._rotate=Number(o||0),o===!0)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return r.hasLoaded?(u.noFrame&&(n=new Xr.Rectangle(0,0,r.width,r.height),r.on("update",u.onBaseTextureUpdated,u)),u.frame=n):r.once("loaded",u.onBaseTextureLoaded,u),u.defaultAnchor=s?new Xr.Point(s.x,s.y):new Xr.Point(0,0),u._updateID=0,u.transform=null,u.textureCacheIds=[],u}return t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(n){this._updateID++,this.noFrame?this.frame=new Xr.Rectangle(0,0,n.width,n.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(n){this._updateID++,this._frame.width=n.width,this._frame.height=n.height,this.emit("update",this)},t.prototype.destroy=function(n){this.baseTexture&&(n&&(Ie.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new Kx.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(n,i,a,o){var s=Ie.TextureCache[n];return s||(s=new t(qe.default.fromImage(n,i,a,o)),t.addToCache(s,n)),s},t.fromFrame=function(n){var i=Ie.TextureCache[n];if(!i)throw new Error('The frameId "'+n+'" does not exist in the texture cache');return i},t.fromCanvas=function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas";return new t(qe.default.fromCanvas(n,i,a))},t.fromVideo=function(n,i,a,o){return typeof n=="string"?t.fromVideoUrl(n,i,a,o):new t(uh.default.fromVideo(n,i,o))},t.fromVideoUrl=function(n,i,a,o){return new t(uh.default.fromUrl(n,i,a,o))},t.from=function(n){if(typeof n=="string"){var i=Ie.TextureCache[n];if(!i){var a=n.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)!==null;return a?t.fromVideoUrl(n):t.fromImage(n)}return i}else{if(n instanceof HTMLImageElement)return new t(qe.default.from(n));if(n instanceof HTMLCanvasElement)return t.fromCanvas(n,jx.default.SCALE_MODE,"HTMLCanvasElement");if(n instanceof HTMLVideoElement)return t.fromVideo(n);if(n instanceof qe.default)return new t(n)}return n},t.fromLoader=function(n,i,a){var o=new qe.default(n,void 0,(0,Ie.getResolutionOfUrl)(i)),s=new t(o);return o.imageUrl=i,a||(a=i),qe.default.addToCache(s.baseTexture,a),t.addToCache(s,a),a!==i&&(qe.default.addToCache(s.baseTexture,i),t.addToCache(s,i)),s},t.addToCache=function(n,i){i&&(n.textureCacheIds.indexOf(i)===-1&&n.textureCacheIds.push(i),Ie.TextureCache[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),Ie.TextureCache[i]=n)},t.removeFromCache=function(n){if(typeof n=="string"){var i=Ie.TextureCache[n];if(i){var a=i.textureCacheIds.indexOf(n);return a>-1&&i.textureCacheIds.splice(a,1),delete Ie.TextureCache[n],i}}else if(n&&n.textureCacheIds){for(var o=0;o<n.textureCacheIds.length;++o)Ie.TextureCache[n.textureCacheIds[o]]===n&&delete Ie.TextureCache[n.textureCacheIds[o]];return n.textureCacheIds.length=0,n}return null},Vx(t,[{key:"frame",get:function(){return this._frame},set:function(n){this._frame=n,this.noFrame=!1;var i=n.x,a=n.y,o=n.width,s=n.height,u=i+o>this.baseTexture.width,l=a+s>this.baseTexture.height;if(u||l){var h=u&&l?"and":"or",f="X: "+i+" + "+o+" = "+(i+o)+" > "+this.baseTexture.width,d="Y: "+a+" + "+s+" = "+(a+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(f+" "+h+" "+d))}this.valid=o&&s&&this.baseTexture.hasLoaded,!this.trim&&!this.rotate&&(this.orig=n),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(n){this._rotate=n,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(Jx.default);ke.default=Ye;function nT(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new Ye(new qe.default(e))}function ii(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}Ye.EMPTY=new Ye(new qe.default);ii(Ye.EMPTY);ii(Ye.EMPTY.baseTexture);Ye.WHITE=nT();ii(Ye.WHITE);ii(Ye.WHITE.baseTexture);Fr.__esModule=!0;var iT=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),no=ce,Vr=L,aT=k,oT=ke,ai=lh(oT),sT=Dt,uT=lh(sT);function lh(e){return e&&e.__esModule?e:{default:e}}function lT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hT(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function fT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qr=new no.Point,cT=function(e){fT(t,e);function t(r){lT(this,t);var n=hT(this,e.call(this));return n._anchor=new no.ObservablePoint(n._onAnchorUpdate,n,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=aT.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=r||ai.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,Vr.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,Vr.sign)(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){if(!(this._transformID===this.transform._worldID&&this._textureID===this._texture._updateID)){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var n=this._texture,i=this.transform.worldTransform,a=i.a,o=i.b,s=i.c,u=i.d,l=i.tx,h=i.ty,f=this.vertexData,d=n.trim,p=n.orig,c=this._anchor,_=0,v=0,g=0,m=0;d?(v=d.x-c._x*p.width,_=v+d.width,m=d.y-c._y*p.height,g=m+d.height):(v=-c._x*p.width,_=v+p.width,m=-c._y*p.height,g=m+p.height),f[0]=a*v+s*m+l,f[1]=u*m+o*v+h,f[2]=a*_+s*m+l,f[3]=u*m+o*_+h,f[4]=a*_+s*g+l,f[5]=u*g+o*_+h,f[6]=a*v+s*g+l,f[7]=u*g+o*v+h}},t.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var n=this._texture,i=this.vertexTrimmedData,a=n.orig,o=this._anchor,s=this.transform.worldTransform,u=s.a,l=s.b,h=s.c,f=s.d,d=s.tx,p=s.ty,c=-o._x*a.width,_=c+a.width,v=-o._y*a.height,g=v+a.height;i[0]=u*c+h*v+d,i[1]=f*v+l*c+p,i[2]=u*_+h*v+d,i[3]=f*v+l*_+p,i[4]=u*_+h*g+d,i[5]=f*g+l*_+p,i[6]=u*c+h*g+d,i[7]=f*g+l*c+p},t.prototype._renderWebGL=function(n){this.calculateVertices(),n.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(n){n.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var n=this._texture.trim,i=this._texture.orig;!n||n.width===i.width&&n.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(n){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),n||(this._localBoundsRect||(this._localBoundsRect=new no.Rectangle),n=this._localBoundsRect),this._bounds.getRectangle(n)):e.prototype.getLocalBounds.call(this,n)},t.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,qr);var i=this._texture.orig.width,a=this._texture.orig.height,o=-i*this.anchor.x,s=0;return!!(qr.x>=o&&qr.x<o+i&&(s=-a*this.anchor.y,qr.y>=s&&qr.y<s+a))},t.prototype.destroy=function(n){e.prototype.destroy.call(this,n),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof n=="boolean"?n:n&&n.texture;if(i){var a=typeof n=="boolean"?n:n&&n.baseTexture;this._texture.destroy(!!a)}this._texture=null,this.shader=null},t.from=function(n){return new t(ai.default.from(n))},t.fromFrame=function(n){var i=Vr.TextureCache[n];if(!i)throw new Error('The frameId "'+n+'" does not exist in the texture cache');return new t(i)},t.fromImage=function(n,i,a){return new t(ai.default.fromImage(n,i,a))},iT(t,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){var i=(0,Vr.sign)(this.scale.x)||1;this.scale.x=i*n/this._texture.orig.width,this._width=n}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){var i=(0,Vr.sign)(this.scale.y)||1;this.scale.y=i*n/this._texture.orig.height,this._height=n}},{key:"anchor",get:function(){return this._anchor},set:function(n){this._anchor.copy(n)}},{key:"tint",get:function(){return this._tint},set:function(n){this._tint=n,this._tintRGB=(n>>16)+(n&65280)+((n&255)<<16)}},{key:"texture",get:function(){return this._texture},set:function(n){this._texture!==n&&(this._texture=n||ai.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,n&&(n.baseTexture.hasLoaded?this._onTextureUpdate():n.once("update",this._onTextureUpdate,this)))}}]),t}(uT.default);Fr.default=cT;var io={},Lt={},oi={},Yr={},si={};si.__esModule=!0;var dT=it,pT=fh(dT),vT=ue,hh=fh(vT);function fh(e){return e&&e.__esModule?e:{default:e}}function _T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gT(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var mT=function(e){yT(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,i=arguments[2],a=arguments[3];_T(this,t);var o=gT(this,e.call(this,null,i));return o.resolution=a||hh.default.RESOLUTION,o.width=Math.ceil(r),o.height=Math.ceil(n),o.realWidth=o.width*o.resolution,o.realHeight=o.height*o.resolution,o.scaleMode=i!==void 0?i:hh.default.SCALE_MODE,o.hasLoaded=!0,o._glRenderTargets={},o._canvasRenderTarget=null,o.valid=!1,o}return t.prototype.resize=function(n,i){n=Math.ceil(n),i=Math.ceil(i),!(n===this.width&&i===this.height)&&(this.valid=n>0&&i>0,this.width=n,this.height=i,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,!!this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(pT.default);si.default=mT;Yr.__esModule=!0;var xT=si,ao=ch(xT),TT=ke,ET=ch(TT);function ch(e){return e&&e.__esModule?e:{default:e}}function bT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ST(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function wT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var PT=function(e){wT(t,e);function t(r,n){bT(this,t);var i=null;if(!(r instanceof ao.default)){var a=arguments[1],o=arguments[2],s=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+o+") instead of the ctor directly."),i=arguments[0],n=null,r=new ao.default(a,o,s,u)}var l=ST(this,e.call(this,r,n));return l.legacyRenderer=i,l.valid=!0,l._updateUvs(),l}return t.prototype.resize=function(n,i,a){n=Math.ceil(n),i=Math.ceil(i),this.valid=n>0&&i>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=i,a||this.baseTexture.resize(n,i),this._updateUvs()},t.create=function(n,i,a,o){return new t(new ao.default(n,i,a,o))},t}(ET.default);Yr.default=PT;oi.__esModule=!0;var RT=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),oo=L,dh=ce,ph=k,MT=ue,so=ui(MT),OT=Dt,CT=ui(OT),AT=Yr,DT=ui(AT),IT=rt.exports,LT=ui(IT);function ui(e){return e&&e.__esModule?e:{default:e}}function $T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BT(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function FT(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var uo=new dh.Matrix,GT=function(e){FT(t,e);function t(r,n,i,a){$T(this,t);var o=BT(this,e.call(this));return(0,oo.sayHello)(r),typeof n=="number"&&(n=Object.assign({width:n,height:i||so.default.RENDER_OPTIONS.height},a)),n=Object.assign({},so.default.RENDER_OPTIONS,n),o.options=n,o.type=ph.RENDERER_TYPE.UNKNOWN,o.screen=new dh.Rectangle(0,0,n.width,n.height),o.view=n.view||document.createElement("canvas"),o.resolution=n.resolution||so.default.RESOLUTION,o.transparent=n.transparent,o.autoResize=n.autoResize||!1,o.blendModes=null,o.preserveDrawingBuffer=n.preserveDrawingBuffer,o.clearBeforeRender=n.clearBeforeRender,o.roundPixels=n.roundPixels,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,0],o._backgroundColorString="#000000",o.backgroundColor=n.backgroundColor||o._backgroundColor,o._tempDisplayObjectParent=new CT.default,o._lastObjectRendered=o._tempDisplayObjectParent,o}return t.prototype.resize=function(n,i){this.screen.width=n,this.screen.height=i,this.view.width=n*this.resolution,this.view.height=i*this.resolution,this.autoResize&&(this.view.style.width=n+"px",this.view.style.height=i+"px")},t.prototype.generateTexture=function(n,i,a,o){o=o||n.getLocalBounds();var s=DT.default.create(o.width|0,o.height|0,i,a);return uo.tx=-o.x,uo.ty=-o.y,this.render(n,s,!1,uo,!!n.parent),s},t.prototype.destroy=function(n){n&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=ph.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},RT(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(n){this._backgroundColor=n,this._backgroundColorString=(0,oo.hex2string)(n),(0,oo.hex2rgb)(n,this._backgroundColorRgba)}}]),t}(LT.default);oi.default=GT;var lo={};lo.__esModule=!0;var zr=k;function kT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var UT=function(){function e(t){kT(this,e),this.renderer=t}return e.prototype.pushMask=function(r){var n=this.renderer;n.context.save();var i=r.alpha,a=r.transform.worldTransform,o=n.resolution;n.context.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o,a.ty*o),r._texture||(this.renderGraphicsShape(r),n.context.clip()),r.worldAlpha=i},e.prototype.renderGraphicsShape=function(r){var n=this.renderer.context,i=r.graphicsData.length;if(i!==0){n.beginPath();for(var a=0;a<i;a++){var o=r.graphicsData[a],s=o.shape;if(o.type===zr.SHAPES.POLY){var u=s.points,l=o.holes,h=void 0,f=void 0;n.moveTo(u[0],u[1]);for(var d=2;d<u.length;d+=2)n.lineTo(u[d],u[d+1]);if(u[0]===u[u.length-2]&&u[1]===u[u.length-1]&&n.closePath(),l.length>0){h=0;for(var p=0;p<u.length;p+=2)h+=u[p]*u[p+3]-u[p+1]*u[p+2];for(var c=0;c<l.length;c++){u=l[c].points,f=0;for(var _=0;_<u.length;_+=2)f+=u[_]*u[_+3]-u[_+1]*u[_+2];if(n.moveTo(u[0],u[1]),f*h<0)for(var v=2;v<u.length;v+=2)n.lineTo(u[v],u[v+1]);else for(var g=u.length-2;g>=2;g-=2)n.lineTo(u[g],u[g+1])}}}else if(o.type===zr.SHAPES.RECT)n.rect(s.x,s.y,s.width,s.height),n.closePath();else if(o.type===zr.SHAPES.CIRC)n.arc(s.x,s.y,s.radius,0,2*Math.PI),n.closePath();else if(o.type===zr.SHAPES.ELIP){var m=s.width*2,y=s.height*2,x=s.x-m/2,T=s.y-y/2,E=.5522848,S=m/2*E,b=y/2*E,w=x+m,P=T+y,A=x+m/2,$=T+y/2;n.moveTo(x,$),n.bezierCurveTo(x,$-b,A-S,T,A,T),n.bezierCurveTo(A+S,T,w,$-b,w,$),n.bezierCurveTo(w,$+b,A+S,P,A,P),n.bezierCurveTo(A-S,P,x,$+b,x,$),n.closePath()}else if(o.type===zr.SHAPES.RREC){var B=s.x,I=s.y,G=s.width,F=s.height,U=s.radius,V=Math.min(G,F)/2|0;U=U>V?V:U,n.moveTo(B,I+U),n.lineTo(B,I+F-U),n.quadraticCurveTo(B,I+F,B+U,I+F),n.lineTo(B+G-U,I+F),n.quadraticCurveTo(B+G,I+F,B+G,I+F-U),n.lineTo(B+G,I+U),n.quadraticCurveTo(B+G,I,B+G-U,I),n.lineTo(B+U,I),n.quadraticCurveTo(B,I,B,I+U),n.closePath()}}}},e.prototype.popMask=function(r){r.context.restore(),r.invalidateBlendMode()},e.prototype.destroy=function(){},e}();lo.default=UT;var li={};li.__esModule=!0;var NT=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),HT=ue,XT=WT(HT);function WT(e){return e&&e.__esModule?e:{default:e}}function VT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var qT=function(){function e(t,r,n){VT(this,e),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||XT.default.RESOLUTION,this.resize(t,r)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(r,n){this.canvas.width=r*this.resolution,this.canvas.height=n*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},NT(e,[{key:"width",get:function(){return this.canvas.width},set:function(r){this.canvas.width=r}},{key:"height",get:function(){return this.canvas.height},set:function(r){this.canvas.height=r}}]),e}();li.default=qT;var ho={},hi={};hi.__esModule=!0;hi.default=YT;function vh(e){var t=document.createElement("canvas");t.width=6,t.height=1;var r=t.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,6,1),t}function YT(){if(typeof document=="undefined")return!1;var e=vh("#ff00ff"),t=vh("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var n=r.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(e,0,0),n.drawImage(t,2,0);var i=n.getImageData(2,0,1,1);if(!i)return!1;var a=i.data;return a[0]===255&&a[1]===0&&a[2]===0}ho.__esModule=!0;ho.default=JT;var z=k,zT=hi,KT=ZT(zT);function ZT(e){return e&&e.__esModule?e:{default:e}}function JT(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(0,KT.default)()?(e[z.BLEND_MODES.NORMAL]="source-over",e[z.BLEND_MODES.ADD]="lighter",e[z.BLEND_MODES.MULTIPLY]="multiply",e[z.BLEND_MODES.SCREEN]="screen",e[z.BLEND_MODES.OVERLAY]="overlay",e[z.BLEND_MODES.DARKEN]="darken",e[z.BLEND_MODES.LIGHTEN]="lighten",e[z.BLEND_MODES.COLOR_DODGE]="color-dodge",e[z.BLEND_MODES.COLOR_BURN]="color-burn",e[z.BLEND_MODES.HARD_LIGHT]="hard-light",e[z.BLEND_MODES.SOFT_LIGHT]="soft-light",e[z.BLEND_MODES.DIFFERENCE]="difference",e[z.BLEND_MODES.EXCLUSION]="exclusion",e[z.BLEND_MODES.HUE]="hue",e[z.BLEND_MODES.SATURATION]="saturate",e[z.BLEND_MODES.COLOR]="color",e[z.BLEND_MODES.LUMINOSITY]="luminosity"):(e[z.BLEND_MODES.NORMAL]="source-over",e[z.BLEND_MODES.ADD]="lighter",e[z.BLEND_MODES.MULTIPLY]="source-over",e[z.BLEND_MODES.SCREEN]="source-over",e[z.BLEND_MODES.OVERLAY]="source-over",e[z.BLEND_MODES.DARKEN]="source-over",e[z.BLEND_MODES.LIGHTEN]="source-over",e[z.BLEND_MODES.COLOR_DODGE]="source-over",e[z.BLEND_MODES.COLOR_BURN]="source-over",e[z.BLEND_MODES.HARD_LIGHT]="source-over",e[z.BLEND_MODES.SOFT_LIGHT]="source-over",e[z.BLEND_MODES.DIFFERENCE]="source-over",e[z.BLEND_MODES.EXCLUSION]="source-over",e[z.BLEND_MODES.HUE]="source-over",e[z.BLEND_MODES.SATURATION]="source-over",e[z.BLEND_MODES.COLOR]="source-over",e[z.BLEND_MODES.LUMINOSITY]="source-over"),e[z.BLEND_MODES.NORMAL_NPM]=e[z.BLEND_MODES.NORMAL],e[z.BLEND_MODES.ADD_NPM]=e[z.BLEND_MODES.ADD],e[z.BLEND_MODES.SCREEN_NPM]=e[z.BLEND_MODES.SCREEN],e}Lt.__esModule=!0;var QT=oi,jT=Kr(QT),eE=lo,tE=Kr(eE),rE=li,nE=Kr(rE),iE=ho,aE=Kr(iE),oE=L,fi=k,sE=ue,uE=Kr(sE);function Kr(e){return e&&e.__esModule?e:{default:e}}function lE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hE(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function fE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _h=function(e){fE(t,e);function t(r,n,i){lE(this,t);var a=hE(this,e.call(this,"Canvas",r,n,i));return a.type=fi.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new tE.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,aE.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return t.prototype.render=function(n,i,a,o,s){if(!!this.view){this.renderingToScreen=!i,this.emit("prerender");var u=this.resolution;i?(i=i.baseTexture||i,i._canvasRenderTarget||(i._canvasRenderTarget=new nE.default(i.width,i.height,i.resolution),i.source=i._canvasRenderTarget.canvas,i.valid=!0),this.context=i._canvasRenderTarget.context,this.resolution=i._canvasRenderTarget.resolution):this.context=this.rootContext;var l=this.context;if(i||(this._lastObjectRendered=n),!s){var h=n.parent,f=this._tempDisplayObjectParent.transform.worldTransform;o?(o.copy(f),this._tempDisplayObjectParent.transform._worldID=-1):f.identity(),n.parent=this._tempDisplayObjectParent,n.updateTransform(),n.parent=h}l.save(),l.setTransform(1,0,0,1,0,0),l.globalAlpha=1,this._activeBlendMode=fi.BLEND_MODES.NORMAL,l.globalCompositeOperation=this.blendModes[fi.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(l.fillStyle="black",l.clear()),(a!==void 0?a:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?l.clearRect(0,0,this.width,this.height):(l.fillStyle=this._backgroundColorString,l.fillRect(0,0,this.width,this.height)));var d=this.context;this.context=l,n.renderCanvas(this),this.context=d,l.restore(),this.resolution=u,this.emit("postrender")}},t.prototype.clear=function(n){var i=this.context;n=n||this._backgroundColorString,!this.transparent&&n?(i.fillStyle=n,i.fillRect(0,0,this.width,this.height)):i.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(n){this._activeBlendMode!==n&&(this._activeBlendMode=n,this.context.globalCompositeOperation=this.blendModes[n])},t.prototype.destroy=function(n){this.destroyPlugins(),e.prototype.destroy.call(this,n),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(n,i){e.prototype.resize.call(this,n,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=uE.default.SCALE_MODE===fi.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(jT.default);Lt.default=_h;oE.pluginTarget.mixin(_h);var Jt={};Jt.__esModule=!0;var fo=L,cE=hi,dE=pE(cE);function pE(e){return e&&e.__esModule?e:{default:e}}var Le={getTintedTexture:function(t,r){var n=t._texture;r=Le.roundColor(r);var i="#"+("00000"+(r|0).toString(16)).substr(-6);n.tintCache=n.tintCache||{};var a=n.tintCache[i],o=void 0;if(a){if(a.tintId===n._updateID)return n.tintCache[i];o=n.tintCache[i]}else o=Le.canvas||document.createElement("canvas");if(Le.tintMethod(n,r,o),o.tintId=n._updateID,Le.convertTintToImage){var s=new Image;s.src=o.toDataURL(),n.tintCache[i]=s}else n.tintCache[i]=o,Le.canvas=null;return o},tintWithMultiply:function(t,r,n){var i=n.getContext("2d"),a=t._frame.clone(),o=t.baseTexture.resolution;a.x*=o,a.y*=o,a.width*=o,a.height*=o,n.width=Math.ceil(a.width),n.height=Math.ceil(a.height),i.save(),i.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6),i.fillRect(0,0,a.width,a.height),i.globalCompositeOperation="multiply",i.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height),i.restore()},tintWithOverlay:function(t,r,n){var i=n.getContext("2d"),a=t._frame.clone(),o=t.baseTexture.resolution;a.x*=o,a.y*=o,a.width*=o,a.height*=o,n.width=Math.ceil(a.width),n.height=Math.ceil(a.height),i.save(),i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(r|0).toString(16)).substr(-6),i.fillRect(0,0,a.width,a.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height),i.restore()},tintWithPerPixel:function(t,r,n){var i=n.getContext("2d"),a=t._frame.clone(),o=t.baseTexture.resolution;a.x*=o,a.y*=o,a.width*=o,a.height*=o,n.width=Math.ceil(a.width),n.height=Math.ceil(a.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height),i.restore();for(var s=(0,fo.hex2rgb)(r),u=s[0],l=s[1],h=s[2],f=i.getImageData(0,0,a.width,a.height),d=f.data,p=0;p<d.length;p+=4)d[p+0]*=u,d[p+1]*=l,d[p+2]*=h;i.putImageData(f,0,0)},roundColor:function(t){var r=Le.cacheStepsPerColorChannel,n=(0,fo.hex2rgb)(t);return n[0]=Math.min(255,n[0]/r*r),n[1]=Math.min(255,n[1]/r*r),n[2]=Math.min(255,n[2]/r*r),(0,fo.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,dE.default)(),tintMethod:0};Le.tintMethod=Le.canUseMultiply?Le.tintWithMultiply:Le.tintWithPerPixel;Jt.default=Le;io.__esModule=!0;var vE=Lt,_E=yh(vE),gE=k,gh=ce,yE=Jt,mE=yh(yE);function yh(e){return e&&e.__esModule?e:{default:e}}function xE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var mh=new gh.Matrix,xh=function(){function e(t){xE(this,e),this.renderer=t}return e.prototype.render=function(r){var n=r._texture,i=this.renderer,a=n._frame.width,o=n._frame.height,s=r.transform.worldTransform,u=0,l=0;if(!(n.orig.width<=0||n.orig.height<=0||!n.baseTexture.source)&&(i.setBlendMode(r.blendMode),n.valid)){i.context.globalAlpha=r.worldAlpha;var h=n.baseTexture.scaleMode===gE.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==h&&(i.context[i.smoothProperty]=h),n.trim?(u=n.trim.width/2+n.trim.x-r.anchor.x*n.orig.width,l=n.trim.height/2+n.trim.y-r.anchor.y*n.orig.height):(u=(.5-r.anchor.x)*n.orig.width,l=(.5-r.anchor.y)*n.orig.height),n.rotate&&(s.copy(mh),s=mh,gh.GroupD8.matrixAppendRotationInv(s,n.rotate,u,l),u=0,l=0),u-=a/2,l-=o/2,i.roundPixels?(i.context.setTransform(s.a,s.b,s.c,s.d,s.tx*i.resolution|0,s.ty*i.resolution|0),u=u|0,l=l|0):i.context.setTransform(s.a,s.b,s.c,s.d,s.tx*i.resolution,s.ty*i.resolution);var f=n.baseTexture.resolution;r.tint!==16777215?((r.cachedTint!==r.tint||r.tintedTexture.tintId!==r._texture._updateID)&&(r.cachedTint=r.tint,r.tintedTexture=mE.default.getTintedTexture(r,r.tint)),i.context.drawImage(r.tintedTexture,0,0,a*f,o*f,u*i.resolution,l*i.resolution,a*i.resolution,o*i.resolution)):i.context.drawImage(n.baseTexture.source,n._frame.x*f,n._frame.y*f,a*f,o*f,u*i.resolution,l*i.resolution,a*i.resolution,o*i.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();io.default=xh;_E.default.registerPlugin("sprite",xh);var co={},Qt={},$t={};$t.__esModule=!0;function TE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var EE=function(){function e(t){TE(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();$t.default=EE;Qt.__esModule=!0;var bE=$t,SE=wE(bE);function wE(e){return e&&e.__esModule?e:{default:e}}function PE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RE(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ME(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var OE=function(e){ME(t,e);function t(){return PE(this,t),RE(this,e.apply(this,arguments))}return t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(n){},t}(SE.default);Qt.default=OE;var jt={},po={},ci={},di={},vo={};vo.__esModule=!0;vo.default=LE;var CE=Se.exports,AE=DE(CE);function DE(e){return e&&e.__esModule?e:{default:e}}var IE=AE.default.shader.defaultValue;function LE(e,t,r){var n=Th(e),i=Th(t);return Object.assign(n,i)}function Th(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},n=void 0,i=e.replace(/\s+/g," ").split(/\s*;\s*/),a=0;a<i.length;a++){var o=i[a].trim();if(o.indexOf("uniform")>-1){var s=o.split(" "),u=s[1],l=s[2],h=1;l.indexOf("[")>-1&&(n=l.split(/\[|]/),l=n[0],h*=Number(n[1])),l.match(t)||(r[l]={value:IE(u,h),name:l,type:u})}}return r}di.__esModule=!0;var $E=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),BE=vo,FE=Eh(BE),GE=L,kE=k,UE=ue,NE=Eh(UE);function Eh(e){return e&&e.__esModule?e:{default:e}}function HE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _o={},XE=function(){function e(t,r,n){HE(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this._blendMode=kE.BLEND_MODES.NORMAL,this.uniformData=n||(0,FE.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var i in this.uniformData)this.uniforms[i]=this.uniformData[i].value,this.uniformData[i].type&&(this.uniformData[i].type=this.uniformData[i].type.toLowerCase());this.glShaders={},_o[this.vertexSrc+this.fragmentSrc]||(_o[this.vertexSrc+this.fragmentSrc]=(0,GE.uid)()),this.glShaderKey=_o[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=NE.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(r,n,i,a,o){r.applyFilter(this,n,i,a)},$E(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(r){this._blendMode=r}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join(`
`)}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join(`
`)}}]),e}();di.default=XE;var WE={},VE=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:WE}),qE=Ru(VE),pi={};pi.__esModule=!0;var YE=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),zE=Sr,bh=KE(zE);function KE(e){return e&&e.__esModule?e:{default:e}}function ZE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Sh=new bh.default,JE=function(){function e(t,r){ZE(this,e),this._texture=t,this.mapCoord=new bh.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=typeof r=="undefined"?.5:r}return e.prototype.multiplyUvs=function(r,n){n===void 0&&(n=r);for(var i=this.mapCoord,a=0;a<r.length;a+=2){var o=r[a],s=r[a+1];n[a]=o*i.a+s*i.c+i.tx,n[a+1]=o*i.b+s*i.d+i.ty}return n},e.prototype.update=function(r){var n=this._texture;if(!n||!n.valid||!r&&this._lastTextureID===n._updateID)return!1;this._lastTextureID=n._updateID;var i=n._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var a=n.orig,o=n.trim;o&&(Sh.set(a.width/o.width,0,0,a.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(Sh));var s=n.baseTexture,u=this.uClampFrame,l=this.clampMargin/s.resolution,h=this.clampOffset;return u[0]=(n._frame.x+l+h)/s.width,u[1]=(n._frame.y+l+h)/s.height,u[2]=(n._frame.x+n._frame.width-l+h)/s.width,u[3]=(n._frame.y+n._frame.height-l+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,!0},YE(e,[{key:"texture",get:function(){return this._texture},set:function(r){this._texture=r,this._lastTextureID=-1}}]),e}();pi.default=JE;ci.__esModule=!0;var QE=di,jE=wh(QE),eb=ce,tb=pi,rb=wh(tb);function wh(e){return e&&e.__esModule?e:{default:e}}function nb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ib(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ab(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ob=function(e){ab(t,e);function t(r){nb(this,t);var n=new eb.Matrix,i=ib(this,e.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);

    original *= (masky.r * masky.a * alpha * clip);

    gl_FragColor = original;
}
`));return r.renderable=!1,i.maskSprite=r,i.maskMatrix=n,i}return t.prototype.apply=function(n,i,a,o){var s=this.maskSprite,u=this.maskSprite.texture;!u.valid||(u.transform||(u.transform=new rb.default(u,0)),u.transform.update(),this.uniforms.mask=u,this.uniforms.otherMatrix=n.calculateSpriteMatrix(this.maskMatrix,s).prepend(u.transform.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=u.transform.uClampFrame,n.applyFilter(this,i,a,o))},t}(jE.default);ci.default=ob;po.__esModule=!0;var sb=$t,ub=Ph(sb),lb=ci,hb=Ph(lb);function Ph(e){return e&&e.__esModule?e:{default:e}}function fb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function db(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var pb=function(e){db(t,e);function t(r){fb(this,t);var n=cb(this,e.call(this,r));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return t.prototype.pushMask=function(n,i){if(i.texture)this.pushSpriteMask(n,i);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&i.isFastRect()){var a=i.worldTransform,o=Math.atan2(a.b,a.a);o=Math.round(o*(180/Math.PI)),o%90?this.pushStencilMask(i):this.pushScissorMask(n,i)}else this.pushStencilMask(i)},t.prototype.popMask=function(n,i){i.texture?this.popSpriteMask(n,i):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(n,i):this.popStencilMask(n,i)},t.prototype.pushSpriteMask=function(n,i){var a=this.alphaMaskPool[this.alphaMaskIndex];a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new hb.default(i)]),a[0].resolution=this.renderer.resolution,a[0].maskSprite=i;var o=n.filterArea;n.filterArea=i.getBounds(!0),this.renderer.filterManager.pushFilter(n,a),n.filterArea=o,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(n){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(n)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(n,i){i.renderable=!0;var a=this.renderer._activeRenderTarget,o=i.getBounds();o.fit(a.size),i.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var s=this.renderer.resolution;this.renderer.gl.scissor(o.x*s,(a.root?a.size.height-o.y-o.height:o.y)*s,o.width*s,o.height*s),this.scissorRenderTarget=a,this.scissorData=i,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var n=this.renderer.gl;n.disable(n.SCISSOR_TEST)},t}(ub.default);po.default=pb;var go={};go.__esModule=!0;var vb=$t,Rh=_b(vb);function _b(e){return e&&e.__esModule?e:{default:e}}function gb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function mb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xb=function(e){mb(t,e);function t(r){gb(this,t);var n=yb(this,e.call(this,r));return n.stencilMaskStack=null,n}return t.prototype.setMaskStack=function(n){this.stencilMaskStack=n;var i=this.renderer.gl;n.length===0?i.disable(i.STENCIL_TEST):i.enable(i.STENCIL_TEST)},t.prototype.pushStencil=function(n){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var i=this.renderer.gl,a=this.stencilMaskStack.length;a===0&&i.enable(i.STENCIL_TEST),this.stencilMaskStack.push(n),i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,a,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),this.renderer.plugins.graphics.render(n),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var n=this.renderer.gl,i=this.stencilMaskStack.pop();this.stencilMaskStack.length===0?(n.disable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),n.clearStencil(0)):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),this.renderer.plugins.graphics.render(i),this._useCurrent())},t.prototype._useCurrent=function(){var n=this.renderer.gl;n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){Rh.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(Rh.default);go.default=xb;var yo={},er={};er.__esModule=!0;var mo=ce,Tb=k,Eb=ue,Mh=bb(Eb),Oh=Se.exports;function bb(e){return e&&e.__esModule?e:{default:e}}function Sb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var wb=function(){function e(t,r,n,i,a,o){Sb(this,e),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new mo.Rectangle(0,0,1,1),this.resolution=a||Mh.default.RESOLUTION,this.projectionMatrix=new mo.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new mo.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=i!==void 0?i:Mh.default.SCALE_MODE,this.root=o||!1,this.root?(this.frameBuffer=new Oh.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=Oh.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===Tb.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(r,n)}return e.prototype.clear=function(r){var n=r||this.clearColor;this.frameBuffer.clear(n[0],n[1],n[2],n[3])},e.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},e.prototype.setFrame=function(r,n){this.destinationFrame=r||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||this.destinationFrame},e.prototype.activate=function(){var r=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(r.enable(r.SCISSOR_TEST),r.scissor(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):r.disable(r.SCISSOR_TEST),r.viewport(this.destinationFrame.x|0,this.destinationFrame.y|0,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},e.prototype.calculateProjection=function(r,n){var i=this.projectionMatrix;n=n||r,i.identity(),this.root?(i.a=1/r.width*2,i.d=-1/r.height*2,i.tx=-1-n.x*i.a,i.ty=1-n.y*i.d):(i.a=1/r.width*2,i.d=1/r.height*2,i.tx=-1-n.x*i.a,i.ty=-1-n.y*i.d)},e.prototype.resize=function(r,n){if(r=r|0,n=n|0,!(this.size.width===r&&this.size.height===n)){this.size.width=r,this.size.height=n,this.defaultFrame.width=r,this.defaultFrame.height=n,this.frameBuffer.resize(r*this.resolution,n*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},e.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},e}();er.default=wb;var vi={},Zr={};Zr.__esModule=!0;Zr.default=Pb;function Pb(e){for(var t=e*6,r=new Uint16Array(t),n=0,i=0;n<t;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}vi.__esModule=!0;var Rb=Se.exports,xo=Ch(Rb),Mb=Zr,Ob=Ch(Mb);function Ch(e){return e&&e.__esModule?e:{default:e}}function Cb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ab=function(){function e(t,r){Cb(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(8*2);for(var n=0;n<4;n++)this.interleaved[n*4]=this.vertices[n*2],this.interleaved[n*4+1]=this.vertices[n*2+1],this.interleaved[n*4+2]=this.uvs[n*2],this.interleaved[n*4+3]=this.uvs[n*2+1];this.indices=(0,Ob.default)(1),this.vertexBuffer=xo.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=xo.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new xo.default.VertexArrayObject(t,r)}return e.prototype.initVao=function(r){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,r.attributes.aVertexPosition,this.gl.FLOAT,!1,4*4,0).addAttribute(this.vertexBuffer,r.attributes.aTextureCoord,this.gl.FLOAT,!1,4*4,2*4)},e.prototype.map=function(r,n){var i=0,a=0;return this.uvs[0]=i,this.uvs[1]=a,this.uvs[2]=i+n.width/r.width,this.uvs[3]=a,this.uvs[4]=i+n.width/r.width,this.uvs[5]=a+n.height/r.height,this.uvs[6]=i,this.uvs[7]=a+n.height/r.height,i=n.x,a=n.y,this.vertices[0]=i,this.vertices[1]=a,this.vertices[2]=i+n.width,this.vertices[3]=a,this.vertices[4]=i+n.width,this.vertices[5]=a+n.height,this.vertices[6]=i,this.vertices[7]=a+n.height,this},e.prototype.upload=function(){for(var r=0;r<4;r++)this.interleaved[r*4]=this.vertices[r*2],this.interleaved[r*4+1]=this.vertices[r*2+1],this.interleaved[r*4+2]=this.uvs[r*2],this.interleaved[r*4+3]=this.uvs[r*2+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var r=this.gl;r.deleteBuffer(this.vertexBuffer),r.deleteBuffer(this.indexBuffer)},e}();vi.default=Ab;var Bt={};Bt.__esModule=!0;var Db=Se.exports,Ib=ue,Ah=Lb(Ib);function Lb(e){return e&&e.__esModule?e:{default:e}}function $b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Fb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Dh(e,t){if(e instanceof Array){if(e[0].substring(0,9)!=="precision"){var r=e.slice(0);return r.unshift("precision "+t+" float;"),r}}else if(e.trim().substring(0,9)!=="precision")return"precision "+t+` float;
`+e;return e}var Gb=function(e){Fb(t,e);function t(r,n,i,a,o){return $b(this,t),Bb(this,e.call(this,r,Dh(n,o||Ah.default.PRECISION_VERTEX),Dh(i,o||Ah.default.PRECISION_FRAGMENT),void 0,a))}return t}(Db.GLShader);Bt.default=Gb;var Jr={};Jr.__esModule=!0;Jr.calculateScreenSpaceMatrix=Ub;Jr.calculateNormalizedScreenSpaceMatrix=Nb;Jr.calculateSpriteMatrix=Hb;var kb=ce;function Ub(e,t,r){var n=e.identity();return n.translate(t.x/r.width,t.y/r.height),n.scale(r.width,r.height),n}function Nb(e,t,r){var n=e.identity();n.translate(t.x/r.width,t.y/r.height);var i=r.width/t.width,a=r.height/t.height;return n.scale(i,a),n}function Hb(e,t,r,n){var i=n._texture.orig,a=e.set(r.width,0,0,r.height,t.x,t.y),o=n.worldTransform.copy(kb.Matrix.TEMP_MATRIX);return o.invert(),a.prepend(o),a.scale(1/i.width,1/i.height),a.translate(n.anchor.x,n.anchor.y),a}yo.__esModule=!0;var Xb=$t,Wb=Qr(Xb),Vb=er,qb=Qr(Vb),Yb=vi,zb=Qr(Yb),Ih=ce,Kb=Bt,Lh=Qr(Kb),Zb=Jr,To=Qb(Zb),Jb=ae,$h=Qr(Jb);function Qb(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Qr(e){return e&&e.__esModule?e:{default:e}}function jb(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function eS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Bh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Fh=function(){function e(){Bh(this,e),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new Ih.Rectangle,this.destinationFrame=new Ih.Rectangle,this.filters=[]}return e.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},e}(),Eo="screen",tS=function(e){eS(t,e);function t(r){Bh(this,t);var n=jb(this,e.call(this,r));return n.gl=n.renderer.gl,n.quad=new zb.default(n.gl,r.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n.renderer.on("prerender",n.onPrerender,n),n._screenWidth=r.view.width,n._screenHeight=r.view.height,n}return t.prototype.pushFilter=function(n,i){var a=this.renderer,o=this.filterData;if(!o){o=this.renderer._activeRenderTarget.filterStack;var s=new Fh;s.sourceFrame=s.destinationFrame=this.renderer._activeRenderTarget.size,s.renderTarget=a._activeRenderTarget,this.renderer._activeRenderTarget.filterData=o={index:0,stack:[s]},this.filterData=o}var u=o.stack[++o.index],l=o.stack[0].destinationFrame;u||(u=o.stack[o.index]=new Fh);var h=n.filterArea&&n.filterArea.x===0&&n.filterArea.y===0&&n.filterArea.width===a.screen.width&&n.filterArea.height===a.screen.height,f=i[0].resolution,d=i[0].padding|0,p=h?a.screen:n.filterArea||n.getBounds(!0),c=u.sourceFrame,_=u.destinationFrame;c.x=(p.x*f|0)/f,c.y=(p.y*f|0)/f,c.width=(p.width*f|0)/f,c.height=(p.height*f|0)/f,h||(o.stack[0].renderTarget.transform||i[0].autoFit&&c.fit(l),c.pad(d)),_.width=c.width,_.height=c.height;var v=this.getPotRenderTarget(a.gl,c.width,c.height,f);u.target=n,u.filters=i,u.resolution=f,u.renderTarget=v,v.setFrame(_,c),a.bindRenderTarget(v),v.clear()},t.prototype.popFilter=function(){var n=this.filterData,i=n.stack[n.index-1],a=n.stack[n.index];this.quad.map(a.renderTarget.size,a.sourceFrame).upload();var o=a.filters;if(o.length===1)o[0].apply(this,a.renderTarget,i.renderTarget,!1,a),this.freePotRenderTarget(a.renderTarget);else{var s=a.renderTarget,u=this.getPotRenderTarget(this.renderer.gl,a.sourceFrame.width,a.sourceFrame.height,a.resolution);u.setFrame(a.destinationFrame,a.sourceFrame),u.clear();var l=0;for(l=0;l<o.length-1;++l){o[l].apply(this,s,u,!0,a);var h=s;s=u,u=h}o[l].apply(this,s,i.renderTarget,!1,a),this.freePotRenderTarget(s),this.freePotRenderTarget(u)}a.clear(),n.index--,n.index===0&&(this.filterData=null)},t.prototype.applyFilter=function(n,i,a,o){var s=this.renderer,u=s.gl,l=n.glShaders[s.CONTEXT_UID];l||(n.glShaderKey?(l=this.shaderCache[n.glShaderKey],l||(l=new Lh.default(this.gl,n.vertexSrc,n.fragmentSrc),n.glShaders[s.CONTEXT_UID]=this.shaderCache[n.glShaderKey]=l,this.managedFilters.push(n))):(l=n.glShaders[s.CONTEXT_UID]=new Lh.default(this.gl,n.vertexSrc,n.fragmentSrc),this.managedFilters.push(n)),s.bindVao(null),this.quad.initVao(l)),s.bindVao(this.quad.vao),s.bindRenderTarget(a),o&&(u.disable(u.SCISSOR_TEST),s.clear(),u.enable(u.SCISSOR_TEST)),a===s.maskManager.scissorRenderTarget&&s.maskManager.pushScissorMask(null,s.maskManager.scissorData),s.bindShader(l);var h=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=h,this.syncUniforms(l,n),s.state.setBlendMode(n.blendMode),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,i.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),u.bindTexture(u.TEXTURE_2D,h._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(n,i){var a=i.uniformData,o=i.uniforms,s=1,u=void 0;if(n.uniforms.filterArea){u=this.filterData.stack[this.filterData.index];var l=n.uniforms.filterArea;l[0]=u.renderTarget.size.width,l[1]=u.renderTarget.size.height,l[2]=u.sourceFrame.x,l[3]=u.sourceFrame.y,n.uniforms.filterArea=l}if(n.uniforms.filterClamp){u=u||this.filterData.stack[this.filterData.index];var h=n.uniforms.filterClamp;h[0]=0,h[1]=0,h[2]=(u.sourceFrame.width-1)/u.renderTarget.size.width,h[3]=(u.sourceFrame.height-1)/u.renderTarget.size.height,n.uniforms.filterClamp=h}for(var f in a)if(!!n.uniforms.data[f]){var d=a[f].type;if(d==="sampler2d"&&o[f]!==0){if(o[f].baseTexture)n.uniforms[f]=this.renderer.bindTexture(o[f].baseTexture,s);else{n.uniforms[f]=s;var p=this.renderer.gl;this.renderer.boundTextures[s]=this.renderer.emptyTextures[s],p.activeTexture(p.TEXTURE0+s),o[f].texture.bind()}s++}else if(d==="mat3")o[f].a!==void 0?n.uniforms[f]=o[f].toArray(!0):n.uniforms[f]=o[f];else if(d==="vec2")if(o[f].x!==void 0){var c=n.uniforms[f]||new Float32Array(2);c[0]=o[f].x,c[1]=o[f].y,n.uniforms[f]=c}else n.uniforms[f]=o[f];else d==="float"?n.uniforms.data[f].value!==a[f]&&(n.uniforms[f]=o[f]):n.uniforms[f]=o[f]}},t.prototype.getRenderTarget=function(n,i){var a=this.filterData.stack[this.filterData.index],o=this.getPotRenderTarget(this.renderer.gl,a.sourceFrame.width,a.sourceFrame.height,i||a.resolution);return o.setFrame(a.destinationFrame,a.sourceFrame),o},t.prototype.returnRenderTarget=function(n){this.freePotRenderTarget(n)},t.prototype.calculateScreenSpaceMatrix=function(n){var i=this.filterData.stack[this.filterData.index];return To.calculateScreenSpaceMatrix(n,i.sourceFrame,i.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(n){var i=this.filterData.stack[this.filterData.index];return To.calculateNormalizedScreenSpaceMatrix(n,i.sourceFrame,i.renderTarget.size,i.destinationFrame)},t.prototype.calculateSpriteMatrix=function(n,i){var a=this.filterData.stack[this.filterData.index];return To.calculateSpriteMatrix(n,a.sourceFrame,a.renderTarget.size,i)},t.prototype.destroy=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.renderer,a=this.managedFilters;i.off("prerender",this.onPrerender,this);for(var o=0;o<a.length;o++)n||a[o].glShaders[i.CONTEXT_UID].destroy(),delete a[o].glShaders[i.CONTEXT_UID];this.shaderCache={},n?this.pool={}:this.emptyPool()},t.prototype.getPotRenderTarget=function(n,i,a,o){var s=Eo;i*=o,a*=o,(i!==this._screenWidth||a!==this._screenHeight)&&(i=$h.default.nextPow2(i),a=$h.default.nextPow2(a),s=(i&65535)<<16|a&65535),this.pool[s]||(this.pool[s]=[]);var u=this.pool[s].pop();if(!u){var l=this.renderer.boundTextures[0];n.activeTexture(n.TEXTURE0),u=new qb.default(n,i,a,null,1),n.bindTexture(n.TEXTURE_2D,l._glTextures[this.renderer.CONTEXT_UID].texture)}return u.resolution=o,u.defaultFrame.width=u.size.width=i/o,u.defaultFrame.height=u.size.height=a/o,u.filterPoolKey=s,u},t.prototype.emptyPool=function(){for(var n in this.pool){var i=this.pool[n];if(i)for(var a=0;a<i.length;a++)i[a].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(n){this.pool[n.filterPoolKey].push(n)},t.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var n=this.pool[Eo];if(n)for(var i=0;i<n.length;i++)n[i].destroy(!0);this.pool[Eo]=[]}},t}(Wb.default);yo.default=tS;var bo={};bo.__esModule=!0;var rS=Se.exports,So=k,nS=er,iS=oS(nS),aS=L;function oS(e){return e&&e.__esModule?e:{default:e}}function sS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var uS=function(){function e(t){sS(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(r,n){var i=this.gl,a=!!r._glRenderTargets;if(!r.hasLoaded)return null;var o=this.renderer.boundTextures;if(n===void 0){n=0;for(var s=0;s<o.length;++s)if(o[s]===r){n=s;break}}o[n]=r,i.activeTexture(i.TEXTURE0+n);var u=r._glTextures[this.renderer.CONTEXT_UID];if(u)a?r._glRenderTargets[this.renderer.CONTEXT_UID].resize(r.width,r.height):u.upload(r.source);else{if(a){var l=new iS.default(this.gl,r.width,r.height,r.scaleMode,r.resolution);l.resize(r.width,r.height),r._glRenderTargets[this.renderer.CONTEXT_UID]=l,u=l.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else u=new rS.GLTexture(this.gl,null,null,null,null),u.bind(n),u.premultiplyAlpha=!0,u.upload(r.source);r._glTextures[this.renderer.CONTEXT_UID]=u,r.on("update",this.updateTexture,this),r.on("dispose",this.destroyTexture,this),this._managedTextures.push(r),r.isPowerOfTwo?(r.mipmap&&u.enableMipmap(),r.wrapMode===So.WRAP_MODES.CLAMP?u.enableWrapClamp():r.wrapMode===So.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),r.scaleMode===So.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},e.prototype.destroyTexture=function(r,n){if(r=r.baseTexture||r,!!r.hasLoaded){var i=this.renderer,a=i.CONTEXT_UID,o=r._glTextures,s=r._glRenderTargets;if(o[a]&&(i.unbindTexture(r),o[a].destroy(),r.off("update",this.updateTexture,this),r.off("dispose",this.destroyTexture,this),delete o[a],!n)){var u=this._managedTextures.indexOf(r);u!==-1&&(0,aS.removeItems)(this._managedTextures,u,1)}s&&s[a]&&(i._activeRenderTarget===s[a]&&i.bindRenderTarget(i.rootRenderTarget),s[a].destroy(),delete s[a])}},e.prototype.removeAll=function(){for(var r=0;r<this._managedTextures.length;++r){var n=this._managedTextures[r];n._glTextures[this.renderer.CONTEXT_UID]&&delete n._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var r=0;r<this._managedTextures.length;++r){var n=this._managedTextures[r];this.destroyTexture(n,!0),n.off("update",this.updateTexture,this),n.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();bo.default=uS;var wo={};wo.__esModule=!0;var lS=k,hS=ue,Po=fS(hS);function fS(e){return e&&e.__esModule?e:{default:e}}function cS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var dS=function(){function e(t){cS(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Po.default.GC_MAX_IDLE,this.checkCountMax=Po.default.GC_MAX_CHECK_COUNT,this.mode=Po.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==lS.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var r=this.renderer.textureManager,n=r._managedTextures,i=!1,a=0;a<n.length;a++){var o=n[a];!o._glRenderTargets&&this.count-o.touched>this.maxIdle&&(r.destroyTexture(o,!0),n[a]=null,i=!0)}if(i){for(var s=0,u=0;u<n.length;u++)n[u]!==null&&(n[s++]=n[u]);n.length=s}},e.prototype.unload=function(r){var n=this.renderer.textureManager;r._texture&&r._texture._glRenderTargets&&n.destroyTexture(r._texture,!0);for(var i=r.children.length-1;i>=0;i--)this.unload(r.children[i])},e}();wo.default=dS;var Ro={},Mo={};Mo.__esModule=!0;Mo.default=pS;var le=k;function pS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t[le.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.ADD]=[e.ONE,e.ONE],t[le.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[le.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[le.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t}Ro.__esModule=!0;var vS=Mo,_S=gS(vS);function gS(e){return e&&e.__esModule?e:{default:e}}function yS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Oo=0,Co=1,Ao=2,Do=3,Io=4,mS=function(){function e(t){yS(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,_S.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return e.prototype.push=function(){var r=this.stack[this.stackIndex];r||(r=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var n=0;n<this.activeState.length;n++)r[n]=this.activeState[n]},e.prototype.pop=function(){var r=this.stack[--this.stackIndex];this.setState(r)},e.prototype.setState=function(r){this.setBlend(r[Oo]),this.setDepthTest(r[Co]),this.setFrontFace(r[Ao]),this.setCullFace(r[Do]),this.setBlendMode(r[Io])},e.prototype.setBlend=function(r){r=r?1:0,this.activeState[Oo]!==r&&(this.activeState[Oo]=r,this.gl[r?"enable":"disable"](this.gl.BLEND))},e.prototype.setBlendMode=function(r){if(r!==this.activeState[Io]){this.activeState[Io]=r;var n=this.blendModes[r];n.length===2?this.gl.blendFunc(n[0],n[1]):this.gl.blendFuncSeparate(n[0],n[1],n[2],n[3])}},e.prototype.setDepthTest=function(r){r=r?1:0,this.activeState[Co]!==r&&(this.activeState[Co]=r,this.gl[r?"enable":"disable"](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(r){r=r?1:0,this.activeState[Do]!==r&&(this.activeState[Do]=r,this.gl[r?"enable":"disable"](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(r){r=r?1:0,this.activeState[Ao]!==r&&(this.activeState[Ao]=r,this.gl.frontFace(this.gl[r?"CW":"CCW"]))},e.prototype.resetAttributes=function(){for(var r=0;r<this.attribState.tempAttribState.length;r++)this.attribState.tempAttribState[r]=0;for(var n=0;n<this.attribState.attribState.length;n++)this.attribState.attribState[n]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var r=0;r<this.activeState.length;++r)this.activeState[r]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();Ro.default=mS;var Lo={};Lo.__esModule=!0;Lo.default=xS;var Ft=k;function xS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t[Ft.DRAW_MODES.POINTS]=e.POINTS,t[Ft.DRAW_MODES.LINES]=e.LINES,t[Ft.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[Ft.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[Ft.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[Ft.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[Ft.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t}var $o={};$o.__esModule=!0;$o.default=TS;function TS(e){var t=e.getContextAttributes();t.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}jt.__esModule=!0;var ES=oi,Gh=Pe(ES),bS=po,SS=Pe(bS),wS=go,PS=Pe(wS),RS=yo,MS=Pe(RS),OS=er,CS=Pe(OS),AS=Qt,DS=Pe(AS),IS=bo,LS=Pe(IS),$S=it,BS=Pe($S),FS=wo,GS=Pe(FS),kS=Ro,US=Pe(kS),NS=Lo,HS=Pe(NS),XS=$o,WS=Pe(XS),VS=L,qS=Se.exports,_i=Pe(qS),YS=k;function Pe(e){return e&&e.__esModule?e:{default:e}}function zS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KS(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ZS(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var JS=0,kh=function(e){ZS(t,e);function t(r,n,i){zS(this,t);var a=KS(this,e.call(this,"WebGL",r,n,i));return a.legacy=a.options.legacy,a.legacy&&(_i.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=YS.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&a.transparent!=="notMultiplied",stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new SS.default(a),a.stencilManager=new PS.default(a),a.emptyRenderer=new DS.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,WS.default)(a.options.context),a.gl=a.options.context||_i.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=JS++,a.state=new US.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,HS.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return t.prototype._initContext=function(){var n=this.gl;n.isContextLost()&&n.getExtension("WEBGL_lose_context")&&n.getExtension("WEBGL_lose_context").restoreContext();var i=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(i),this.emptyTextures=new Array(i),this._unknownBoundTextures=!1,this.textureManager=new LS.default(this),this.filterManager=new MS.default(this),this.textureGC=new GS.default(this),this.state.resetToDefault(),this.rootRenderTarget=new CS.default(n,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var a=new _i.default.GLTexture.fromData(n,null,1,1),o={_glTextures:{}};o._glTextures[this.CONTEXT_UID]={};for(var s=0;s<i;s++){var u=new BS.default;u._glTextures[this.CONTEXT_UID]=a,this.boundTextures[s]=o,this.emptyTextures[s]=u,this.bindTexture(null,s)}this.emit("context",n),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(n,i,a,o,s){if(this.renderingToScreen=!i,this.emit("prerender"),!(!this.gl||this.gl.isContextLost())){if(this._nextTextureLocation=0,i||(this._lastObjectRendered=n),!s){var u=n.parent;n.parent=this._tempDisplayObjectParent,n.updateTransform(),n.parent=u}this.bindRenderTexture(i,o),this.currentRenderer.start(),(a!==void 0?a:this.clearBeforeRender)&&this._activeRenderTarget.clear(),n.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(n){this.currentRenderer!==n&&(this.currentRenderer.stop(),this.currentRenderer=n,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(n,i){Gh.default.prototype.resize.call(this,n,i),this.rootRenderTarget.resize(n,i),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(n){this.state.setBlendMode(n)},t.prototype.clear=function(n){this._activeRenderTarget.clear(n)},t.prototype.setTransform=function(n){this._activeRenderTarget.transform=n},t.prototype.clearRenderTexture=function(n,i){var a=n.baseTexture,o=a._glRenderTargets[this.CONTEXT_UID];return o&&o.clear(i),this},t.prototype.bindRenderTexture=function(n,i){var a=void 0;if(n){var o=n.baseTexture;o._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(o,0),this.unbindTexture(o),a=o._glRenderTargets[this.CONTEXT_UID],a.setFrame(n.frame)}else a=this.rootRenderTarget;return a.transform=i,this.bindRenderTarget(a),this},t.prototype.bindRenderTarget=function(n){return n!==this._activeRenderTarget&&(this._activeRenderTarget=n,n.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=n.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(n.stencilMaskStack)),this},t.prototype.bindShader=function(n,i){return this._activeShader!==n&&(this._activeShader=n,n.bind(),i!==!1&&(n.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(n,i,a){if(n=n||this.emptyTextures[i],n=n.baseTexture||n,n.touched=this.textureGC.count,a)i=i||0;else{for(var o=0;o<this.boundTextures.length;o++)if(this.boundTextures[o]===n)return o;i===void 0&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,i=this.boundTextures.length-this._nextTextureLocation-1)}var s=this.gl,u=n._glTextures[this.CONTEXT_UID];return u?(this.boundTextures[i]=n,s.activeTexture(s.TEXTURE0+i),s.bindTexture(s.TEXTURE_2D,u.texture)):this.textureManager.updateTexture(n,i),i},t.prototype.unbindTexture=function(n){var i=this.gl;if(n=n.baseTexture||n,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var a=0;a<this.boundTextures.length;a++)this.boundTextures[a]===this.emptyTextures[a]&&(i.activeTexture(i.TEXTURE0+a),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[a]._glTextures[this.CONTEXT_UID].texture))}for(var o=0;o<this.boundTextures.length;o++)this.boundTextures[o]===n&&(this.boundTextures[o]=this.emptyTextures[o],i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[o]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new _i.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(n){return this._activeVao===n?this:(n?n.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=n,this)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]=this.emptyTextures[n];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(n){n.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(n){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,n),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(Gh.default);jt.default=kh;VS.pluginTarget.mixin(kh);var Bo={};Bo.__esModule=!0;Bo.default=rw;var QS=Bt,jS=ew(QS);function ew(e){return e&&e.__esModule?e:{default:e}}var tw=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","%forloop%","gl_FragColor = color * vColor;","}"].join(`
`);function rw(e,t){var r=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor;
}
`,n=tw;n=n.replace(/%count%/gi,t),n=n.replace(/%forloop%/gi,nw(t));for(var i=new jS.default(e,r,n),a=[],o=0;o<t;o++)a[o]=o;return i.bind(),i.uniforms.uSamplers=a,i}function nw(e){var t="";t+=`
`,t+=`
`;for(var r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+="if(vTextureId < "+r+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t}var Fo={};Fo.__esModule=!0;Fo.default=uw;var iw=Se.exports,aw=ow(iw);function ow(e){return e&&e.__esModule?e:{default:e}}var sw=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function uw(e,t){var r=!t;if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var n=document.createElement("canvas");n.width=1,n.height=1,t=aw.default.createContext(n)}for(var i=t.createShader(t.FRAGMENT_SHADER);;){var a=sw.replace(/%forloop%/gi,lw(e));if(t.shaderSource(i,a),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))e=e/2|0;else break}return r&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),e}function lw(e){for(var t="",r=0;r<e;++r)r>0&&(t+=`
else `),r<e-1&&(t+="if(test == "+r+".0){}");return t}var Go={};Go.__esModule=!0;function hw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var fw=function(){function e(t){hw(this,e),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return e.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},e}();Go.default=fw;co.__esModule=!0;var cw=Qt,dw=ze(cw),pw=jt,vw=ze(pw),_w=Zr,gw=ze(_w),yw=Bo,mw=ze(yw),xw=Fo,Tw=ze(xw),Ew=Go,bw=ze(Ew),Sw=ue,gi=ze(Sw),ko=L,ww=Se.exports,Uo=ze(ww),Pw=ae,No=ze(Pw);function ze(e){return e&&e.__esModule?e:{default:e}}function Rw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mw(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ow(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ke=0,Uh=0,Nh=function(e){Ow(t,e);function t(r){Rw(this,t);var n=Mw(this,e.call(this,r));n.vertSize=5,n.vertByteSize=n.vertSize*4,n.size=gi.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var i=1;i<=No.default.nextPow2(n.size);i*=2)n.buffers.push(new bw.default(i*4*n.vertByteSize));n.indices=(0,gw.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return t.prototype.onContextChange=function(){var n=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),gi.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,Tw.default)(this.MAX_TEXTURES,n)),this.shader=(0,mw.default)(n,this.MAX_TEXTURES),this.indexBuffer=Uo.default.GLBuffer.createIndexBuffer(n,this.indices,n.STATIC_DRAW),this.renderer.bindVao(null);for(var i=this.shader.attributes,a=0;a<this.vaoMax;a++){var o=this.vertexBuffers[a]=Uo.default.GLBuffer.createVertexBuffer(n,null,n.STREAM_DRAW),s=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(o,i.aVertexPosition,n.FLOAT,!1,this.vertByteSize,0).addAttribute(o,i.aTextureCoord,n.UNSIGNED_SHORT,!0,this.vertByteSize,2*4).addAttribute(o,i.aColor,n.UNSIGNED_BYTE,!0,this.vertByteSize,3*4);i.aTextureId&&s.addAttribute(o,i.aTextureId,n.FLOAT,!1,this.vertByteSize,4*4),this.vaos[a]=s}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(n){this.currentIndex>=this.size&&this.flush(),!!n._texture._uvs&&(this.sprites[this.currentIndex++]=n)},t.prototype.flush=function(){if(this.currentIndex!==0){var n=this.renderer.gl,i=this.MAX_TEXTURES,a=No.default.nextPow2(this.currentIndex),o=No.default.log2(a),s=this.buffers[o],u=this.sprites,l=this.groups,h=s.float32View,f=s.uint32View,d=this.boundTextures,p=this.renderer.boundTextures,c=this.renderer.textureGC.count,_=0,v=void 0,g=void 0,m=1,y=0,x=l[0],T=void 0,E=void 0,S=ko.premultiplyBlendMode[u[0]._texture.baseTexture.premultipliedAlpha?1:0][u[0].blendMode];x.textureCount=0,x.start=0,x.blend=S,Ke++;var b=void 0;for(b=0;b<i;++b){var w=p[b];if(w._enabled===Ke){d[b]=this.renderer.emptyTextures[b];continue}d[b]=w,w._virtalBoundId=b,w._enabled=Ke}for(Ke++,b=0;b<this.currentIndex;++b){var P=u[b];u[b]=null,v=P._texture.baseTexture;var A=ko.premultiplyBlendMode[Number(v.premultipliedAlpha)][P.blendMode];if(S!==A&&(S=A,g=null,y=i,Ke++),g!==v&&(g=v,v._enabled!==Ke)){if(y===i&&(Ke++,x.size=b-x.start,y=0,x=l[m++],x.blend=S,x.textureCount=0,x.start=b),v.touched=c,v._virtalBoundId===-1)for(var $=0;$<i;++$){var B=($+Uh)%i,I=d[B];if(I._enabled!==Ke){Uh++,I._virtalBoundId=-1,v._virtalBoundId=B,d[B]=v;break}}v._enabled=Ke,x.textureCount++,x.ids[y]=v._virtalBoundId,x.textures[y++]=v}if(T=P.vertexData,E=P._texture._uvs.uvsUint32,this.renderer.roundPixels){var G=this.renderer.resolution;h[_]=(T[0]*G|0)/G,h[_+1]=(T[1]*G|0)/G,h[_+5]=(T[2]*G|0)/G,h[_+6]=(T[3]*G|0)/G,h[_+10]=(T[4]*G|0)/G,h[_+11]=(T[5]*G|0)/G,h[_+15]=(T[6]*G|0)/G,h[_+16]=(T[7]*G|0)/G}else h[_]=T[0],h[_+1]=T[1],h[_+5]=T[2],h[_+6]=T[3],h[_+10]=T[4],h[_+11]=T[5],h[_+15]=T[6],h[_+16]=T[7];f[_+2]=E[0],f[_+7]=E[1],f[_+12]=E[2],f[_+17]=E[3];var F=Math.min(P.worldAlpha,1),U=F<1&&v.premultipliedAlpha?(0,ko.premultiplyTint)(P._tintRGB,F):P._tintRGB+(F*255<<24);f[_+3]=f[_+8]=f[_+13]=f[_+18]=U,h[_+4]=h[_+9]=h[_+14]=h[_+19]=v._virtalBoundId,_+=20}if(x.size=b-x.start,gi.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(s.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var V=this.shader.attributes,j=this.vertexBuffers[this.vertexCount]=Uo.default.GLBuffer.createVertexBuffer(n,null,n.STREAM_DRAW),M=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(j,V.aVertexPosition,n.FLOAT,!1,this.vertByteSize,0).addAttribute(j,V.aTextureCoord,n.UNSIGNED_SHORT,!0,this.vertByteSize,2*4).addAttribute(j,V.aColor,n.UNSIGNED_BYTE,!0,this.vertByteSize,3*4);V.aTextureId&&M.addAttribute(j,V.aTextureId,n.FLOAT,!1,this.vertByteSize,4*4),this.vaos[this.vertexCount]=M}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(s.vertices,0,!1),this.vertexCount++}for(b=0;b<i;++b)p[b]._virtalBoundId=-1;for(b=0;b<m;++b){for(var C=l[b],N=C.textureCount,W=0;W<N;W++)g=C.textures[W],p[C.ids[W]]!==g&&this.renderer.bindTexture(g,C.ids[W],!0),g._virtalBoundId=-1;this.renderer.state.setBlendMode(C.blend),n.drawElements(n.TRIANGLES,C.size*6,n.UNSIGNED_SHORT,C.start*6*2)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),gi.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var n=0;n<this.vaoMax;n++)this.vertexBuffers[n]&&this.vertexBuffers[n].destroy(),this.vaos[n]&&this.vaos[n].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},t}(dw.default);co.default=Nh;vw.default.registerPlugin("sprite",Nh);var Ho={},yi={};yi.__esModule=!0;var Cw=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Aw=k,Dw=L;function Iw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Xo={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Aw.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Lw=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],$w=function(){function e(t){Iw(this,e),this.styleID=0,this.reset(),Vo(this,t,t)}return e.prototype.clone=function(){var r={};return Vo(r,this,Xo),new e(r)},e.prototype.reset=function(){Vo(this,Xo,Xo)},e.prototype.toFontString=function(){var r=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(var i=n.length-1;i>=0;i--){var a=n[i].trim();!/([\"\'])[^\'\"]+\1/.test(a)&&Lw.indexOf(a)<0&&(a='"'+a+'"'),n[i]=a}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+r+" "+n.join(",")},Cw(e,[{key:"align",get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(r){this._breakWords!==r&&(this._breakWords=r,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(r){this._dropShadow!==r&&(this._dropShadow=r,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(r){this._dropShadowAlpha!==r&&(this._dropShadowAlpha=r,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(r){this._dropShadowAngle!==r&&(this._dropShadowAngle=r,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(r){this._dropShadowBlur!==r&&(this._dropShadowBlur=r,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(r){var n=Wo(r);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(r){this._dropShadowDistance!==r&&(this._dropShadowDistance=r,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(r){var n=Wo(r);this._fill!==n&&(this._fill=n,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(r){this._fillGradientType!==r&&(this._fillGradientType=r,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(r){Bw(this._fillGradientStops,r)||(this._fillGradientStops=r,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(r){this.fontFamily!==r&&(this._fontFamily=r,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(r){this._fontStyle!==r&&(this._fontStyle=r,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(r){this._fontVariant!==r&&(this._fontVariant=r,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(r){this._fontWeight!==r&&(this._fontWeight=r,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(r){this._lineHeight!==r&&(this._lineHeight=r,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(r){this._leading!==r&&(this._leading=r,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(r){this._lineJoin!==r&&(this._lineJoin=r,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(r){this._miterLimit!==r&&(this._miterLimit=r,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(r){this._padding!==r&&(this._padding=r,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(r){var n=Wo(r);this._stroke!==n&&(this._stroke=n,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(r){this._strokeThickness!==r&&(this._strokeThickness=r,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(r){this._textBaseline!==r&&(this._textBaseline=r,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(r){this._trim!==r&&(this._trim=r,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(r){this._whiteSpace!==r&&(this._whiteSpace=r,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(r){this._wordWrap!==r&&(this._wordWrap=r,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(r){this._wordWrapWidth!==r&&(this._wordWrapWidth=r,this.styleID++)}}]),e}();yi.default=$w;function Hh(e){return typeof e=="number"?(0,Dw.hex2string)(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}function Wo(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=Hh(e[t]);return e}else return Hh(e)}function Bw(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function Vo(e,t,r){for(var n in r)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}var mi={};mi.__esModule=!0;function Fw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ze=function(){function e(t,r,n,i,a,o,s,u,l){Fw(this,e),this.text=t,this.style=r,this.width=n,this.height=i,this.lines=a,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=u,this.fontProperties=l}return e.measureText=function(r,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._canvas;i=i==null?n.wordWrap:i;var o=n.toFontString(),s=e.measureFont(o),u=a.getContext("2d");u.font=o;for(var l=i?e.wordWrap(r,n,a):r,h=l.split(/(?:\r\n|\r|\n)/),f=new Array(h.length),d=0,p=0;p<h.length;p++){var c=u.measureText(h[p]).width+(h[p].length-1)*n.letterSpacing;f[p]=c,d=Math.max(d,c)}var _=d+n.strokeThickness;n.dropShadow&&(_+=n.dropShadowDistance);var v=n.lineHeight||s.fontSize+n.strokeThickness,g=Math.max(v,s.fontSize+n.strokeThickness)+(h.length-1)*(v+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new e(r,n,_,g,h,f,v+n.leading,d,s)},e.wordWrap=function(r,n){for(var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e._canvas,a=i.getContext("2d"),o=0,s="",u="",l={},h=n.letterSpacing,f=n.whiteSpace,d=e.collapseSpaces(f),p=e.collapseNewlines(f),c=!d,_=n.wordWrapWidth+h,v=e.tokenize(r),g=0;g<v.length;g++){var m=v[g];if(e.isNewline(m)){if(!p){u+=e.addLine(s),c=!d,s="",o=0;continue}m=" "}if(d){var y=e.isBreakingSpace(m),x=e.isBreakingSpace(s[s.length-1]);if(y&&x)continue}var T=e.getFromCache(m,h,l,a);if(T>_)if(s!==""&&(u+=e.addLine(s),s="",o=0),e.canBreakWords(m,n.breakWords))for(var E=m.split(""),S=0;S<E.length;S++){for(var b=E[S],w=1;E[S+w];){var P=E[S+w],A=b[b.length-1];if(!e.canBreakChars(A,P,m,S,n.breakWords))b+=P;else break;w++}S+=b.length-1;var $=e.getFromCache(b,h,l,a);$+o>_&&(u+=e.addLine(s),c=!1,s="",o=0),s+=b,o+=$}else{s.length>0&&(u+=e.addLine(s),s="",o=0);var B=g===v.length-1;u+=e.addLine(m,!B),c=!1,s="",o=0}else T+o>_&&(c=!1,u+=e.addLine(s),s="",o=0),(s.length>0||!e.isBreakingSpace(m)||c)&&(s+=m,o+=T)}return u+=e.addLine(s,!1),u},e.addLine=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r=e.trimRight(r),r=n?r+`
`:r,r},e.getFromCache=function(r,n,i,a){var o=i[r];if(o===void 0){var s=r.length*n;o=a.measureText(r).width+s,i[r]=o}return o},e.collapseSpaces=function(r){return r==="normal"||r==="pre-line"},e.collapseNewlines=function(r){return r==="normal"},e.trimRight=function(r){if(typeof r!="string")return"";for(var n=r.length-1;n>=0;n--){var i=r[n];if(!e.isBreakingSpace(i))break;r=r.slice(0,-1)}return r},e.isNewline=function(r){return typeof r!="string"?!1:e._newlines.indexOf(r.charCodeAt(0))>=0},e.isBreakingSpace=function(r){return typeof r!="string"?!1:e._breakingSpaces.indexOf(r.charCodeAt(0))>=0},e.tokenize=function(r){var n=[],i="";if(typeof r!="string")return n;for(var a=0;a<r.length;a++){var o=r[a];if(e.isBreakingSpace(o)||e.isNewline(o)){i!==""&&(n.push(i),i=""),n.push(o);continue}i+=o}return i!==""&&n.push(i),n},e.canBreakWords=function(r,n){return n},e.canBreakChars=function(r,n,i,a,o){return!0},e.measureFont=function(r){if(e._fonts[r])return e._fonts[r];var n={},i=e._canvas,a=e._context;a.font=r;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,s=Math.ceil(a.measureText(o).width),u=Math.ceil(a.measureText(e.BASELINE_SYMBOL).width),l=2*u;u=u*e.BASELINE_MULTIPLIER|0,i.width=s,i.height=l,a.fillStyle="#f00",a.fillRect(0,0,s,l),a.font=r,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(o,0,u);var h=a.getImageData(0,0,s,l).data,f=h.length,d=s*4,p=0,c=0,_=!1;for(p=0;p<u;++p){for(var v=0;v<d;v+=4)if(h[c+v]!==255){_=!0;break}if(!_)c+=d;else break}for(n.ascent=u-p,c=f-d,_=!1,p=l;p>u;--p){for(var g=0;g<d;g+=4)if(h[c+g]!==255){_=!0;break}if(!_)c-=d;else break}return n.descent=p-u,n.fontSize=n.ascent+n.descent,e._fonts[r]=n,n},e.clearMetrics=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";r?delete e._fonts[r]:e._fonts={}},e}();mi.default=Ze;var xi=document.createElement("canvas");xi.width=xi.height=10;Ze._canvas=xi;Ze._context=xi.getContext("2d");Ze._fonts={};Ze.METRICS_STRING="|\xC9q";Ze.BASELINE_SYMBOL="M";Ze.BASELINE_MULTIPLIER=1.4;Ze._newlines=[10,13];Ze._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var qo={};qo.__esModule=!0;qo.default=Gw;function Gw(e){var t=e.width,r=e.height,n=e.getContext("2d"),i=n.getImageData(0,0,t,r),a=i.data,o=a.length,s={top:null,left:null,right:null,bottom:null},u=null,l=void 0,h=void 0,f=void 0;for(l=0;l<o;l+=4)a[l+3]!==0&&(h=l/4%t,f=~~(l/4/t),s.top===null&&(s.top=f),(s.left===null||h<s.left)&&(s.left=h),(s.right===null||s.right<h)&&(s.right=h+1),(s.bottom===null||s.bottom<f)&&(s.bottom=f));return s.top!==null&&(t=s.right-s.left,r=s.bottom-s.top+1,u=n.getImageData(s.left,s.top,t,r)),{height:r,width:t,data:u}}Ho.__esModule=!0;var kw=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Uw=Fr,Nw=tr(Uw),Hw=ke,Xh=tr(Hw),Wh=ce,Vh=L,Xw=k,Ww=ue,qh=tr(Ww),Vw=yi,Yh=tr(Vw),qw=mi,Yw=tr(qw),zw=qo,Kw=tr(zw);function tr(e){return e&&e.__esModule?e:{default:e}}function Zw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jw(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Qw(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var jw={texture:!0,children:!1,baseTexture:!0},e1=function(e){Qw(t,e);function t(r,n,i){Zw(this,t),i=i||document.createElement("canvas"),i.width=3,i.height=3;var a=Xh.default.fromCanvas(i,qh.default.SCALE_MODE,"text");a.orig=new Wh.Rectangle,a.trim=new Wh.Rectangle;var o=Jw(this,e.call(this,a));return Xh.default.addToCache(o._texture,o._texture.baseTexture.textureCacheIds[0]),o.canvas=i,o.context=o.canvas.getContext("2d"),o.resolution=qh.default.RESOLUTION,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=r,o.style=n,o.localStyleID=-1,o}return t.prototype.updateText=function(n){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&n)){this._font=this._style.toFontString();var a=this.context,o=Yw.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),s=o.width,u=o.height,l=o.lines,h=o.lineHeight,f=o.lineWidths,d=o.maxLineWidth,p=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+i.padding*2)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,u)+i.padding*2)*this.resolution),a.scale(this.resolution,this.resolution),a.clearRect(0,0,this.canvas.width,this.canvas.height),a.font=this._font,a.strokeStyle=i.stroke,a.lineWidth=i.strokeThickness,a.textBaseline=i.textBaseline,a.lineJoin=i.lineJoin,a.miterLimit=i.miterLimit;var c=void 0,_=void 0;if(i.dropShadow){a.fillStyle=i.dropShadowColor,a.globalAlpha=i.dropShadowAlpha,a.shadowBlur=i.dropShadowBlur,i.dropShadowBlur>0&&(a.shadowColor=i.dropShadowColor);for(var v=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,g=Math.sin(i.dropShadowAngle)*i.dropShadowDistance,m=0;m<l.length;m++)c=i.strokeThickness/2,_=i.strokeThickness/2+m*h+p.ascent,i.align==="right"?c+=d-f[m]:i.align==="center"&&(c+=(d-f[m])/2),i.fill&&(this.drawLetterSpacing(l[m],c+v+i.padding,_+g+i.padding),i.stroke&&i.strokeThickness&&(a.strokeStyle=i.dropShadowColor,this.drawLetterSpacing(l[m],c+v+i.padding,_+g+i.padding,!0),a.strokeStyle=i.stroke))}a.shadowBlur=0,a.globalAlpha=1,a.fillStyle=this._generateFillStyle(i,l);for(var y=0;y<l.length;y++)c=i.strokeThickness/2,_=i.strokeThickness/2+y*h+p.ascent,i.align==="right"?c+=d-f[y]:i.align==="center"&&(c+=(d-f[y])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[y],c+i.padding,_+i.padding,!0),i.fill&&this.drawLetterSpacing(l[y],c+i.padding,_+i.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(n,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=this._style,u=s.letterSpacing;if(u===0){o?this.context.strokeText(n,i,a):this.context.fillText(n,i,a);return}for(var l=String.prototype.split.call(n,""),h=i,f=0,d="",p=this.context.measureText(n).width,c=0;f<n.length;)d=l[f++],o?this.context.strokeText(d,h,a):this.context.fillText(d,h,a),c=this.context.measureText(n.substring(f)).width,h+=p-c+u,p=c},t.prototype.updateTexture=function(){var n=this.canvas;if(this._style.trim){var i=(0,Kw.default)(n);i.data&&(n.width=i.width,n.height=i.height,this.context.putImageData(i.data,0,0))}var a=this._texture,o=this._style,s=o.trim?0:o.padding,u=a.baseTexture;u.hasLoaded=!0,u.resolution=this.resolution,u.realWidth=n.width,u.realHeight=n.height,u.width=n.width/this.resolution,u.height=n.height/this.resolution,a.trim.width=a._frame.width=n.width/this.resolution,a.trim.height=a._frame.height=n.height/this.resolution,a.trim.x=-s,a.trim.y=-s,a.orig.width=a._frame.width-s*2,a.orig.height=a._frame.height-s*2,this._onTextureUpdate(),u.emit("update",u),this.dirty=!1},t.prototype.renderWebGL=function(n){this.resolution!==n.resolution&&(this.resolution=n.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,n)},t.prototype._renderCanvas=function(n){this.resolution!==n.resolution&&(this.resolution=n.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,n)},t.prototype.getLocalBounds=function(n){return this.updateText(!0),e.prototype.getLocalBounds.call(this,n)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(n,i){if(!Array.isArray(n.fill))return n.fill;if(navigator.isCocoonJS)return n.fill[0];var a=void 0,o=void 0,s=void 0,u=void 0,l=this.canvas.width/this.resolution,h=this.canvas.height/this.resolution,f=n.fill.slice(),d=n.fillGradientStops.slice();if(!d.length)for(var p=f.length+1,c=1;c<p;++c)d.push(c/p);if(f.unshift(n.fill[0]),d.unshift(0),f.push(n.fill[n.fill.length-1]),d.push(1),n.fillGradientType===Xw.TEXT_GRADIENT.LINEAR_VERTICAL){a=this.context.createLinearGradient(l/2,0,l/2,h),o=(f.length+1)*i.length,s=0;for(var _=0;_<i.length;_++){s+=1;for(var v=0;v<f.length;v++)typeof d[v]=="number"?u=d[v]/i.length+_/i.length:u=s/o,a.addColorStop(u,f[v]),s++}}else{a=this.context.createLinearGradient(0,h/2,l,h/2),o=f.length+1,s=1;for(var g=0;g<f.length;g++)typeof d[g]=="number"?u=d[g]:u=s/o,a.addColorStop(u,f[g]),s++}return a},t.prototype.destroy=function(n){typeof n=="boolean"&&(n={children:n}),n=Object.assign({},jw,n),e.prototype.destroy.call(this,n),this.context=null,this.canvas=null,this._style=null},kw(t,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){this.updateText(!0);var i=(0,Vh.sign)(this.scale.x)||1;this.scale.x=i*n/this._texture.orig.width,this._width=n}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){this.updateText(!0);var i=(0,Vh.sign)(this.scale.y)||1;this.scale.y=i*n/this._texture.orig.height,this._height=n}},{key:"style",get:function(){return this._style},set:function(n){n=n||{},n instanceof Yh.default?this._style=n:this._style=new Yh.default(n),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(n){n=String(n===""||n===null||n===void 0?" ":n),this._text!==n&&(this._text=n,this.dirty=!0)}}]),t}(Nw.default);Ho.default=e1;var Yo={},Ti={};Ti.__esModule=!0;function t1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r1=function(){function e(t,r,n,i,a,o,s,u,l){t1(this,e),this.lineWidth=t,this.lineAlignment=l,this.nativeLines=s,this.lineColor=r,this.lineAlpha=n,this._lineTint=r,this.fillColor=i,this.fillAlpha=a,this._fillTint=i,this.fill=o,this.holes=[],this.shape=u,this.type=u.type}return e.prototype.clone=function(){return new e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},e.prototype.addHole=function(r){this.holes.push(r)},e.prototype.destroy=function(){this.shape=null,this.holes=null},e}();Ti.default=r1;var zo={};zo.__esModule=!0;zo.default=n1;function n1(e,t,r,n,i,a,o,s,u){var l=arguments.length>9&&arguments[9]!==void 0?arguments[9]:[],h=0,f=0,d=0,p=0,c=0;l.push(e,t);for(var _=1,v=0;_<=u;++_)v=_/u,h=1-v,f=h*h,d=f*h,p=v*v,c=p*v,l.push(d*e+3*f*v*r+3*h*p*i+c*o,d*t+3*f*v*n+3*h*p*a+c*s);return l}Yo.__esModule=!0;var i1=Dt,a1=ot(i1),o1=Yr,s1=ot(o1),u1=ke,Ko=ot(u1),l1=Ti,h1=ot(l1),f1=Fr,c1=ot(f1),Ne=ce,Zo=L,$e=k,d1=Pr,p1=ot(d1),v1=zo,_1=ot(v1),g1=Lt,y1=ot(g1);function ot(e){return e&&e.__esModule?e:{default:e}}function m1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function T1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jo=void 0,jr=new Ne.Matrix,en=new Ne.Point,E1=new Float32Array(4),b1=new Float32Array(4),Qo=function(e){T1(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;m1(this,t);var n=x1(this,e.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=r,n.lineColor=0,n.lineAlignment=.5,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=$e.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new p1.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n._prevRectTint=null,n._prevRectFillColor=null,n}return t.prototype.clone=function(){var n=new t;n.renderable=this.renderable,n.fillAlpha=this.fillAlpha,n.lineWidth=this.lineWidth,n.lineColor=this.lineColor,n.lineAlignment=this.lineAlignment,n.tint=this.tint,n.blendMode=this.blendMode,n.isMask=this.isMask,n.boundsPadding=this.boundsPadding,n.dirty=0,n.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)n.graphicsData.push(this.graphicsData[i].clone());return n.currentPath=n.graphicsData[n.graphicsData.length-1],n.updateLocalBounds(),n},t.prototype._quadraticCurveLength=function(n,i,a,o,s,u){var l=n-2*a+s,h=i-2*o+u,f=2*a-2*n,d=2*o-2*i,p=4*(l*l+h*h),c=4*(l*f+h*d),_=f*f+d*d,v=2*Math.sqrt(p+c+_),g=Math.sqrt(p),m=2*p*g,y=2*Math.sqrt(_),x=c/g;return(m*v+g*c*(v-y)+(4*_*p-c*c)*Math.log((2*g+x+v)/(x+y)))/(4*m)},t.prototype._bezierCurveLength=function(n,i,a,o,s,u,l,h){for(var f=10,d=0,p=0,c=0,_=0,v=0,g=0,m=0,y=0,x=0,T=0,E=0,S=n,b=i,w=1;w<=f;++w)p=w/f,c=p*p,_=c*p,v=1-p,g=v*v,m=g*v,y=m*n+3*g*p*a+3*v*c*s+_*l,x=m*i+3*g*p*o+3*v*c*u+_*h,T=S-y,E=b-x,S=y,b=x,d+=Math.sqrt(T*T+E*E);return d},t.prototype._segmentsCount=function(n){var i=Math.ceil(n/t.CURVES.maxLength);return i<t.CURVES.minSegments?i=t.CURVES.minSegments:i>t.CURVES.maxSegments&&(i=t.CURVES.maxSegments),i},t.prototype.lineStyle=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;if(this.lineWidth=n,this.lineColor=i,this.lineAlpha=a,this.lineAlignment=o,this.currentPath)if(this.currentPath.shape.points.length){var s=new Ne.Polygon(this.currentPath.shape.points.slice(-2));s.closed=!1,this.drawShape(s)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},t.prototype.moveTo=function(n,i){var a=new Ne.Polygon([n,i]);return a.closed=!1,this.drawShape(a),this},t.prototype.lineTo=function(n,i){var a=this.currentPath.shape.points,o=a[a.length-2],s=a[a.length-1];return(o!==n||s!==i)&&(a.push(n,i),this.dirty++),this},t.prototype.quadraticCurveTo=function(n,i,a,o){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,u=0,l=0;s.length===0&&this.moveTo(0,0);for(var h=s[s.length-2],f=s[s.length-1],d=t.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(h,f,n,i,a,o)):20,p=1;p<=d;++p){var c=p/d;u=h+(n-h)*c,l=f+(i-f)*c,s.push(u+(n+(a-n)*c-u)*c,l+(i+(o-i)*c-l)*c)}return this.dirty++,this},t.prototype.bezierCurveTo=function(n,i,a,o,s,u){this.currentPath?this.currentPath.shape.points.length===0&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var l=this.currentPath.shape.points,h=l[l.length-2],f=l[l.length-1];l.length-=2;var d=t.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(h,f,n,i,a,o,s,u)):20;return(0,_1.default)(h,f,n,i,a,o,s,u,d,l),this.dirty++,this},t.prototype.arcTo=function(n,i,a,o,s){this.currentPath?this.currentPath.shape.points.length===0&&this.currentPath.shape.points.push(n,i):this.moveTo(n,i);var u=this.currentPath.shape.points,l=u[u.length-2],h=u[u.length-1],f=h-i,d=l-n,p=o-i,c=a-n,_=Math.abs(f*c-d*p);if(_<1e-8||s===0)(u[u.length-2]!==n||u[u.length-1]!==i)&&u.push(n,i);else{var v=f*f+d*d,g=p*p+c*c,m=f*p+d*c,y=s*Math.sqrt(v)/_,x=s*Math.sqrt(g)/_,T=y*m/v,E=x*m/g,S=y*c+x*d,b=y*p+x*f,w=d*(x+T),P=f*(x+T),A=c*(y+E),$=p*(y+E),B=Math.atan2(P-b,w-S),I=Math.atan2($-b,A-S);this.arc(S+n,b+i,s,B,I,d*p>c*f)}return this.dirty++,this},t.prototype.arc=function(n,i,a,o,s){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(o===s)return this;!u&&s<=o?s+=$e.PI_2:u&&o<=s&&(o+=$e.PI_2);var l=s-o,h=t.CURVES.adaptive?this._segmentsCount(Math.abs(l)*a):Math.ceil(Math.abs(l)/$e.PI_2)*40;if(l===0)return this;var f=n+Math.cos(o)*a,d=i+Math.sin(o)*a,p=this.currentPath?this.currentPath.shape.points:null;if(p){var c=Math.abs(p[p.length-2]-f),_=Math.abs(p[p.length-1]-d);c<.001&&_<.001||p.push(f,d)}else this.moveTo(f,d),p=this.currentPath.shape.points;for(var v=l/(h*2),g=v*2,m=Math.cos(v),y=Math.sin(v),x=h-1,T=x%1/x,E=0;E<=x;++E){var S=E+T*E,b=v+o+g*S,w=Math.cos(b),P=-Math.sin(b);p.push((m*w+y*P)*a+n,(m*-P+y*w)*a+i)}return this.dirty++,this},t.prototype.beginFill=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return this.filling=!0,this.fillColor=n,this.fillAlpha=i,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.prototype.drawRect=function(n,i,a,o){return this.drawShape(new Ne.Rectangle(n,i,a,o)),this},t.prototype.drawRoundedRect=function(n,i,a,o,s){return this.drawShape(new Ne.RoundedRectangle(n,i,a,o,s)),this},t.prototype.drawCircle=function(n,i,a){return this.drawShape(new Ne.Circle(n,i,a)),this},t.prototype.drawEllipse=function(n,i,a,o){return this.drawShape(new Ne.Ellipse(n,i,a,o)),this},t.prototype.drawPolygon=function(n){var i=n,a=!0;if(i instanceof Ne.Polygon&&(a=i.closed,i=i.points),!Array.isArray(i)){i=new Array(arguments.length);for(var o=0;o<i.length;++o)i[o]=arguments[o]}var s=new Ne.Polygon(i);return s.closed=a,this.drawShape(s),this},t.prototype.drawStar=function(n,i,a,o,s){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;s=s||o/2;for(var l=-1*Math.PI/2+u,h=a*2,f=$e.PI_2/h,d=[],p=0;p<h;p++){var c=p%2?s:o,_=p*f+l;d.push(n+c*Math.cos(_),i+c*Math.sin(_))}return this.drawPolygon(d)},t.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},t.prototype.isFastRect=function(){return this.graphicsData.length===1&&this.graphicsData[0].shape.type===$e.SHAPES.RECT&&!this.graphicsData[0].lineWidth},t.prototype._renderWebGL=function(n){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(n):(n.setObjectRenderer(n.plugins.graphics),n.plugins.graphics.render(this))},t.prototype._renderSpriteRect=function(n){var i=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new c1.default(new Ko.default(Ko.default.WHITE)));var a=this._spriteRect,o=this.graphicsData[0].fillColor;if(this.tint===16777215)a.tint=o;else if(this.tint!==this._prevRectTint||o!==this._prevRectFillColor){var s=E1,u=b1;(0,Zo.hex2rgb)(o,s),(0,Zo.hex2rgb)(this.tint,u),s[0]*=u[0],s[1]*=u[1],s[2]*=u[2],a.tint=(0,Zo.rgb2hex)(s),this._prevRectTint=this.tint,this._prevRectFillColor=o}a.alpha=this.graphicsData[0].fillAlpha,a.worldAlpha=this.worldAlpha*a.alpha,a.blendMode=this.blendMode,a._texture._frame.width=i.width,a._texture._frame.height=i.height,a.transform.worldTransform=this.transform.worldTransform,a.anchor.set(-i.x/i.width,-i.y/i.height),a._onAnchorUpdate(),a._renderWebGL(n)},t.prototype._renderCanvas=function(n){this.isMask!==!0&&n.plugins.graphics.render(this)},t.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var n=this._localBounds;this._bounds.addFrame(this.transform,n.minX,n.minY,n.maxX,n.maxY)},t.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,en);for(var i=this.graphicsData,a=0;a<i.length;++a){var o=i[a];if(!!o.fill&&o.shape&&o.shape.contains(en.x,en.y)){var s=!1;if(o.holes)for(var u=0;u<o.holes.length;u++){var l=o.holes[u];if(l.contains(en.x,en.y)){s=!0;break}}if(!s)return!0}}return!1},t.prototype.updateLocalBounds=function(){var n=1/0,i=-1/0,a=1/0,o=-1/0;if(this.graphicsData.length)for(var s=0,u=0,l=0,h=0,f=0,d=0;d<this.graphicsData.length;d++){var p=this.graphicsData[d],c=p.type,_=p.lineWidth,v=p.lineAlignment,g=_*v;if(s=p.shape,c===$e.SHAPES.RECT||c===$e.SHAPES.RREC)u=s.x-g,l=s.y-g,h=s.width+g*2,f=s.height+g*2,n=u<n?u:n,i=u+h>i?u+h:i,a=l<a?l:a,o=l+f>o?l+f:o;else if(c===$e.SHAPES.CIRC)u=s.x,l=s.y,h=s.radius+g,f=s.radius+g,n=u-h<n?u-h:n,i=u+h>i?u+h:i,a=l-f<a?l-f:a,o=l+f>o?l+f:o;else if(c===$e.SHAPES.ELIP)u=s.x,l=s.y,h=s.width+g,f=s.height+g,n=u-h<n?u-h:n,i=u+h>i?u+h:i,a=l-f<a?l-f:a,o=l+f>o?l+f:o;else for(var m=s.points,y=0,x=0,T=0,E=0,S=0,b=0,w=0,P=0,A=0;A+2<m.length;A+=2)u=m[A],l=m[A+1],y=m[A+2],x=m[A+3],T=Math.abs(y-u),E=Math.abs(x-l),f=g*2,h=Math.sqrt(T*T+E*E),!(h<1e-9)&&(S=(f/h*E+T)/2,b=(f/h*T+E)/2,w=(y+u)/2,P=(x+l)/2,n=w-S<n?w-S:n,i=w+S>i?w+S:i,a=P-b<a?P-b:a,o=P+b>o?P+b:o)}else n=0,i=0,a=0,o=0;var $=this.boundsPadding;this._localBounds.minX=n-$,this._localBounds.maxX=i+$,this._localBounds.minY=a-$,this._localBounds.maxY=o+$},t.prototype.drawShape=function(n){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var i=new h1.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,n,this.lineAlignment);return this.graphicsData.push(i),i.type===$e.SHAPES.POLY&&(i.shape.closed=i.shape.closed,this.currentPath=i),this.dirty++,i},t.prototype.generateCanvasTexture=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,a=this.getLocalBounds(),o=s1.default.create(a.width,a.height,n,i);Jo||(Jo=new y1.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(jr),jr.invert(),jr.tx-=a.x,jr.ty-=a.y,Jo.render(this,o,!0,jr);var s=Ko.default.fromCanvas(o.baseTexture._canvasRenderTarget.canvas,n,"graphics");return s.baseTexture.resolution=i,s.baseTexture.update(),s},t.prototype.closePath=function(){var n=this.currentPath;return n&&n.shape&&n.shape.close(),this},t.prototype.addHole=function(){var n=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(n.shape),this.currentPath=null,this},t.prototype.destroy=function(n){e.prototype.destroy.call(this,n);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var a in this._webGL)for(var o=0;o<this._webGL[a].data.length;++o)this._webGL[a].data[o].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},t}(a1.default);Yo.default=Qo;Qo._SPRITE_TEXTURE=null;Qo.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048};var jo={},es={};es.__esModule=!0;var S1=Se.exports,ts=w1(S1);function w1(e){return e&&e.__esModule?e:{default:e}}function P1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var R1=function(){function e(t,r,n){P1(this,e),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=ts.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=ts.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=r,this.vao=new ts.default.VertexArrayObject(t,n).addIndex(this.indexBuffer).addAttribute(this.buffer,r.attributes.aVertexPosition,t.FLOAT,!1,4*6,0).addAttribute(this.buffer,r.attributes.aColor,t.FLOAT,!1,4*6,2*4)}return e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},e}();es.default=R1;var rs={};rs.__esModule=!0;var M1=Bt,O1=C1(M1);function C1(e){return e&&e.__esModule?e:{default:e}}function A1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D1(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function I1(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var L1=function(e){I1(t,e);function t(r){return A1(this,t),D1(this,e.call(this,r,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join(`
`),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join(`
`)))}return t}(O1.default);rs.default=L1;var ns={},rr={};rr.__esModule=!0;rr.default=function(e,t,r){e.nativeLines?B1(e,r):$1(e,t)};var is=ce,zh=L;function $1(e,t){var r=e.points;if(r.length!==0){var n=new is.Point(r[0],r[1]),i=new is.Point(r[r.length-2],r[r.length-1]);if(n.x===i.x&&n.y===i.y){r=r.slice(),r.pop(),r.pop(),i=new is.Point(r[r.length-2],r[r.length-1]);var a=i.x+(n.x-i.x)*.5,o=i.y+(n.y-i.y)*.5;r.unshift(a,o),r.push(a,o)}var s=t.points,u=t.indices,l=r.length/2,h=r.length,f=s.length/6,d=e.lineWidth/2,p=(0,zh.hex2rgb)(e.lineColor),c=e.lineAlpha,_=p[0]*c,v=p[1]*c,g=p[2]*c,m=r[0],y=r[1],x=r[2],T=r[3],E=0,S=0,b=-(y-T),w=m-x,P=0,A=0,$=0,B=0,I=Math.sqrt(b*b+w*w);b/=I,w/=I,b*=d,w*=d;var G=e.lineAlignment,F=(1-G)*2,U=G*2;s.push(m-b*F,y-w*F,_,v,g,c),s.push(m+b*U,y+w*U,_,v,g,c);for(var V=1;V<l-1;++V){m=r[(V-1)*2],y=r[(V-1)*2+1],x=r[V*2],T=r[V*2+1],E=r[(V+1)*2],S=r[(V+1)*2+1],b=-(y-T),w=m-x,I=Math.sqrt(b*b+w*w),b/=I,w/=I,b*=d,w*=d,P=-(T-S),A=x-E,I=Math.sqrt(P*P+A*A),P/=I,A/=I,P*=d,A*=d;var j=-w+y-(-w+T),M=-b+x-(-b+m),C=(-b+m)*(-w+T)-(-b+x)*(-w+y),N=-A+S-(-A+T),W=-P+x-(-P+E),Y=(-P+E)*(-A+T)-(-P+x)*(-A+S),Q=j*W-N*M;if(Math.abs(Q)<.1){Q+=10.1,s.push(x-b*F,T-w*F,_,v,g,c),s.push(x+b*U,T+w*U,_,v,g,c);continue}var re=(M*Y-W*C)/Q,se=(N*C-j*Y)/Q,_e=(re-x)*(re-x)+(se-T)*(se-T);_e>196*d*d?($=b-P,B=w-A,I=Math.sqrt($*$+B*B),$/=I,B/=I,$*=d,B*=d,s.push(x-$*F,T-B*F),s.push(_,v,g,c),s.push(x+$*U,T+B*U),s.push(_,v,g,c),s.push(x-$*U*F,T-B*F),s.push(_,v,g,c),h++):(s.push(x+(re-x)*F,T+(se-T)*F),s.push(_,v,g,c),s.push(x-(re-x)*U,T-(se-T)*U),s.push(_,v,g,c))}m=r[(l-2)*2],y=r[(l-2)*2+1],x=r[(l-1)*2],T=r[(l-1)*2+1],b=-(y-T),w=m-x,I=Math.sqrt(b*b+w*w),b/=I,w/=I,b*=d,w*=d,s.push(x-b*F,T-w*F),s.push(_,v,g,c),s.push(x+b*U,T+w*U),s.push(_,v,g,c),u.push(f);for(var ge=0;ge<h;++ge)u.push(f++);u.push(f-1)}}function B1(e,t){var r=0,n=e.points;if(n.length!==0){var i=t.points,a=n.length/2,o=(0,zh.hex2rgb)(e.lineColor),s=e.lineAlpha,u=o[0]*s,l=o[1]*s,h=o[2]*s;for(r=1;r<a;r++){var f=n[(r-1)*2],d=n[(r-1)*2+1],p=n[r*2],c=n[r*2+1];i.push(f,d),i.push(u,l,h,s),i.push(p,c),i.push(u,l,h,s)}}}ns.__esModule=!0;ns.default=H1;var F1=rr,G1=Kh(F1),k1=L,U1=Dr.exports,N1=Kh(U1);function Kh(e){return e&&e.__esModule?e:{default:e}}function H1(e,t,r){e.points=e.shape.points.slice();var n=e.points;if(e.fill&&n.length>=6){for(var i=[],a=e.holes,o=0;o<a.length;o++){var s=a[o];i.push(n.length/2),n=n.concat(s.points)}var u=t.points,l=t.indices,h=n.length/2,f=(0,k1.hex2rgb)(e.fillColor),d=e.fillAlpha,p=f[0]*d,c=f[1]*d,_=f[2]*d,v=(0,N1.default)(n,i,2);if(!v)return;for(var g=u.length/6,m=0;m<v.length;m+=3)l.push(v[m]+g),l.push(v[m]+g),l.push(v[m+1]+g),l.push(v[m+2]+g),l.push(v[m+2]+g);for(var y=0;y<h;y++)u.push(n[y*2],n[y*2+1],p,c,_,d)}e.lineWidth>0&&(0,G1.default)(e,t,r)}var as={};as.__esModule=!0;as.default=Y1;var X1=rr,W1=q1(X1),V1=L;function q1(e){return e&&e.__esModule?e:{default:e}}function Y1(e,t,r){var n=e.shape,i=n.x,a=n.y,o=n.width,s=n.height;if(e.fill){var u=(0,V1.hex2rgb)(e.fillColor),l=e.fillAlpha,h=u[0]*l,f=u[1]*l,d=u[2]*l,p=t.points,c=t.indices,_=p.length/6;p.push(i,a),p.push(h,f,d,l),p.push(i+o,a),p.push(h,f,d,l),p.push(i,a+s),p.push(h,f,d,l),p.push(i+o,a+s),p.push(h,f,d,l),c.push(_,_,_+1,_+2,_+3,_+3)}if(e.lineWidth){var v=e.points;e.points=[i,a,i+o,a,i+o,a+s,i,a+s,i,a],(0,W1.default)(e,t,r),e.points=v}}var os={};os.__esModule=!0;os.default=j1;var z1=Dr.exports,K1=Zh(z1),Z1=rr,J1=Zh(Z1),Q1=L;function Zh(e){return e&&e.__esModule?e:{default:e}}function j1(e,t,r){var n=e.shape,i=n.x,a=n.y,o=n.width,s=n.height,u=n.radius,l=[];if(l.push(i+u,a),Ei(i+o-u,a,i+o,a,i+o,a+u,l),Ei(i+o,a+s-u,i+o,a+s,i+o-u,a+s,l),Ei(i+u,a+s,i,a+s,i,a+s-u,l),Ei(i,a+u,i,a,i+u+1e-10,a,l),e.fill){for(var h=(0,Q1.hex2rgb)(e.fillColor),f=e.fillAlpha,d=h[0]*f,p=h[1]*f,c=h[2]*f,_=t.points,v=t.indices,g=_.length/6,m=(0,K1.default)(l,null,2),y=0,x=m.length;y<x;y+=3)v.push(m[y]+g),v.push(m[y]+g),v.push(m[y+1]+g),v.push(m[y+2]+g),v.push(m[y+2]+g);for(var T=0,E=l.length;T<E;T++)_.push(l[T],l[++T],d,p,c,f)}if(e.lineWidth){var S=e.points;e.points=l,(0,J1.default)(e,t,r),e.points=S}}function nr(e,t,r){var n=t-e;return e+n*r}function Ei(e,t,r,n,i,a){for(var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[],s=20,u=o,l=0,h=0,f=0,d=0,p=0,c=0,_=0,v=0;_<=s;++_)v=_/s,l=nr(e,r,v),h=nr(t,n,v),f=nr(r,i,v),d=nr(n,a,v),p=nr(l,f,v),c=nr(h,d,v),u.push(p,c);return u}var ss={};ss.__esModule=!0;ss.default=aP;var eP=rr,tP=iP(eP),rP=k,nP=L;function iP(e){return e&&e.__esModule?e:{default:e}}function aP(e,t,r){var n=e.shape,i=n.x,a=n.y,o=void 0,s=void 0;if(e.type===rP.SHAPES.CIRC?(o=n.radius,s=n.radius):(o=n.width,s=n.height),!(o===0||s===0)){var u=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),l=Math.PI*2/u;if(e.fill){var h=(0,nP.hex2rgb)(e.fillColor),f=e.fillAlpha,d=h[0]*f,p=h[1]*f,c=h[2]*f,_=t.points,v=t.indices,g=_.length/6;v.push(g);for(var m=0;m<u+1;m++)_.push(i,a,d,p,c,f),_.push(i+Math.sin(l*m)*o,a+Math.cos(l*m)*s,d,p,c,f),v.push(g++,g++);v.push(g-1)}if(e.lineWidth){var y=e.points;e.points=[];for(var x=0;x<u;x++)e.points.push(i+Math.sin(l*-x)*o,a+Math.cos(l*-x)*s);e.points.push(e.points[0],e.points[1]),(0,tP.default)(e,t,r),e.points=y}}}jo.__esModule=!0;var oP=L,tn=k,sP=Qt,Jh=st(sP),uP=jt,lP=st(uP),hP=es,fP=st(hP),cP=rs,dP=st(cP),pP=ns,vP=st(pP),_P=as,gP=st(_P),yP=os,mP=st(yP),xP=ss,TP=st(xP);function st(e){return e&&e.__esModule?e:{default:e}}function EP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bP(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function SP(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Qh=function(e){SP(t,e);function t(r){EP(this,t);var n=bP(this,e.call(this,r));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=r.gl,n.CONTEXT_UID=0,n}return t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new dP.default(this.gl)},t.prototype.destroy=function(){Jh.default.prototype.destroy.call(this);for(var n=0;n<this.graphicsDataPool.length;++n)this.graphicsDataPool[n].destroy();this.graphicsDataPool=null},t.prototype.render=function(n){var i=this.renderer,a=i.gl,o=void 0,s=n._webGL[this.CONTEXT_UID];(!s||n.dirty!==s.dirty)&&(this.updateGraphics(n),s=n._webGL[this.CONTEXT_UID]);var u=this.primitiveShader;i.bindShader(u),i.state.setBlendMode(n.blendMode);for(var l=0,h=s.data.length;l<h;l++){o=s.data[l];var f=o.shader;i.bindShader(f),f.uniforms.translationMatrix=n.transform.worldTransform.toArray(!0),f.uniforms.tint=(0,oP.hex2rgb)(n.tint),f.uniforms.alpha=n.worldAlpha,i.bindVao(o.vao),o.nativeLines?a.drawArrays(a.LINES,0,o.points.length/6):o.vao.draw(a.TRIANGLE_STRIP,o.indices.length)}},t.prototype.updateGraphics=function(n){var i=this.renderer.gl,a=n._webGL[this.CONTEXT_UID];if(a||(a=n._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:i,clearDirty:-1,dirty:-1}),a.dirty=n.dirty,n.clearDirty!==a.clearDirty){a.clearDirty=n.clearDirty;for(var o=0;o<a.data.length;o++)this.graphicsDataPool.push(a.data[o]);a.data.length=0,a.lastIndex=0}for(var s=void 0,u=void 0,l=a.lastIndex;l<n.graphicsData.length;l++){var h=n.graphicsData[l];s=this.getWebGLData(a,0),h.nativeLines&&h.lineWidth&&(u=this.getWebGLData(a,0,!0),a.lastIndex++),h.type===tn.SHAPES.POLY&&(0,vP.default)(h,s,u),h.type===tn.SHAPES.RECT?(0,gP.default)(h,s,u):h.type===tn.SHAPES.CIRC||h.type===tn.SHAPES.ELIP?(0,TP.default)(h,s,u):h.type===tn.SHAPES.RREC&&(0,mP.default)(h,s,u),a.lastIndex++}this.renderer.bindVao(null);for(var f=0;f<a.data.length;f++)s=a.data[f],s.dirty&&s.upload()},t.prototype.getWebGLData=function(n,i,a){var o=n.data[n.data.length-1];return(!o||o.nativeLines!==a||o.points.length>32e4)&&(o=this.graphicsDataPool.pop()||new fP.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),o.nativeLines=a,o.reset(i),n.data.push(o)),o.dirty=!0,o},t}(Jh.default);jo.default=Qh;lP.default.registerPlugin("graphics",Qh);var us={};us.__esModule=!0;var wP=Lt,PP=RP(wP),rn=k;function RP(e){return e&&e.__esModule?e:{default:e}}function MP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var jh=function(){function e(t){MP(this,e),this.renderer=t}return e.prototype.render=function(r){var n=this.renderer,i=n.context,a=r.worldAlpha,o=r.transform.worldTransform,s=n.resolution;i.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),(r.canvasTintDirty!==r.dirty||r._prevTint!==r.tint)&&this.updateGraphicsTint(r),n.setBlendMode(r.blendMode);for(var u=0;u<r.graphicsData.length;u++){var l=r.graphicsData[u],h=l.shape,f=l._fillTint,d=l._lineTint;if(i.lineWidth=l.lineWidth,l.type===rn.SHAPES.POLY){i.beginPath();var p=h.points,c=l.holes,_=void 0,v=void 0,g=void 0,m=void 0;i.moveTo(p[0],p[1]);for(var y=2;y<p.length;y+=2)i.lineTo(p[y],p[y+1]);if(h.closed&&i.closePath(),c.length>0){_=0,g=p[0],m=p[1];for(var x=2;x+2<p.length;x+=2)_+=(p[x]-g)*(p[x+3]-m)-(p[x+2]-g)*(p[x+1]-m);for(var T=0;T<c.length;T++)if(p=c[T].points,!!p){v=0,g=p[0],m=p[1];for(var E=2;E+2<p.length;E+=2)v+=(p[E]-g)*(p[E+3]-m)-(p[E+2]-g)*(p[E+1]-m);if(v*_<0){i.moveTo(p[0],p[1]);for(var S=2;S<p.length;S+=2)i.lineTo(p[S],p[S+1])}else{i.moveTo(p[p.length-2],p[p.length-1]);for(var b=p.length-4;b>=0;b-=2)i.lineTo(p[b],p[b+1])}c[T].close&&i.closePath()}}l.fill&&(i.globalAlpha=l.fillAlpha*a,i.fillStyle="#"+("00000"+(f|0).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*a,i.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),i.stroke())}else if(l.type===rn.SHAPES.RECT)(l.fillColor||l.fillColor===0)&&(i.globalAlpha=l.fillAlpha*a,i.fillStyle="#"+("00000"+(f|0).toString(16)).substr(-6),i.fillRect(h.x,h.y,h.width,h.height)),l.lineWidth&&(i.globalAlpha=l.lineAlpha*a,i.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),i.strokeRect(h.x,h.y,h.width,h.height));else if(l.type===rn.SHAPES.CIRC)i.beginPath(),i.arc(h.x,h.y,h.radius,0,2*Math.PI),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*a,i.fillStyle="#"+("00000"+(f|0).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*a,i.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),i.stroke());else if(l.type===rn.SHAPES.ELIP){var w=h.width*2,P=h.height*2,A=h.x-w/2,$=h.y-P/2;i.beginPath();var B=.5522848,I=w/2*B,G=P/2*B,F=A+w,U=$+P,V=A+w/2,j=$+P/2;i.moveTo(A,j),i.bezierCurveTo(A,j-G,V-I,$,V,$),i.bezierCurveTo(V+I,$,F,j-G,F,j),i.bezierCurveTo(F,j+G,V+I,U,V,U),i.bezierCurveTo(V-I,U,A,j+G,A,j),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*a,i.fillStyle="#"+("00000"+(f|0).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*a,i.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),i.stroke())}else if(l.type===rn.SHAPES.RREC){var M=h.x,C=h.y,N=h.width,W=h.height,Y=h.radius,Q=Math.min(N,W)/2|0;Y=Y>Q?Q:Y,i.beginPath(),i.moveTo(M,C+Y),i.lineTo(M,C+W-Y),i.quadraticCurveTo(M,C+W,M+Y,C+W),i.lineTo(M+N-Y,C+W),i.quadraticCurveTo(M+N,C+W,M+N,C+W-Y),i.lineTo(M+N,C+Y),i.quadraticCurveTo(M+N,C,M+N-Y,C),i.lineTo(M+Y,C),i.quadraticCurveTo(M,C,M,C+Y),i.closePath(),(l.fillColor||l.fillColor===0)&&(i.globalAlpha=l.fillAlpha*a,i.fillStyle="#"+("00000"+(f|0).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*a,i.strokeStyle="#"+("00000"+(d|0).toString(16)).substr(-6),i.stroke())}}},e.prototype.updateGraphicsTint=function(r){r._prevTint=r.tint,r.canvasTintDirty=r.dirty;for(var n=(r.tint>>16&255)/255,i=(r.tint>>8&255)/255,a=(r.tint&255)/255,o=0;o<r.graphicsData.length;++o){var s=r.graphicsData[o],u=s.fillColor|0,l=s.lineColor|0;s._fillTint=((u>>16&255)/255*n*255<<16)+((u>>8&255)/255*i*255<<8)+(u&255)/255*a*255,s._lineTint=((l>>16&255)/255*n*255<<16)+((l>>8&255)/255*i*255<<8)+(l&255)/255*a*255}},e.prototype.renderPolygon=function(r,n,i){i.moveTo(r[0],r[1]);for(var a=1;a<r.length/2;++a)i.lineTo(r[a*2],r[a*2+1]);n&&i.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();us.default=jh;PP.default.registerPlugin("graphics",jh);var ls={};ls.__esModule=!0;var OP=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),ir=J,CP=L;function AP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DP=function(){OP(e,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]);function e(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;AP(this,e),this.baseTexture=t,this.textures={},this.animations={},this.data=r,this.resolution=this._updateResolution(n||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(r){var n=this.data.meta.scale,i=(0,CP.getResolutionOfUrl)(r,null);return i===null&&(i=n!==void 0?parseFloat(n):1),i!==1&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},e.prototype.parse=function(r){this._batchIndex=0,this._callback=r,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(r){for(var n=r,i=e.BATCH_SIZE,a=this.baseTexture.sourceScale;n-r<i&&n<this._frameKeys.length;){var o=this._frameKeys[n],s=this._frames[o],u=s.frame;if(u){var l=null,h=null,f=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,d=new ir.Rectangle(0,0,Math.floor(f.w*a)/this.resolution,Math.floor(f.h*a)/this.resolution);s.rotated?l=new ir.Rectangle(Math.floor(u.x*a)/this.resolution,Math.floor(u.y*a)/this.resolution,Math.floor(u.h*a)/this.resolution,Math.floor(u.w*a)/this.resolution):l=new ir.Rectangle(Math.floor(u.x*a)/this.resolution,Math.floor(u.y*a)/this.resolution,Math.floor(u.w*a)/this.resolution,Math.floor(u.h*a)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(h=new ir.Rectangle(Math.floor(s.spriteSourceSize.x*a)/this.resolution,Math.floor(s.spriteSourceSize.y*a)/this.resolution,Math.floor(u.w*a)/this.resolution,Math.floor(u.h*a)/this.resolution)),this.textures[o]=new ir.Texture(this.baseTexture,l,d,h,s.rotated?2:0,s.anchor),ir.Texture.addToCache(this.textures[o],o)}n++}},e.prototype._processAnimations=function(){var r=this.data.animations||{};for(var n in r){this.animations[n]=[];for(var i=r[n],a=Array.isArray(i),o=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(o>=i.length)break;s=i[o++]}else{if(o=i.next(),o.done)break;s=o.value}var u=s;this.animations[n].push(this.textures[u])}}},e.prototype._parseComplete=function(){var r=this._callback;this._callback=null,this._batchIndex=0,r.call(this,this.textures)},e.prototype._nextBatch=function(){var r=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){r._batchIndex*e.BATCH_SIZE<r._frameKeys.length?r._nextBatch():(r._processAnimations(),r._parseComplete())},0)},e.prototype.destroy=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;for(var n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,r&&this.baseTexture.destroy(),this.baseTexture=null},e}();ls.default=DP;var bi={},Si={};Si.__esModule=!0;Si.autoDetectRenderer=UP;var IP=L,LP=kP(IP),$P=Lt,BP=ef($P),FP=jt,GP=ef(FP);function ef(e){return e&&e.__esModule?e:{default:e}}function kP(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function UP(e,t,r,n){var i=e&&e.forceCanvas;return n!==void 0&&(i=n),!i&&LP.isWebGLSupported()?new GP.default(e,t,r):new BP.default(e,t,r)}bi.__esModule=!0;var NP=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),HP=Si,XP=Dt,WP=rf(XP),tf=at,VP=ue,qP=rf(VP),YP=k;function rf(e){return e&&e.__esModule?e:{default:e}}function zP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var KP=function(){function e(t,r,n,i,a){zP(this,e),typeof t=="number"&&(t=Object.assign({width:t,height:r||qP.default.RENDER_OPTIONS.height,forceCanvas:!!i,sharedTicker:!!a},n)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,HP.autoDetectRenderer)(t),this.stage=new WP.default,this._ticker=null,this.ticker=t.sharedTicker?tf.shared:new tf.Ticker,t.autoStart&&this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(r,n){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}this.stage.destroy(n),this.stage=null,this.renderer.destroy(r),this.renderer=null,this._options=null},NP(e,[{key:"ticker",set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,YP.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}();bi.default=KP;(function(e){e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var t=k;Object.keys(t).forEach(function(D){D==="default"||D==="__esModule"||Object.defineProperty(e,D,{enumerable:!0,get:function(){return t[D]}})});var r=ce;Object.keys(r).forEach(function(D){D==="default"||D==="__esModule"||Object.defineProperty(e,D,{enumerable:!0,get:function(){return r[D]}})});var n=Se.exports;Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return H(n).default}});var i=Pr;Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return H(i).default}});var a=Un;Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return H(a).default}});var o=Dt;Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return H(o).default}});var s=Wn;Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return H(s).default}});var u=Hn;Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return H(u).default}});var l=Rr;Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return H(l).default}});var h=Fr;Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return H(h).default}});var f=io;Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return H(f).default}});var d=Jt;Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return H(d).default}});var p=co;Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return H(p).default}});var c=Ho;Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return H(c).default}});var _=yi;Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return H(_).default}});var v=mi;Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return H(v).default}});var g=Yo;Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return H(g).default}});var m=Ti;Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return H(m).default}});var y=jo;Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return H(y).default}});var x=us;Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return H(x).default}});var T=ls;Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return H(T).default}});var E=ke;Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return H(E).default}});var S=pi;Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return H(S).default}});var b=it;Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return H(b).default}});var w=Yr;Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return H(w).default}});var P=si;Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return H(P).default}});var A=ri;Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return H(A).default}});var $=ni;Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return H($).default}});var B=li;Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return H(B).default}});var I=Bt;Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return H(I).default}});var G=$t;Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return H(G).default}});var F=Qt;Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return H(F).default}});var U=er;Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return H(U).default}});var V=vi;Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return H(V).default}});var j=ci;Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return H(j).default}});var M=di;Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return H(M).default}});var C=bi;Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return H(C).default}});var N=Si;Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return N.autoDetectRenderer}});var W=L,Y=me(W),Q=at,re=me(Q),se=ue,_e=H(se),ge=Lt,Ae=H(ge),fe=jt,ye=H(fe);function me(D){if(D&&D.__esModule)return D;var He={};if(D!=null)for(var oa in D)Object.prototype.hasOwnProperty.call(D,oa)&&(He[oa]=D[oa]);return He.default=D,He}function H(D){return D&&D.__esModule?D:{default:D}}e.settings=_e.default,e.utils=Y,e.ticker=re,e.CanvasRenderer=Ae.default,e.WebGLRenderer=ye.default})(J);var hs={};hs.__esModule=!0;hs.default=ZP;var nf={};function R(e){if(!nf[e]){var t=new Error().stack;typeof t=="undefined"?console.warn("Deprecation Warning: ",e):(t=t.split(`
`).splice(3).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t))),nf[e]=!0}}function ZP(e){var t=e.mesh,r=e.particles,n=e.extras,i=e.filters,a=e.prepare,o=e.loaders,s=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return R("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return R("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return R("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return R("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return R("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return R("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return R("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return R("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return R("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return R("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return R("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return R("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return R("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return R("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return R("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return R("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(_){R("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=_}},FILTER_RESOLUTION:{get:function(){return R("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(_){R("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=_}},RESOLUTION:{get:function(){return R("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(_){R("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=_}},MIPMAP_TEXTURES:{get:function(){return R("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(_){R("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=_}},SPRITE_BATCH_SIZE:{get:function(){return R("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(_){R("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=_}},SPRITE_MAX_TEXTURES:{get:function(){return R("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(_){R("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=_}},RETINA_PREFIX:{get:function(){return R("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(_){R("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=_}},DEFAULT_RENDER_OPTIONS:{get:function(){return R("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=function(_){var v=u[_];Object.defineProperty(e[v.parent],"DEFAULT",{get:function(){return R("PIXI."+v.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+v.target)),e.settings[v.target]},set:function(m){R("PIXI."+v.parent+".DEFAULT has been deprecated, "+("please use PIXI.settings."+v.target)),e.settings[v.target]=m}})},h=0;h<u.length;h++)l(h);Object.defineProperties(e.settings,{PRECISION:{get:function(){return R("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(_){R("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=_}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return R("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}}),n&&Object.defineProperties(n,{TextureTransform:{get:function(){return R("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),e.TextureMatrix}}}),e.DisplayObject.prototype.generateTexture=function(_,v,g){return R("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),_.generateTexture(this,v,g)},e.Graphics.prototype.generateTexture=function(_,v){return R("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(_,v)},e.GroupD8.isSwapWidthHeight=function(_){return R("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),e.GroupD8.isVertical(_)},e.RenderTexture.prototype.render=function(_,v,g,m){this.legacyRenderer.render(_,this,g,v,!m),R("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(_){return R("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(_)},e.RenderTexture.prototype.getBase64=function(_){return R("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(_)},e.RenderTexture.prototype.getCanvas=function(_){return R("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(_)},e.RenderTexture.prototype.getPixels=function(_){return R("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(_)},e.Sprite.prototype.setTexture=function(_){this.texture=_,R("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(_){this.text=_,R("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(_){this.text=_,R("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(_){return R("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(_)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return R("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return R("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return R("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(_){this.style=_,R("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(_){return R("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(_)},e.Text.getFontStyle=function(_){return R("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),_=_||{},_ instanceof e.TextStyle||(_=new e.TextStyle(_)),_.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){R("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var _=typeof this._fontSize=="number"?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+_+" "+this._fontFamily},set:function(_){R("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),_.indexOf("italic")>1?this._fontStyle="italic":_.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",_.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var v=_.split(" "),g=-1;this._fontSize=26;for(var m=0;m<v.length;++m)if(v[m].match(/(px|pt|em|%)/)){g=m,this._fontSize=v[m];break}this._fontWeight="normal";for(var y=0;y<g;++y)if(v[y].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=v[y];break}if(g>-1&&g<v.length-1){this._fontFamily="";for(var x=g+1;x<v.length;++x)this._fontFamily+=v[x]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(_){this.frame=_,R("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(_,v){e.Texture.addToCache(_,v),R("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(_){return R("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(_),e.Texture.removeFromCache(_)},Object.defineProperties(i,{AbstractFilter:{get:function(){return R("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return R("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}},VoidFilter:{get:function(){return R("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),i.AlphaFilter}}}),e.utils.uuid=function(){return R("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return R("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var f=!0;if(Object.defineProperty(e.utils,"_saidHello",{set:function(_){_&&(R("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),f=_},get:function(){return f}}),a.BasePrepare&&(a.BasePrepare.prototype.register=function(_,v){return R("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),_&&this.registerFindHook(_),v&&this.registerUploadHook(v),this}),a.canvas&&Object.defineProperty(a.canvas,"UPLOADS_PER_FRAME",{set:function(){R("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return R("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.webgl&&Object.defineProperty(a.webgl,"UPLOADS_PER_FRAME",{set:function(){R("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return R("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.Loader){var d=o.Resource,p=o.Loader;Object.defineProperties(d.prototype,{isJson:{get:function(){return R("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===d.TYPE.JSON}},isXml:{get:function(){return R("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===d.TYPE.XML}},isImage:{get:function(){return R("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===d.TYPE.IMAGE}},isAudio:{get:function(){return R("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===d.TYPE.AUDIO}},isVideo:{get:function(){return R("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===d.TYPE.VIDEO}}}),Object.defineProperties(p.prototype,{before:{get:function(){return R("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return R("The after() method is deprecated, please use use()."),this.use}}})}s.interactiveTarget&&Object.defineProperty(s.interactiveTarget,"defaultCursor",{set:function(_){R("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=_},get:function(){return R("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),s.InteractionManager&&(Object.defineProperty(s.InteractionManager,"defaultCursorStyle",{set:function(_){R("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=_},get:function(){return R("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(s.InteractionManager,"currentCursorStyle",{set:function(_){R("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=_},get:function(){return R("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}var af={},wi={};wi.__esModule=!0;wi.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};var fs={};fs.__esModule=!0;var JP=J,nn=tR(JP),QP=Nn.exports,of=sf(QP),jP=wi,eR=sf(jP);function sf(e){return e&&e.__esModule?e:{default:e}}function tR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function rR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}nn.utils.mixins.delayMixin(nn.DisplayObject.prototype,eR.default);var nR=9,Pi=100,iR=0,aR=0,uf=2,lf=1,oR=-1e3,sR=-1e3,uR=2,cs=function(){function e(t){rR(this,e),(of.default.tablet||of.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var r=document.createElement("div");r.style.width=Pi+"px",r.style.height=Pi+"px",r.style.position="absolute",r.style.top=iR+"px",r.style.left=aR+"px",r.style.zIndex=uf,this.div=r,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var r=this,n=document.createElement("button");n.style.width=lf+"px",n.style.height=lf+"px",n.style.position="absolute",n.style.top=oR+"px",n.style.left=sR+"px",n.style.zIndex=uR,n.style.backgroundColor="#FF0000",n.title="HOOK DIV",n.addEventListener("focus",function(){r.isMobileAccessabillity=!0,r.activate(),document.body.removeChild(n)}),document.body.appendChild(n)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){!this.isActive||this.isMobileAccessabillity||(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(r){if(!!r.visible){r.accessible&&r.interactive&&(r._accessibleActive||this.addChild(r),r.renderId=this.renderId);for(var n=r.children,i=0;i<n.length;i++)this.updateAccessibleObjects(n[i])}},e.prototype.update=function(){if(!!this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),n=r.width/this.renderer.width,i=r.height/this.renderer.height,a=this.div;a.style.left=r.left+"px",a.style.top=r.top+"px",a.style.width=this.renderer.width+"px",a.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,nn.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,this.children.length===0&&this.deactivate();else{a=s._accessibleDiv;var u=s.hitArea,l=s.worldTransform;s.hitArea?(a.style.left=(l.tx+u.x*l.a)*n+"px",a.style.top=(l.ty+u.y*l.d)*i+"px",a.style.width=u.width*l.a*n+"px",a.style.height=u.height*l.d*i+"px"):(u=s.getBounds(),this.capHitArea(u),a.style.left=u.x*n+"px",a.style.top=u.y*i+"px",a.style.width=u.width*n+"px",a.style.height=u.height*i+"px",a.title!==s.accessibleTitle&&s.accessibleTitle!==null&&(a.title=s.accessibleTitle),a.getAttribute("aria-label")!==s.accessibleHint&&s.accessibleHint!==null&&a.setAttribute("aria-label",s.accessibleHint))}}this.renderId++}},e.prototype.capHitArea=function(r){r.x<0&&(r.width+=r.x,r.x=0),r.y<0&&(r.height+=r.y,r.y=0),r.x+r.width>this.renderer.width&&(r.width=this.renderer.width-r.x),r.y+r.height>this.renderer.height&&(r.height=this.renderer.height-r.y)},e.prototype.addChild=function(r){var n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=Pi+"px",n.style.height=Pi+"px",n.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=uf,n.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),r.accessibleTitle&&r.accessibleTitle!==null?n.title=r.accessibleTitle:(!r.accessibleHint||r.accessibleHint===null)&&(n.title="displayObject "+r.tabIndex),r.accessibleHint&&r.accessibleHint!==null&&n.setAttribute("aria-label",r.accessibleHint),r._accessibleActive=!0,r._accessibleDiv=n,n.displayObject=r,this.children.push(r),this.div.appendChild(r._accessibleDiv),r._accessibleDiv.tabIndex=r.tabIndex},e.prototype._onClick=function(r){var n=this.renderer.plugins.interaction;n.dispatchEvent(r.target.displayObject,"click",n.eventData)},e.prototype._onFocus=function(r){r.target.getAttribute("aria-live","off")||r.target.setAttribute("aria-live","assertive");var n=this.renderer.plugins.interaction;n.dispatchEvent(r.target.displayObject,"mouseover",n.eventData)},e.prototype._onFocusOut=function(r){r.target.getAttribute("aria-live","off")||r.target.setAttribute("aria-live","polite");var n=this.renderer.plugins.interaction;n.dispatchEvent(r.target.displayObject,"mouseout",n.eventData)},e.prototype._onKeyDown=function(r){r.keyCode===nR&&this.activate()},e.prototype._onMouseMove=function(r){r.movementX===0&&r.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var r=0;r<this.children.length;r++)this.children[r].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();fs.default=cs;nn.WebGLRenderer.registerPlugin("accessibility",cs);nn.CanvasRenderer.registerPlugin("accessibility",cs);(function(e){e.__esModule=!0;var t=wi;Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return n(t).default}});var r=fs;Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return n(r).default}});function n(i){return i&&i.__esModule?i:{default:i}}})(af);var hf={},ds={};ds.__esModule=!0;var lR=J,an=hR(lR);function hR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function fR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ff=new an.Rectangle,cf=4,df=function(){function e(t){fR(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(r){var n=new Image;return n.src=this.base64(r),n},e.prototype.base64=function(r){return this.canvas(r).toDataURL()},e.prototype.canvas=function(r){var n=this.renderer,i=void 0,a=void 0,o=void 0,s=!1,u=void 0,l=!1;r&&(r instanceof an.RenderTexture?u=r:(u=this.renderer.generateTexture(r),l=!0)),u?(i=u.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],a=i.resolution,o=u.frame,s=!1):(i=this.renderer.rootRenderTarget,a=i.resolution,s=!0,o=ff,o.width=i.size.width,o.height=i.size.height);var h=Math.floor(o.width*a+1e-4),f=Math.floor(o.height*a+1e-4),d=new an.CanvasRenderTarget(h,f,1);if(i){n.bindRenderTarget(i);var p=new Uint8Array(cf*h*f),c=n.gl;c.readPixels(o.x*a,o.y*a,h,f,c.RGBA,c.UNSIGNED_BYTE,p);var _=d.context.getImageData(0,0,h,f);_.data.set(p),d.context.putImageData(_,0,0),s&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-f))}return l&&u.destroy(!0),d.canvas},e.prototype.pixels=function(r){var n=this.renderer,i=void 0,a=void 0,o=void 0,s=void 0,u=!1;r&&(r instanceof an.RenderTexture?s=r:(s=this.renderer.generateTexture(r),u=!0)),s?(i=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],a=i.resolution,o=s.frame):(i=this.renderer.rootRenderTarget,a=i.resolution,o=ff,o.width=i.size.width,o.height=i.size.height);var l=o.width*a,h=o.height*a,f=new Uint8Array(cf*l*h);if(i){n.bindRenderTarget(i);var d=n.gl;d.readPixels(o.x*a,o.y*a,l,h,d.RGBA,d.UNSIGNED_BYTE,f)}return u&&s.destroy(!0),f},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();ds.default=df;an.WebGLRenderer.registerPlugin("extract",df);var ps={};ps.__esModule=!0;var cR=J,on=dR(cR);function dR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function pR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var pf=new on.Rectangle,vf=function(){function e(t){pR(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(r){var n=new Image;return n.src=this.base64(r),n},e.prototype.base64=function(r){return this.canvas(r).toDataURL()},e.prototype.canvas=function(r){var n=this.renderer,i=void 0,a=void 0,o=void 0,s=void 0;r&&(r instanceof on.RenderTexture?s=r:s=n.generateTexture(r)),s?(i=s.baseTexture._canvasRenderTarget.context,a=s.baseTexture._canvasRenderTarget.resolution,o=s.frame):(i=n.rootContext,a=n.resolution,o=pf,o.width=this.renderer.width,o.height=this.renderer.height);var u=Math.floor(o.width*a+1e-4),l=Math.floor(o.height*a+1e-4),h=new on.CanvasRenderTarget(u,l,1),f=i.getImageData(o.x*a,o.y*a,u,l);return h.context.putImageData(f,0,0),h.canvas},e.prototype.pixels=function(r){var n=this.renderer,i=void 0,a=void 0,o=void 0,s=void 0;return r&&(r instanceof on.RenderTexture?s=r:s=n.generateTexture(r)),s?(i=s.baseTexture._canvasRenderTarget.context,a=s.baseTexture._canvasRenderTarget.resolution,o=s.frame):(i=n.rootContext,o=pf,o.width=n.width,o.height=n.height),i.getImageData(0,0,o.width*a,o.height*a).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();ps.default=vf;on.CanvasRenderer.registerPlugin("extract",vf);(function(e){e.__esModule=!0;var t=ds;Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return n(t).default}});var r=ps;Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return n(r).default}});function n(i){return i&&i.__esModule?i:{default:i}}})(hf);var vs={},_s={};_s.__esModule=!0;var vR=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_R=J,ut=gR(_R);function gR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function yR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mR(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function xR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var TR=function(e){xR(t,e);function t(r,n){yR(this,t);var i=mR(this,e.call(this,r[0]instanceof ut.Texture?r[0]:r[0].texture));return i._textures=null,i._durations=null,i.textures=r,i._autoUpdate=n!==!1,i.animationSpeed=1,i.loop=!0,i.updateAnchor=!1,i.onComplete=null,i.onFrameChange=null,i.onLoop=null,i._currentTime=0,i.playing=!1,i}return t.prototype.stop=function(){!this.playing||(this.playing=!1,this._autoUpdate&&ut.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&ut.ticker.shared.add(this.update,this,ut.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(n){this.stop();var i=this.currentFrame;this._currentTime=n,i!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(n){var i=this.currentFrame;this._currentTime=n,i!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(n){var i=this.animationSpeed*n,a=this.currentFrame;if(this._durations!==null){var o=this._currentTime%1*this._durations[this.currentFrame];for(o+=i/60*1e3;o<0;)this._currentTime--,o+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*n);for(this._currentTime=Math.floor(this._currentTime);o>=this._durations[this.currentFrame];)o-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=o/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):a!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<a?this.onLoop():this.animationSpeed<0&&this.currentFrame>a&&this.onLoop()),this.updateTexture())},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(n){this.stop(),e.prototype.destroy.call(this,n)},t.fromFrames=function(n){for(var i=[],a=0;a<n.length;++a)i.push(ut.Texture.fromFrame(n[a]));return new t(i)},t.fromImages=function(n){for(var i=[],a=0;a<n.length;++a)i.push(ut.Texture.fromImage(n[a]));return new t(i)},vR(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(n){if(n[0]instanceof ut.Texture)this._textures=n,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<n.length;i++)this._textures.push(n[i].texture),this._durations.push(n[i].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var n=Math.floor(this._currentTime)%this._textures.length;return n<0&&(n+=this._textures.length),n}}]),t}(ut.Sprite);_s.default=TR;var gs={};gs.__esModule=!0;var ER=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),bR=J,Je=RR(bR),SR=Jt,wR=PR(SR);function PR(e){return e&&e.__esModule?e:{default:e}}function RR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function MR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OR(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function CR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var sn=new Je.Point,AR=function(e){CR(t,e);function t(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100;MR(this,t);var a=OR(this,e.call(this,r));return a.tileTransform=new Je.TransformStatic,a._width=n,a._height=i,a._canvasPattern=null,a.uvTransform=r.transform||new Je.TextureMatrix(r),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return t.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},t.prototype._renderWebGL=function(n){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),n.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this))},t.prototype._renderCanvas=function(n){var i=this._texture;if(!!i.baseTexture.hasLoaded){var a=n.context,o=this.worldTransform,s=n.resolution,u=i.rotate===2,l=i.baseTexture,h=l.resolution,f=this.tilePosition.x/this.tileScale.x%i.orig.width*h,d=this.tilePosition.y/this.tileScale.y%i.orig.height*h;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var p=new Je.CanvasRenderTarget(i.orig.width,i.orig.height,h);if(this.tint!==16777215)this.tintedTexture=wR.default.getTintedTexture(this,this.tint),p.context.drawImage(this.tintedTexture,0,0);else{var c=i._frame.x*h,_=i._frame.y*h,v=i._frame.width*h,g=i._frame.height*h,m=(i.trim?i.trim.width:i.orig.width)*h,y=(i.trim?i.trim.height:i.orig.height)*h,x=(i.trim?i.trim.x:0)*h,T=(i.trim?i.trim.y:0)*h;u?(p.context.rotate(-Math.PI/2),p.context.translate(-y,0),p.context.drawImage(l.source,c,_,v,g,-T,x,y,m)):p.context.drawImage(l.source,c,_,v,g,x,T,m,y)}this.cachedTint=this.tint,this._canvasPattern=p.context.createPattern(p.canvas,"repeat")}a.globalAlpha=this.worldAlpha,a.setTransform(o.a*s,o.b*s,o.c*s,o.d*s,o.tx*s,o.ty*s),n.setBlendMode(this.blendMode),a.fillStyle=this._canvasPattern,a.scale(this.tileScale.x/h,this.tileScale.y/h);var E=this.anchor.x*-this._width*h,S=this.anchor.y*-this._height*h;this.uvRespectAnchor?(a.translate(f,d),a.fillRect(-f+E,-d+S,this._width/this.tileScale.x*h,this._height/this.tileScale.y*h)):(a.translate(f+E,d+S),a.fillRect(-f,-d,this._width/this.tileScale.x*h,this._height/this.tileScale.y*h))}},t.prototype._calculateBounds=function(){var n=this._width*-this._anchor._x,i=this._height*-this._anchor._y,a=this._width*(1-this._anchor._x),o=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,n,i,a,o)},t.prototype.getLocalBounds=function(n){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),n||(this._localBoundsRect||(this._localBoundsRect=new Je.Rectangle),n=this._localBoundsRect),this._bounds.getRectangle(n)):e.prototype.getLocalBounds.call(this,n)},t.prototype.containsPoint=function(n){this.worldTransform.applyInverse(n,sn);var i=this._width,a=this._height,o=-i*this.anchor._x;if(sn.x>=o&&sn.x<o+i){var s=-a*this.anchor._y;if(sn.y>=s&&sn.y<s+a)return!0}return!1},t.prototype.destroy=function(n){e.prototype.destroy.call(this,n),this.tileTransform=null,this.uvTransform=null},t.from=function(n,i,a){return new t(Je.Texture.from(n),i,a)},t.fromFrame=function(n,i,a){var o=Je.utils.TextureCache[n];if(!o)throw new Error('The frameId "'+n+'" does not exist in the texture cache '+this);return new t(o,i,a)},t.fromImage=function(n,i,a,o,s){return new t(Je.Texture.fromImage(n,o,s),i,a)},ER(t,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(n){this.uvTransform.clampMargin=n,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(n){this.tileTransform.scale.copy(n)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(n){this.tileTransform.position.copy(n)}},{key:"width",get:function(){return this._width},set:function(n){this._width=n}},{key:"height",get:function(){return this._height},set:function(n){this._height=n}}]),t}(Je.Sprite);gs.default=AR;var ys={};ys.__esModule=!0;var DR=J,lt=IR(DR),ms=k;function IR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function LR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function BR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ri=new lt.Matrix,_f=function(e){BR(t,e);function t(r){LR(this,t);var n=$R(this,e.call(this,r));return n.shader=null,n.simpleShader=null,n.quad=null,n}return t.prototype.onContextChange=function(){var n=this.renderer.gl;this.shader=new lt.Shader(n,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 sample = texture2D(uSampler, coord);
    gl_FragColor = sample * uColor;
}
`),this.simpleShader=new lt.Shader(n,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`),this.renderer.bindVao(null),this.quad=new lt.Quad(n,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(n){var i=this.renderer,a=this.quad;i.bindVao(a.vao);var o=a.vertices;o[0]=o[6]=n._width*-n.anchor.x,o[1]=o[3]=n._height*-n.anchor.y,o[2]=o[4]=n._width*(1-n.anchor.x),o[5]=o[7]=n._height*(1-n.anchor.y),n.uvRespectAnchor&&(o=a.uvs,o[0]=o[6]=-n.anchor.x,o[1]=o[3]=-n.anchor.y,o[2]=o[4]=1-n.anchor.x,o[5]=o[7]=1-n.anchor.y),a.upload();var s=n._texture,u=s.baseTexture,l=n.tileTransform.localTransform,h=n.uvTransform,f=u.isPowerOfTwo&&s.frame.width===u.width&&s.frame.height===u.height;f&&(u._glTextures[i.CONTEXT_UID]?f=u.wrapMode!==ms.WRAP_MODES.CLAMP:u.wrapMode===ms.WRAP_MODES.CLAMP&&(u.wrapMode=ms.WRAP_MODES.REPEAT));var d=f?this.simpleShader:this.shader;i.bindShader(d);var p=s.width,c=s.height,_=n._width,v=n._height;Ri.set(l.a*p/_,l.b*p/v,l.c*c/_,l.d*c/v,l.tx/_,l.ty/v),Ri.invert(),f?Ri.prepend(h.mapCoord):(d.uniforms.uMapCoord=h.mapCoord.toArray(!0),d.uniforms.uClampFrame=h.uClampFrame,d.uniforms.uClampOffset=h.uClampOffset),d.uniforms.uTransform=Ri.toArray(!0),d.uniforms.uColor=lt.utils.premultiplyTintToRgba(n.tint,n.worldAlpha,d.uniforms.uColor,u.premultipliedAlpha),d.uniforms.translationMatrix=n.transform.worldTransform.toArray(!0),d.uniforms.uSampler=i.bindTexture(s),i.setBlendMode(lt.utils.correctBlendMode(n.blendMode,u.premultipliedAlpha)),a.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(lt.ObjectRenderer);ys.default=_f;lt.WebGLRenderer.registerPlugin("tilingSprite",_f);var xs={};xs.__esModule=!0;var FR=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),GR=J,ht=WR(GR),kR=Bn,UR=gf(kR),NR=L,HR=ue,XR=gf(HR);function gf(e){return e&&e.__esModule?e:{default:e}}function WR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function VR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qR(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function YR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var yf=function(e){YR(t,e);function t(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};VR(this,t);var i=qR(this,e.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:n.tint!==void 0?n.tint:16777215,align:n.align||"left",name:null,size:0},i.font=n.font,i._text=r,i._maxWidth=0,i._maxLineHeight=0,i._letterSpacing=0,i._anchor=new UR.default(function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return t.prototype.updateText=function(){for(var n=t.fonts[this._font.name],i=this._font.size/n.size,a=new ht.Point,o=[],s=[],u=this.text.replace(/(?:\r\n|\r)/g,`
`),l=u.length,h=this._maxWidth*n.size/this._font.size,f=null,d=0,p=0,c=0,_=-1,v=0,g=0,m=0,y=0;y<l;y++){var x=u.charCodeAt(y),T=u.charAt(y);if(/(?:\s)/.test(T)&&(_=y,v=d),T==="\r"||T===`
`){s.push(d),p=Math.max(p,d),++c,++g,a.x=0,a.y+=n.lineHeight,f=null;continue}var E=n.chars[x];!E||(f&&E.kerning[f]&&(a.x+=E.kerning[f]),o.push({texture:E.texture,line:c,charCode:x,position:new ht.Point(a.x+E.xOffset+this._letterSpacing/2,a.y+E.yOffset)}),a.x+=E.xAdvance+this._letterSpacing,d=a.x,m=Math.max(m,E.yOffset+E.texture.height),f=x,_!==-1&&h>0&&a.x>h&&(++g,ht.utils.removeItems(o,1+_-g,1+y-_),y=_,_=-1,s.push(v),p=Math.max(p,v),c++,a.x=0,a.y+=n.lineHeight,f=null))}var S=u.charAt(u.length-1);S!=="\r"&&S!==`
`&&(/(?:\s)/.test(S)&&(d=v),s.push(d),p=Math.max(p,d));for(var b=[],w=0;w<=c;w++){var P=0;this._font.align==="right"?P=p-s[w]:this._font.align==="center"&&(P=(p-s[w])/2),b.push(P)}for(var A=o.length,$=this.tint,B=0;B<A;B++){var I=this._glyphs[B];I?I.texture=o[B].texture:(I=new ht.Sprite(o[B].texture),this._glyphs.push(I)),I.position.x=(o[B].position.x+b[o[B].line])*i,I.position.y=o[B].position.y*i,I.scale.x=I.scale.y=i,I.tint=$,I.parent||this.addChild(I)}for(var G=A;G<this._glyphs.length;++G)this.removeChild(this._glyphs[G]);if(this._textWidth=p*i,this._textHeight=(a.y+n.lineHeight)*i,this.anchor.x!==0||this.anchor.y!==0)for(var F=0;F<A;F++)this._glyphs[F].x-=this._textWidth*this.anchor.x,this._glyphs[F].y-=this._textHeight*this.anchor.y;this._maxLineHeight=m*i},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.registerFont=function(n,i){var a={},o=n.getElementsByTagName("info")[0],s=n.getElementsByTagName("common")[0],u=n.getElementsByTagName("page"),l=(0,NR.getResolutionOfUrl)(u[0].getAttribute("file"),XR.default.RESOLUTION),h={};a.font=o.getAttribute("face"),a.size=parseInt(o.getAttribute("size"),10),a.lineHeight=parseInt(s.getAttribute("lineHeight"),10)/l,a.chars={},i instanceof ht.Texture&&(i=[i]);for(var f=0;f<u.length;f++){var d=u[f].getAttribute("id"),p=u[f].getAttribute("file");h[d]=i instanceof Array?i[f]:i[p]}for(var c=n.getElementsByTagName("char"),_=0;_<c.length;_++){var v=c[_],g=parseInt(v.getAttribute("id"),10),m=v.getAttribute("page")||0,y=new ht.Rectangle(parseInt(v.getAttribute("x"),10)/l+h[m].frame.x/l,parseInt(v.getAttribute("y"),10)/l+h[m].frame.y/l,parseInt(v.getAttribute("width"),10)/l,parseInt(v.getAttribute("height"),10)/l);a.chars[g]={xOffset:parseInt(v.getAttribute("xoffset"),10)/l,yOffset:parseInt(v.getAttribute("yoffset"),10)/l,xAdvance:parseInt(v.getAttribute("xadvance"),10)/l,kerning:{},texture:new ht.Texture(h[m].baseTexture,y),page:m}}for(var x=n.getElementsByTagName("kerning"),T=0;T<x.length;T++){var E=x[T],S=parseInt(E.getAttribute("first"),10)/l,b=parseInt(E.getAttribute("second"),10)/l,w=parseInt(E.getAttribute("amount"),10)/l;a.chars[b]&&(a.chars[b].kerning[S]=w)}return t.fonts[a.font]=a,a},FR(t,[{key:"tint",get:function(){return this._font.tint},set:function(n){this._font.tint=typeof n=="number"&&n>=0?n:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(n){this._font.align=n||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(n){typeof n=="number"?this._anchor.set(n):this._anchor.copy(n)}},{key:"font",get:function(){return this._font},set:function(n){!n||(typeof n=="string"?(n=n.split(" "),this._font.name=n.length===1?n[0]:n.slice(1).join(" "),this._font.size=n.length>=2?parseInt(n[0],10):t.fonts[this._font.name].size):(this._font.name=n.name,this._font.size=typeof n.size=="number"?n.size:parseInt(n.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(n){n=n.toString()||" ",this._text!==n&&(this._text=n,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(n){this._maxWidth!==n&&(this._maxWidth=n,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(n){this._letterSpacing!==n&&(this._letterSpacing=n,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),t}(ht.Container);xs.default=yf;yf.fonts={};var zR=J,ft=JR(zR),KR=ke,Ts=xf(KR),ZR=it,Es=xf(ZR),mf=L;function xf(e){return e&&e.__esModule?e:{default:e}}function JR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function QR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Be=ft.DisplayObject,Tf=new ft.Matrix;Be.prototype._cacheAsBitmap=!1;Be.prototype._cacheData=!1;var jR=function e(){QR(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(Be.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var r=void 0;t?(this._cacheData||(this._cacheData=new jR),r=this._cacheData,r.originalRenderWebGL=this.renderWebGL,r.originalRenderCanvas=this.renderCanvas,r.originalUpdateTransform=this.updateTransform,r.originalCalculateBounds=this.calculateBounds,r.originalGetLocalBounds=this.getLocalBounds,r.originalDestroy=this.destroy,r.originalContainsPoint=this.containsPoint,r.originalMask=this._mask,r.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(r=this._cacheData,r.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=r.originalRenderWebGL,this.renderCanvas=r.originalRenderCanvas,this.calculateBounds=r.originalCalculateBounds,this.getLocalBounds=r.originalGetLocalBounds,this.destroy=r.originalDestroy,this.updateTransform=r.originalUpdateTransform,this.containsPoint=r.originalContainsPoint,this._mask=r.originalMask,this.filterArea=r.originalFilterArea)}}}});Be.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))};Be.prototype._initCachedDisplayObject=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.alpha;this.alpha=1,t.currentRenderer.flush();var n=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var i=this._filters[0].padding;n.pad(i)}n.ceil(ft.settings.RESOLUTION);var a=t._activeRenderTarget,o=t.filterManager.filterStack,s=ft.RenderTexture.create(n.width,n.height),u="cacheAsBitmap_"+(0,mf.uid)();this._cacheData.textureCacheId=u,Es.default.addToCache(s.baseTexture,u),Ts.default.addToCache(s,u);var l=Tf;l.tx=-n.x,l.ty=-n.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,l,!0),t.bindRenderTarget(a),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new ft.Sprite(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(n.x/n.width),h.anchor.y=-(n.y/n.height),h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}};Be.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Be.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var r=this.getLocalBounds(),n=this.alpha;this.alpha=1;var i=t.context;r.ceil(ft.settings.RESOLUTION);var a=ft.RenderTexture.create(r.width,r.height),o="cacheAsBitmap_"+(0,mf.uid)();this._cacheData.textureCacheId=o,Es.default.addToCache(a.baseTexture,o),Ts.default.addToCache(a,o);var s=Tf;this.transform.localTransform.copy(s),s.invert(),s.tx-=r.x,s.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,a,!0,s,!1),t.context=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new ft.Sprite(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(r.x/r.width),u.anchor.y=-(r.y/r.height),u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}};Be.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID};Be.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()};Be.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Es.default.removeFromCache(this._cacheData.textureCacheId),Ts.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Be.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};var eM=J,Ef=tM(eM);function tM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Ef.DisplayObject.prototype.name=null;Ef.Container.prototype.getChildByName=function(t){for(var r=0;r<this.children.length;r++)if(this.children[r].name===t)return this.children[r];return null};var rM=J,bf=nM(rM);function nM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}bf.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new bf.Point,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.parent?this.parent.toGlobal(this.position,t,r):(t.x=this.position.x,t.y=this.position.y),t};(function(e){e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var t=_s;Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return a(t).default}});var r=gs;Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return a(r).default}});var n=ys;Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return a(n).default}});var i=xs;Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return a(i).default}});function a(o){return o&&o.__esModule?o:{default:o}}})(vs);var Sf={},bs={};bs.__esModule=!0;var iM=J,aM=oM(iM);function oM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function sM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function lM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hM=function(e){lM(t,e);function t(){return sM(this,t),uM(this,e.call(this,`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

uniform vec4 filterArea;

varying vec2 vTextureCoord;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

void texcoords(vec2 fragCoord, vec2 resolution,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    vec2 inverseVP = 1.0 / resolution.xy;
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

   vTextureCoord = aTextureCoord;

   vec2 fragCoord = vTextureCoord * filterArea.xy;

   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}`,`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.
 
 --
 
 From:
 https://github.com/mitsuhiko/webgl-meincraft
 
 Copyright (c) 2011 by Armin Ronacher.
 
 Some rights reserved.
 
 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:
 
 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.
 
 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.
 
 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.
 
 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));
    
    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));
    
    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);
    
    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;
    
    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);
    
    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec2 fragCoord = vTextureCoord * filterArea.xy;

      vec4 color;

    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`))}return t}(aM.Filter);bs.default=hM;var Ss={};Ss.__esModule=!0;var fM=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),cM=J,dM=pM(cM);function pM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function vM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function gM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var yM=function(e){gM(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:.5,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Math.random();vM(this,t);var i=_M(this,e.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`));return i.noise=r,i.seed=n,i}return fM(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(n){this.uniforms.uNoise=n}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(n){this.uniforms.uSeed=n}}]),t}(dM.Filter);Ss.default=yM;var ws={};ws.__esModule=!0;var mM=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),xM=J,Ps=TM(xM);function TM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function EM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function SM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wM=function(e){SM(t,e);function t(r,n){EM(this,t);var i=new Ps.Matrix;r.renderable=!1;var a=bM(this,e.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

void main(void)
{
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;
   vTextureCoord = aTextureCoord;
}`,`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;

uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy *= scale / filterArea.xy;

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));
}
`));return a.maskSprite=r,a.maskMatrix=i,a.uniforms.mapSampler=r._texture,a.uniforms.filterMatrix=i,a.uniforms.scale={x:1,y:1},n==null&&(n=20),a.scale=new Ps.Point(n,n),a}return t.prototype.apply=function(n,i,a){this.uniforms.filterMatrix=n.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,n.applyFilter(this,i,a)},mM(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(n){this.uniforms.mapSampler=n}}]),t}(Ps.Filter);ws.default=wM;var Rs={},Mi={},Oi={};Oi.__esModule=!0;Oi.default=RM;var PM=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join(`
`);function RM(e,t){var r=Math.ceil(e/2),n=PM,i="",a=void 0;t?a="vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<e;o++){var s=a.replace("%index%",o);s=s.replace("%sampleIndex%",o-(r-1)+".0"),i+=s,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e),n}var Ci={};Ci.__esModule=!0;Ci.default=CM;var MM={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},OM=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function CM(e){for(var t=MM[e],r=t.length,n=OM,i="",a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",o=void 0,s=0;s<e;s++){var u=a.replace("%index%",s);o=s,s>=r&&(o=e-s-1),u=u.replace("%value%",t[o]),i+=u,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",e),n}var Ai={};Ai.__esModule=!0;Ai.default=AM;function AM(e){for(var t=e.getParameter(e.MAX_VARYING_VECTORS),r=15;r>t;)r-=2;return r}Mi.__esModule=!0;var DM=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),IM=J,wf=GM(IM),LM=Oi,Pf=Ms(LM),$M=Ci,Rf=Ms($M),BM=Ai,FM=Ms(BM);function Ms(e){return e&&e.__esModule?e:{default:e}}function GM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function kM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function NM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var HM=function(e){NM(t,e);function t(r,n,i,a){kM(this,t),a=a||5;var o=(0,Pf.default)(a,!0),s=(0,Rf.default)(a),u=UM(this,e.call(this,o,s));return u.resolution=i||wf.settings.RESOLUTION,u._quality=0,u.quality=n||4,u.strength=r||8,u.firstRun=!0,u}return t.prototype.apply=function(n,i,a,o){if(this.firstRun){var s=n.renderer.gl,u=(0,FM.default)(s);this.vertexSrc=(0,Pf.default)(u,!0),this.fragmentSrc=(0,Rf.default)(u),this.firstRun=!1}if(this.uniforms.strength=1/a.size.width*(a.size.width/i.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)n.applyFilter(this,i,a,o);else{for(var l=n.getRenderTarget(!0),h=i,f=l,d=0;d<this.passes-1;d++){n.applyFilter(this,h,f,!0);var p=f;f=h,h=p}n.applyFilter(this,h,a,o),n.returnRenderTarget(l)}},DM(t,[{key:"blur",get:function(){return this.strength},set:function(n){this.padding=Math.abs(n)*2,this.strength=n}},{key:"quality",get:function(){return this._quality},set:function(n){this._quality=n,this.passes=n}}]),t}(wf.Filter);Mi.default=HM;var Di={};Di.__esModule=!0;var XM=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),WM=J,Mf=KM(WM),VM=Oi,Of=Os(VM),qM=Ci,Cf=Os(qM),YM=Ai,zM=Os(YM);function Os(e){return e&&e.__esModule?e:{default:e}}function KM(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function ZM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function QM(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var jM=function(e){QM(t,e);function t(r,n,i,a){ZM(this,t),a=a||5;var o=(0,Of.default)(a,!1),s=(0,Cf.default)(a),u=JM(this,e.call(this,o,s));return u.resolution=i||Mf.settings.RESOLUTION,u._quality=0,u.quality=n||4,u.strength=r||8,u.firstRun=!0,u}return t.prototype.apply=function(n,i,a,o){if(this.firstRun){var s=n.renderer.gl,u=(0,zM.default)(s);this.vertexSrc=(0,Of.default)(u,!1),this.fragmentSrc=(0,Cf.default)(u),this.firstRun=!1}if(this.uniforms.strength=1/a.size.height*(a.size.height/i.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)n.applyFilter(this,i,a,o);else{for(var l=n.getRenderTarget(!0),h=i,f=l,d=0;d<this.passes-1;d++){n.applyFilter(this,h,f,!0);var p=f;f=h,h=p}n.applyFilter(this,h,a,o),n.returnRenderTarget(l)}},XM(t,[{key:"blur",get:function(){return this.strength},set:function(n){this.padding=Math.abs(n)*2,this.strength=n}},{key:"quality",get:function(){return this._quality},set:function(n){this._quality=n,this.passes=n}}]),t}(Mf.Filter);Di.default=jM;Rs.__esModule=!0;var eO=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),tO=J,Af=oO(tO),rO=Mi,nO=Df(rO),iO=Di,aO=Df(iO);function Df(e){return e&&e.__esModule?e:{default:e}}function oO(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function sO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uO(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function lO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hO=function(e){lO(t,e);function t(r,n,i,a){sO(this,t);var o=uO(this,e.call(this));return o.blurXFilter=new nO.default(r,n,i,a),o.blurYFilter=new aO.default(r,n,i,a),o.padding=0,o.resolution=i||Af.settings.RESOLUTION,o.quality=n||4,o.blur=r||8,o}return t.prototype.apply=function(n,i,a){var o=n.getRenderTarget(!0);this.blurXFilter.apply(n,i,o,!0),this.blurYFilter.apply(n,o,a,!1),n.returnRenderTarget(o)},eO(t,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(n){this.blurXFilter.blur=this.blurYFilter.blur=n,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(n){this.blurXFilter.quality=this.blurYFilter.quality=n}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(n){this.blurXFilter.blur=n,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(n){this.blurYFilter.blur=n,this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(n){this.blurYFilter._blendMode=n}}]),t}(Af.Filter);Rs.default=hO;var Cs={};Cs.__esModule=!0;var fO=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),cO=J,dO=pO(cO);function pO(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function vO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function gO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var As=function(e){gO(t,e);function t(){vO(this,t);var r=_O(this,e.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`));return r.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],r.alpha=1,r}return t.prototype._loadMatrix=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=n;i&&(this._multiply(a,this.uniforms.m,n),a=this._colorMatrix(a)),this.uniforms.m=a},t.prototype._multiply=function(n,i,a){return n[0]=i[0]*a[0]+i[1]*a[5]+i[2]*a[10]+i[3]*a[15],n[1]=i[0]*a[1]+i[1]*a[6]+i[2]*a[11]+i[3]*a[16],n[2]=i[0]*a[2]+i[1]*a[7]+i[2]*a[12]+i[3]*a[17],n[3]=i[0]*a[3]+i[1]*a[8]+i[2]*a[13]+i[3]*a[18],n[4]=i[0]*a[4]+i[1]*a[9]+i[2]*a[14]+i[3]*a[19]+i[4],n[5]=i[5]*a[0]+i[6]*a[5]+i[7]*a[10]+i[8]*a[15],n[6]=i[5]*a[1]+i[6]*a[6]+i[7]*a[11]+i[8]*a[16],n[7]=i[5]*a[2]+i[6]*a[7]+i[7]*a[12]+i[8]*a[17],n[8]=i[5]*a[3]+i[6]*a[8]+i[7]*a[13]+i[8]*a[18],n[9]=i[5]*a[4]+i[6]*a[9]+i[7]*a[14]+i[8]*a[19]+i[9],n[10]=i[10]*a[0]+i[11]*a[5]+i[12]*a[10]+i[13]*a[15],n[11]=i[10]*a[1]+i[11]*a[6]+i[12]*a[11]+i[13]*a[16],n[12]=i[10]*a[2]+i[11]*a[7]+i[12]*a[12]+i[13]*a[17],n[13]=i[10]*a[3]+i[11]*a[8]+i[12]*a[13]+i[13]*a[18],n[14]=i[10]*a[4]+i[11]*a[9]+i[12]*a[14]+i[13]*a[19]+i[14],n[15]=i[15]*a[0]+i[16]*a[5]+i[17]*a[10]+i[18]*a[15],n[16]=i[15]*a[1]+i[16]*a[6]+i[17]*a[11]+i[18]*a[16],n[17]=i[15]*a[2]+i[16]*a[7]+i[17]*a[12]+i[18]*a[17],n[18]=i[15]*a[3]+i[16]*a[8]+i[17]*a[13]+i[18]*a[18],n[19]=i[15]*a[4]+i[16]*a[9]+i[17]*a[14]+i[18]*a[19]+i[19],n},t.prototype._colorMatrix=function(n){var i=new Float32Array(n);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},t.prototype.brightness=function(n,i){var a=[n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.greyscale=function(n,i){var a=[n,n,n,0,0,n,n,n,0,0,n,n,n,0,0,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.blackAndWhite=function(n){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.hue=function(n,i){n=(n||0)/180*Math.PI;var a=Math.cos(n),o=Math.sin(n),s=Math.sqrt,u=1/3,l=s(u),h=a+(1-a)*u,f=u*(1-a)-l*o,d=u*(1-a)+l*o,p=u*(1-a)+l*o,c=a+u*(1-a),_=u*(1-a)-l*o,v=u*(1-a)-l*o,g=u*(1-a)+l*o,m=a+u*(1-a),y=[h,f,d,0,0,p,c,_,0,0,v,g,m,0,0,0,0,0,1,0];this._loadMatrix(y,i)},t.prototype.contrast=function(n,i){var a=(n||0)+1,o=-.5*(a-1),s=[a,0,0,0,o,0,a,0,0,o,0,0,a,0,o,0,0,0,1,0];this._loadMatrix(s,i)},t.prototype.saturate=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments[1],a=n*2/3+1,o=(a-1)*-.5,s=[a,o,o,0,0,o,a,o,0,0,o,o,a,0,0,0,0,0,1,0];this._loadMatrix(s,i)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(n){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.sepia=function(n){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.technicolor=function(n){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.polaroid=function(n){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.toBGR=function(n){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.kodachrome=function(n){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.browni=function(n){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.vintage=function(n){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.colorTone=function(n,i,a,o,s){n=n||.2,i=i||.15,a=a||16770432,o=o||3375104;var u=(a>>16&255)/255,l=(a>>8&255)/255,h=(a&255)/255,f=(o>>16&255)/255,d=(o>>8&255)/255,p=(o&255)/255,c=[.3,.59,.11,0,0,u,l,h,n,0,f,d,p,i,0,u-f,l-d,h-p,0,0];this._loadMatrix(c,s)},t.prototype.night=function(n,i){n=n||.1;var a=[n*-2,-n,0,0,0,-n,0,n,0,0,0,n,n*2,0,0,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.predator=function(n,i){var a=[11.224130630493164*n,-4.794486999511719*n,-2.8746118545532227*n,0*n,.40342438220977783*n,-3.6330697536468506*n,9.193157196044922*n,-2.951810836791992*n,0*n,-1.316135048866272*n,-3.2184197902679443*n,-4.2375030517578125*n,7.476448059082031*n,0*n,.8044459223747253*n,0,0,0,1,0];this._loadMatrix(a,i)},t.prototype.lsd=function(n){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,n)},t.prototype.reset=function(){var n=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(n,!1)},fO(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(n){this.uniforms.m=n}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(n){this.uniforms.uAlpha=n}}]),t}(dO.Filter);Cs.default=As;As.prototype.grayscale=As.prototype.greyscale;var Ds={};Ds.__esModule=!0;var yO=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),mO=J,xO=TO(mO);function TO(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function EO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bO(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function SO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wO=function(e){SO(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;EO(this,t);var n=bO(this,e.call(this,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`));return n.alpha=r,n.glShaderKey="alpha",n}return yO(t,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(n){this.uniforms.uAlpha=n}}]),t}(xO.Filter);Ds.default=wO;(function(e){e.__esModule=!0;var t=bs;Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return l(t).default}});var r=Ss;Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return l(r).default}});var n=ws;Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return l(n).default}});var i=Rs;Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return l(i).default}});var a=Mi;Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return l(a).default}});var o=Di;Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return l(o).default}});var s=Cs;Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return l(s).default}});var u=Ds;Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return l(u).default}});function l(h){return h&&h.__esModule?h:{default:h}}})(Sf);var If={},Ii={};Ii.__esModule=!0;var PO=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),RO=J,MO=OO(RO);function OO(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function CO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var AO=function(){function e(){CO(this,e),this.global=new MO.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(r,n,i){return r.worldTransform.applyInverse(i||this.global,n)},e.prototype.copyEvent=function(r){r.isPrimary&&(this.isPrimary=!0),this.button=r.button,this.buttons=Number.isInteger(r.buttons)?r.buttons:r.which,this.width=r.width,this.height=r.height,this.tiltX=r.tiltX,this.tiltY=r.tiltY,this.pointerType=r.pointerType,this.pressure=r.pressure,this.rotationAngle=r.rotationAngle,this.twist=r.twist||0,this.tangentialPressure=r.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},PO(e,[{key:"pointerId",get:function(){return this.identifier}}]),e}();Ii.default=AO;var Is={},Li={};Li.__esModule=!0;function DO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var IO=function(){function e(){DO(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();Li.default=IO;var $i={};$i.__esModule=!0;var LO=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function $O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Lf=function(){function e(t){$O(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(r,n){n?this._flags=this._flags|r:this._flags=this._flags&~r},LO(e,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(r){this._flags=r}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return(this._flags&this.constructor.FLAGS.OVER)!=0},set:function(r){this._doSet(this.constructor.FLAGS.OVER,r)}},{key:"rightDown",get:function(){return(this._flags&this.constructor.FLAGS.RIGHT_DOWN)!=0},set:function(r){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,r)}},{key:"leftDown",get:function(){return(this._flags&this.constructor.FLAGS.LEFT_DOWN)!=0},set:function(r){this._doSet(this.constructor.FLAGS.LEFT_DOWN,r)}}]),e}();$i.default=Lf;Lf.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2});var Bi={};Bi.__esModule=!0;Bi.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Is.__esModule=!0;var BO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FO=J,ct=qO(FO),GO=Ii,$f=un(GO),kO=Li,UO=un(kO),NO=$i,Ls=un(NO),HO=rt.exports,XO=un(HO),WO=Bi,VO=un(WO);function un(e){return e&&e.__esModule?e:{default:e}}function qO(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function YO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zO(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function KO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}ct.utils.mixins.delayMixin(ct.DisplayObject.prototype,VO.default);var Fi=1,Gi={target:null,data:{global:null}},$s=function(e){KO(t,e);function t(r,n){YO(this,t);var i=zO(this,e.call(this));return n=n||{},i.renderer=r,i.autoPreventDefault=n.autoPreventDefault!==void 0?n.autoPreventDefault:!0,i.interactionFrequency=n.interactionFrequency||10,i.mouse=new $f.default,i.mouse.identifier=Fi,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[Fi]=i.mouse,i.interactionDataPool=[],i.eventData=new UO.default,i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={default:"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i._tempPoint=new ct.Point,i.resolution=1,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return t.prototype.hitTest=function(n,i){return Gi.target=null,Gi.data.global=n,i||(i=this.renderer._lastObjectRendered),this.processInteractive(Gi,i,null,!0),Gi.target},t.prototype.setTargetElement=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=n,this.resolution=i,this.addEvents()},t.prototype.addEvents=function(){!this.interactionDOMElement||(ct.ticker.shared.add(this.update,this,ct.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){!this.interactionDOMElement||(ct.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(n){if(this._deltaTime+=n,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,!!this.interactionDOMElement)){if(this.didMove){this.didMove=!1;return}this.cursor=null;for(var i in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(i)){var a=this.activeInteractionData[i];if(a.originalEvent&&a.pointerType!=="touch"){var o=this.configureInteractionEventForDOMEvent(this.eventData,a.originalEvent,a);this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(n){if(n=n||"default",this.currentCursorMode!==n){this.currentCursorMode=n;var i=this.cursorStyles[n];if(i)switch(typeof i=="undefined"?"undefined":BO(i)){case"string":this.interactionDOMElement.style.cursor=i;break;case"function":i(n);break;case"object":Object.assign(this.interactionDOMElement.style,i);break}else typeof n=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,n)&&(this.interactionDOMElement.style.cursor=n)}},t.prototype.dispatchEvent=function(n,i,a){a.stopped||(a.currentTarget=n,a.type=i,n.emit(i,a),n[i]&&n[i](a))},t.prototype.mapPositionToPoint=function(n,i,a){var o=void 0;this.interactionDOMElement.parentElement?o=this.interactionDOMElement.getBoundingClientRect():o={x:0,y:0,width:0,height:0};var s=navigator.isCocoonJS?this.resolution:1/this.resolution;n.x=(i-o.left)*(this.interactionDOMElement.width/o.width)*s,n.y=(a-o.top)*(this.interactionDOMElement.height/o.height)*s},t.prototype.processInteractive=function(n,i,a,o,s){if(!i||!i.visible)return!1;var u=n.data.global;s=i.interactive||s;var l=!1,h=s,f=!0;if(i.hitArea?(o&&(i.worldTransform.applyInverse(u,this._tempPoint),i.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?l=!0:(o=!1,f=!1)),h=!1):i._mask&&o&&(i._mask.containsPoint(u)||(o=!1,f=!1)),f&&i.interactiveChildren&&i.children)for(var d=i.children,p=d.length-1;p>=0;p--){var c=d[p],_=this.processInteractive(n,c,a,o,h);if(_){if(!c.parent)continue;h=!1,_&&(n.target&&(o=!1),l=!0)}}return s&&(o&&!n.target&&!i.hitArea&&i.containsPoint&&i.containsPoint(u)&&(l=!0),i.interactive&&(l&&!n.target&&(n.target=i),a&&a(n,i,!!l))),l},t.prototype.onPointerDown=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var i=this.normalizeToPointerData(n);this.autoPreventDefault&&i[0].isNormalized&&n.preventDefault();for(var a=i.length,o=0;o<a;o++){var s=i[o],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(l.data.originalEvent=n,this.processInteractive(l,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",l),s.pointerType==="touch")this.emit("touchstart",l);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var h=s.button===2;this.emit(h?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(n,i,a){var o=n.data,s=n.data.identifier;if(a){if(i.trackedPointers[s]||(i.trackedPointers[s]=new Ls.default(s)),this.dispatchEvent(i,"pointerdown",n),o.pointerType==="touch")this.dispatchEvent(i,"touchstart",n);else if(o.pointerType==="mouse"||o.pointerType==="pen"){var u=o.button===2;u?i.trackedPointers[s].rightDown=!0:i.trackedPointers[s].leftDown=!0,this.dispatchEvent(i,u?"rightdown":"mousedown",n)}}},t.prototype.onPointerComplete=function(n,i,a){for(var o=this.normalizeToPointerData(n),s=o.length,u=n.target!==this.interactionDOMElement?"outside":"",l=0;l<s;l++){var h=o[l],f=this.getInteractionDataForPointerId(h),d=this.configureInteractionEventForDOMEvent(this.eventData,h,f);if(d.data.originalEvent=n,this.processInteractive(d,this.renderer._lastObjectRendered,a,i||!u),this.emit(i?"pointercancel":"pointerup"+u,d),h.pointerType==="mouse"||h.pointerType==="pen"){var p=h.button===2;this.emit(p?"rightup"+u:"mouseup"+u,d)}else h.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+u,d),this.releaseInteractionDataForPointerId(h.pointerId,f))}},t.prototype.onPointerCancel=function(n){this.supportsTouchEvents&&n.pointerType==="touch"||this.onPointerComplete(n,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(n,i){var a=n.data,o=n.data.identifier;i.trackedPointers[o]!==void 0&&(delete i.trackedPointers[o],this.dispatchEvent(i,"pointercancel",n),a.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",n))},t.prototype.onPointerUp=function(n){this.supportsTouchEvents&&n.pointerType==="touch"||this.onPointerComplete(n,!1,this.processPointerUp)},t.prototype.processPointerUp=function(n,i,a){var o=n.data,s=n.data.identifier,u=i.trackedPointers[s],l=o.pointerType==="touch",h=o.pointerType==="mouse"||o.pointerType==="pen",f=!1;if(h){var d=o.button===2,p=Ls.default.FLAGS,c=d?p.RIGHT_DOWN:p.LEFT_DOWN,_=u!==void 0&&u.flags&c;a?(this.dispatchEvent(i,d?"rightup":"mouseup",n),_&&(this.dispatchEvent(i,d?"rightclick":"click",n),f=!0)):_&&this.dispatchEvent(i,d?"rightupoutside":"mouseupoutside",n),u&&(d?u.rightDown=!1:u.leftDown=!1)}a?(this.dispatchEvent(i,"pointerup",n),l&&this.dispatchEvent(i,"touchend",n),u&&((!h||f)&&this.dispatchEvent(i,"pointertap",n),l&&(this.dispatchEvent(i,"tap",n),u.over=!1))):u&&(this.dispatchEvent(i,"pointerupoutside",n),l&&this.dispatchEvent(i,"touchendoutside",n)),u&&u.none&&delete i.trackedPointers[s]},t.prototype.onPointerMove=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var i=this.normalizeToPointerData(n);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this.didMove=!0,this.cursor=null);for(var a=i.length,o=0;o<a;o++){var s=i[o],u=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,u);l.data.originalEvent=n;var h=s.pointerType==="touch"?this.moveWhenInside:!0;this.processInteractive(l,this.renderer._lastObjectRendered,this.processPointerMove,h),this.emit("pointermove",l),s.pointerType==="touch"&&this.emit("touchmove",l),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",l)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(n,i,a){var o=n.data,s=o.pointerType==="touch",u=o.pointerType==="mouse"||o.pointerType==="pen";u&&this.processPointerOverOut(n,i,a),(!this.moveWhenInside||a)&&(this.dispatchEvent(i,"pointermove",n),s&&this.dispatchEvent(i,"touchmove",n),u&&this.dispatchEvent(i,"mousemove",n))},t.prototype.onPointerOut=function(n){if(!(this.supportsTouchEvents&&n.pointerType==="touch")){var i=this.normalizeToPointerData(n),a=i[0];a.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var o=this.getInteractionDataForPointerId(a),s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=a,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),a.pointerType==="mouse"||a.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(o.identifier)}},t.prototype.processPointerOverOut=function(n,i,a){var o=n.data,s=n.data.identifier,u=o.pointerType==="mouse"||o.pointerType==="pen",l=i.trackedPointers[s];a&&!l&&(l=i.trackedPointers[s]=new Ls.default(s)),l!==void 0&&(a&&this.mouseOverRenderer?(l.over||(l.over=!0,this.dispatchEvent(i,"pointerover",n),u&&this.dispatchEvent(i,"mouseover",n)),u&&this.cursor===null&&(this.cursor=i.cursor)):l.over&&(l.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),u&&this.dispatchEvent(i,"mouseout",n),l.none&&delete i.trackedPointers[s]))},t.prototype.onPointerOver=function(n){var i=this.normalizeToPointerData(n),a=i[0],o=this.getInteractionDataForPointerId(a),s=this.configureInteractionEventForDOMEvent(this.eventData,a,o);s.data.originalEvent=a,a.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(a.pointerType==="mouse"||a.pointerType==="pen")&&this.emit("mouseover",s)},t.prototype.getInteractionDataForPointerId=function(n){var i=n.pointerId,a=void 0;return i===Fi||n.pointerType==="mouse"?a=this.mouse:this.activeInteractionData[i]?a=this.activeInteractionData[i]:(a=this.interactionDataPool.pop()||new $f.default,a.identifier=i,this.activeInteractionData[i]=a),a.copyEvent(n),a},t.prototype.releaseInteractionDataForPointerId=function(n){var i=this.activeInteractionData[n];i&&(delete this.activeInteractionData[n],i.reset(),this.interactionDataPool.push(i))},t.prototype.configureInteractionEventForDOMEvent=function(n,i,a){return n.data=a,this.mapPositionToPoint(a.global,i.clientX,i.clientY),navigator.isCocoonJS&&i.pointerType==="touch"&&(a.global.x=a.global.x/this.resolution,a.global.y=a.global.y/this.resolution),i.pointerType==="touch"&&(i.globalX=a.global.x,i.globalY=a.global.y),a.originalEvent=i,n.reset(),n},t.prototype.normalizeToPointerData=function(n){var i=[];if(this.supportsTouchEvents&&n instanceof TouchEvent)for(var a=0,o=n.changedTouches.length;a<o;a++){var s=n.changedTouches[a];typeof s.button=="undefined"&&(s.button=n.touches.length?1:0),typeof s.buttons=="undefined"&&(s.buttons=n.touches.length?1:0),typeof s.isPrimary=="undefined"&&(s.isPrimary=n.touches.length===1&&n.type==="touchstart"),typeof s.width=="undefined"&&(s.width=s.radiusX||1),typeof s.height=="undefined"&&(s.height=s.radiusY||1),typeof s.tiltX=="undefined"&&(s.tiltX=0),typeof s.tiltY=="undefined"&&(s.tiltY=0),typeof s.pointerType=="undefined"&&(s.pointerType="touch"),typeof s.pointerId=="undefined"&&(s.pointerId=s.identifier||0),typeof s.pressure=="undefined"&&(s.pressure=s.force||.5),typeof s.twist=="undefined"&&(s.twist=0),typeof s.tangentialPressure=="undefined"&&(s.tangentialPressure=0),typeof s.layerX=="undefined"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY=="undefined"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,i.push(s)}else n instanceof MouseEvent&&(!this.supportsPointerEvents||!(n instanceof window.PointerEvent))&&(typeof n.isPrimary=="undefined"&&(n.isPrimary=!0),typeof n.width=="undefined"&&(n.width=1),typeof n.height=="undefined"&&(n.height=1),typeof n.tiltX=="undefined"&&(n.tiltX=0),typeof n.tiltY=="undefined"&&(n.tiltY=0),typeof n.pointerType=="undefined"&&(n.pointerType="mouse"),typeof n.pointerId=="undefined"&&(n.pointerId=Fi),typeof n.pressure=="undefined"&&(n.pressure=.5),typeof n.twist=="undefined"&&(n.twist=0),typeof n.tangentialPressure=="undefined"&&(n.tangentialPressure=0),n.isNormalized=!0),i.push(n);return i},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(XO.default);Is.default=$s;ct.WebGLRenderer.registerPlugin("interaction",$s);ct.CanvasRenderer.registerPlugin("interaction",$s);(function(e){e.__esModule=!0;var t=Ii;Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return o(t).default}});var r=Is;Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return o(r).default}});var n=Bi;Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return o(n).default}});var i=$i;Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return o(i).default}});var a=Li;Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return o(a).default}});function o(s){return s&&s.__esModule?s:{default:s}}})(If);var Bf={},ln={},dt={exports:{}},ki={};class hn{constructor(t,r=!1,n){this._fn=t,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}detach(){return this._owner===null?!1:(this._owner.detach(this),!0)}}function Ff(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}class Gf{constructor(){this._head=this._tail=void 0}handlers(t=!1){let r=this._head;if(t)return!!r;const n=[];for(;r;)n.push(r),r=r._next;return n}has(t){if(!(t instanceof hn))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}dispatch(){let t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}add(t,r=null){if(typeof t!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Ff(this,new hn(t,!1,r))}once(t,r=null){if(typeof t!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Ff(this,new hn(t,!0,r))}detach(t){if(!(t instanceof hn))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,t._next===null&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}detachAll(){let t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}var ZO=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",MiniSignalBinding:hn,MiniSignal:Gf,default:Gf}),kf=Ru(ZO),fn={};fn.__esModule=!0;fn.eachSeries=JO;fn.queue=jO;function Gt(){}function JO(e,t,r,n){var i=0,a=e.length;(function o(s){if(s||i===a){r&&r(s);return}n?setTimeout(function(){t(e[i++],o)},1):t(e[i++],o)})()}function QO(e){return function(){if(e===null)throw new Error("Callback was already called.");var r=e;e=null,r.apply(this,arguments)}}function jO(e,t){if(t==null)t=1;else if(t===0)throw new Error("Concurrency must not be zero");var r=0,n={_tasks:[],concurrency:t,saturated:Gt,unsaturated:Gt,buffer:t/4,empty:Gt,drain:Gt,error:Gt,started:!1,paused:!1,push:function(s,u){i(s,!1,u)},kill:function(){r=0,n.drain=Gt,n.started=!1,n._tasks=[]},unshift:function(s,u){i(s,!0,u)},process:function(){for(;!n.paused&&r<n.concurrency&&n._tasks.length;){var s=n._tasks.shift();n._tasks.length===0&&n.empty(),r+=1,r===n.concurrency&&n.saturated(),e(s.data,QO(a(s)))}},length:function(){return n._tasks.length},running:function(){return r},idle:function(){return n._tasks.length+r===0},pause:function(){n.paused!==!0&&(n.paused=!0)},resume:function(){if(n.paused!==!1){n.paused=!1;for(var s=1;s<=n.concurrency;s++)n.process()}}};function i(o,s,u){if(u!=null&&typeof u!="function")throw new Error("task callback must be a function");if(n.started=!0,o==null&&n.idle()){setTimeout(function(){return n.drain()},1);return}var l={data:o,callback:typeof u=="function"?u:Gt};s?n._tasks.unshift(l):n._tasks.push(l),setTimeout(function(){return n.process()},1)}function a(o){return function(){r-=1,o.callback.apply(o,arguments),arguments[0]!=null&&n.error(arguments[0],o.data),r<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}return n}var cn={exports:{}};(function(e,t){t.__esModule=!0,t.Resource=void 0;var r=function(){function x(T,E){for(var S=0;S<E.length;S++){var b=E[S];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(T,b.key,b)}}return function(T,E,S){return E&&x(T.prototype,E),S&&x(T,S),T}}(),n=mr,i=s(n),a=kf,o=s(a);function s(x){return x&&x.__esModule?x:{default:x}}function u(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}var l=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),h=null,f=0,d=200,p=204,c=1223,_=2;function v(){}var g=t.Resource=function(){x.setExtensionLoadType=function(E,S){m(x._loadTypeMap,E,S)},x.setExtensionXhrType=function(E,S){m(x._xhrTypeMap,E,S)};function x(T,E,S){if(u(this,x),typeof T!="string"||typeof E!="string")throw new Error("Both name and url are required for constructing a resource.");S=S||{},this._flags=0,this._setFlag(x.STATUS_FLAGS.DATA_URL,E.indexOf("data:")===0),this.name=T,this.url=E,this.extension=this._getExtension(),this.data=null,this.crossOrigin=S.crossOrigin===!0?"anonymous":S.crossOrigin,this.timeout=S.timeout||0,this.loadType=S.loadType||this._determineLoadType(),this.xhrType=S.xhrType,this.metadata=S.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=x.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=v,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.default,this.onProgress=new o.default,this.onComplete=new o.default,this.onAfterMiddleware=new o.default}return x.prototype.complete=function(){this._clearEvents(),this._finish()},x.prototype.abort=function(E){if(!this.error){if(this.error=new Error(E),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=x.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},x.prototype.load=function(E){var S=this;if(!this.isLoading){if(this.isComplete){E&&setTimeout(function(){return E(S)},1);return}else E&&this.onComplete.once(E);switch(this._setFlag(x.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case x.LOAD_TYPE.IMAGE:this.type=x.TYPE.IMAGE,this._loadElement("image");break;case x.LOAD_TYPE.AUDIO:this.type=x.TYPE.AUDIO,this._loadSourceElement("audio");break;case x.LOAD_TYPE.VIDEO:this.type=x.TYPE.VIDEO,this._loadSourceElement("video");break;case x.LOAD_TYPE.XHR:default:l&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},x.prototype._hasFlag=function(E){return(this._flags&E)!=0},x.prototype._setFlag=function(E,S){this._flags=S?this._flags|E:this._flags&~E},x.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},x.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(x.STATUS_FLAGS.COMPLETE,!0),this._setFlag(x.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},x.prototype._loadElement=function(E){this.metadata.loadElement?this.data=this.metadata.loadElement:E==="image"&&typeof window.Image!="undefined"?this.data=new Image:this.data=document.createElement(E),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},x.prototype._loadSourceElement=function(E){if(this.metadata.loadElement?this.data=this.metadata.loadElement:E==="audio"&&typeof window.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(E),this.data===null){this.abort("Unsupported element: "+E);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var S=this.metadata.mimeType,b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(E,this.url[b],Array.isArray(S)?S[b]:S));else{var w=this.metadata.mimeType;this.data.appendChild(this._createSource(E,this.url,Array.isArray(w)?w[0]:w))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},x.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var E=this.xhr=new XMLHttpRequest;E.open("GET",this.url,!0),E.timeout=this.timeout,this.xhrType===x.XHR_RESPONSE_TYPE.JSON||this.xhrType===x.XHR_RESPONSE_TYPE.DOCUMENT?E.responseType=x.XHR_RESPONSE_TYPE.TEXT:E.responseType=this.xhrType,E.addEventListener("error",this._boundXhrOnError,!1),E.addEventListener("timeout",this._boundXhrOnTimeout,!1),E.addEventListener("abort",this._boundXhrOnAbort,!1),E.addEventListener("progress",this._boundOnProgress,!1),E.addEventListener("load",this._boundXhrOnLoad,!1),E.send()},x.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var E=this.xhr=new XDomainRequest;E.timeout=this.timeout||5e3,E.onerror=this._boundXhrOnError,E.ontimeout=this._boundXhrOnTimeout,E.onprogress=this._boundOnProgress,E.onload=this._boundXhrOnLoad,E.open("GET",this.url,!0),setTimeout(function(){return E.send()},1)},x.prototype._createSource=function(E,S,b){b||(b=E+"/"+this._getExtension(S));var w=document.createElement("source");return w.src=S,w.type=b,w},x.prototype._onError=function(E){this.abort("Failed to load element using: "+E.target.nodeName)},x.prototype._onProgress=function(E){E&&E.lengthComputable&&this.onProgress.dispatch(this,E.loaded/E.total)},x.prototype._onTimeout=function(){this.abort("Load timed out.")},x.prototype._xhrOnError=function(){var E=this.xhr;this.abort(y(E)+" Request failed. Status: "+E.status+', text: "'+E.statusText+'"')},x.prototype._xhrOnTimeout=function(){var E=this.xhr;this.abort(y(E)+" Request timed out.")},x.prototype._xhrOnAbort=function(){var E=this.xhr;this.abort(y(E)+" Request was aborted by the user.")},x.prototype._xhrOnLoad=function(){var E=this.xhr,S="",b=typeof E.status=="undefined"?d:E.status;(E.responseType===""||E.responseType==="text"||typeof E.responseType=="undefined")&&(S=E.responseText),b===f&&(S.length>0||E.responseType===x.XHR_RESPONSE_TYPE.BUFFER)?b=d:b===c&&(b=p);var w=b/100|0;if(w===_)if(this.xhrType===x.XHR_RESPONSE_TYPE.TEXT)this.data=S,this.type=x.TYPE.TEXT;else if(this.xhrType===x.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(S),this.type=x.TYPE.JSON}catch($){this.abort("Error trying to parse loaded json: "+$);return}else if(this.xhrType===x.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var P=new DOMParser;this.data=P.parseFromString(S,"text/xml")}else{var A=document.createElement("div");A.innerHTML=S,this.data=A}this.type=x.TYPE.XML}catch($){this.abort("Error trying to parse loaded xml: "+$);return}else this.data=E.response||S;else{this.abort("["+E.status+"] "+E.statusText+": "+E.responseURL);return}this.complete()},x.prototype._determineCrossOrigin=function(E,S){if(E.indexOf("data:")===0)return"";if(window.origin!==window.location.origin)return"anonymous";S=S||window.location,h||(h=document.createElement("a")),h.href=E,E=(0,i.default)(h.href,{strictMode:!0});var b=!E.port&&S.port===""||E.port===S.port,w=E.protocol?E.protocol+":":"";return E.host!==S.hostname||!b||w!==S.protocol?"anonymous":""},x.prototype._determineXhrType=function(){return x._xhrTypeMap[this.extension]||x.XHR_RESPONSE_TYPE.TEXT},x.prototype._determineLoadType=function(){return x._loadTypeMap[this.extension]||x.LOAD_TYPE.XHR},x.prototype._getExtension=function(){var E=this.url,S="";if(this.isDataUrl){var b=E.indexOf("/");S=E.substring(b+1,E.indexOf(";",b))}else{var w=E.indexOf("?"),P=E.indexOf("#"),A=Math.min(w>-1?w:E.length,P>-1?P:E.length);E=E.substring(0,A),S=E.substring(E.lastIndexOf(".")+1)}return S.toLowerCase()},x.prototype._getMimeFromXhrType=function(E){switch(E){case x.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case x.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case x.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case x.XHR_RESPONSE_TYPE.JSON:return"application/json";case x.XHR_RESPONSE_TYPE.DEFAULT:case x.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r(x,[{key:"isDataUrl",get:function(){return this._hasFlag(x.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(x.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(x.STATUS_FLAGS.LOADING)}}]),x}();g.STATUS_FLAGS={NONE:0,DATA_URL:1<<0,COMPLETE:1<<1,LOADING:1<<2},g.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},g.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},g.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},g._loadTypeMap={gif:g.LOAD_TYPE.IMAGE,png:g.LOAD_TYPE.IMAGE,bmp:g.LOAD_TYPE.IMAGE,jpg:g.LOAD_TYPE.IMAGE,jpeg:g.LOAD_TYPE.IMAGE,tif:g.LOAD_TYPE.IMAGE,tiff:g.LOAD_TYPE.IMAGE,webp:g.LOAD_TYPE.IMAGE,tga:g.LOAD_TYPE.IMAGE,svg:g.LOAD_TYPE.IMAGE,"svg+xml":g.LOAD_TYPE.IMAGE,mp3:g.LOAD_TYPE.AUDIO,ogg:g.LOAD_TYPE.AUDIO,wav:g.LOAD_TYPE.AUDIO,mp4:g.LOAD_TYPE.VIDEO,webm:g.LOAD_TYPE.VIDEO},g._xhrTypeMap={xhtml:g.XHR_RESPONSE_TYPE.DOCUMENT,html:g.XHR_RESPONSE_TYPE.DOCUMENT,htm:g.XHR_RESPONSE_TYPE.DOCUMENT,xml:g.XHR_RESPONSE_TYPE.DOCUMENT,tmx:g.XHR_RESPONSE_TYPE.DOCUMENT,svg:g.XHR_RESPONSE_TYPE.DOCUMENT,tsx:g.XHR_RESPONSE_TYPE.DOCUMENT,gif:g.XHR_RESPONSE_TYPE.BLOB,png:g.XHR_RESPONSE_TYPE.BLOB,bmp:g.XHR_RESPONSE_TYPE.BLOB,jpg:g.XHR_RESPONSE_TYPE.BLOB,jpeg:g.XHR_RESPONSE_TYPE.BLOB,tif:g.XHR_RESPONSE_TYPE.BLOB,tiff:g.XHR_RESPONSE_TYPE.BLOB,webp:g.XHR_RESPONSE_TYPE.BLOB,tga:g.XHR_RESPONSE_TYPE.BLOB,json:g.XHR_RESPONSE_TYPE.JSON,text:g.XHR_RESPONSE_TYPE.TEXT,txt:g.XHR_RESPONSE_TYPE.TEXT,ttf:g.XHR_RESPONSE_TYPE.BUFFER,otf:g.XHR_RESPONSE_TYPE.BUFFER},g.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function m(x,T,E){T&&T.indexOf(".")===0&&(T=T.substring(1)),!!T&&(x[T]=E)}function y(x){return x.toString().replace("object ","")}e.exports.default=g})(cn,cn.exports);ki.__esModule=!0;ki.Loader=void 0;var eC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tC=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),rC=kf,dn=Uf(rC),nC=mr,iC=Uf(nC),aC=fn,Bs=sC(aC),oC=cn.exports;function sC(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Uf(e){return e&&e.__esModule?e:{default:e}}function uC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Fs=100,lC=/(#[\w-]+)?$/,pt=ki.Loader=function(){function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10;uC(this,e),this.baseUrl=r,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(o,s){return t._loadResource(o,s)},this._queue=Bs.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new dn.default,this.onError=new dn.default,this.onLoad=new dn.default,this.onStart=new dn.default,this.onComplete=new dn.default;for(var i=0;i<e._defaultBeforeMiddleware.length;++i)this.pre(e._defaultBeforeMiddleware[i]);for(var a=0;a<e._defaultAfterMiddleware.length;++a)this.use(e._defaultAfterMiddleware[a])}return e.prototype.add=function(r,n,i,a){if(Array.isArray(r)){for(var o=0;o<r.length;++o)this.add(r[o]);return this}if((typeof r=="undefined"?"undefined":eC(r))==="object"&&(a=n||r.callback||r.onComplete,i=r,n=r.url,r=r.name||r.key||r.url),typeof n!="string"&&(a=i,i=n,n=r),typeof n!="string")throw new Error("No url passed to add resource to loader.");if(typeof i=="function"&&(a=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[r])throw new Error('Resource named "'+r+'" already exists.');if(n=this._prepareUrl(n),this.resources[r]=new oC.Resource(r,n,i),typeof a=="function"&&this.resources[r].onAfterMiddleware.once(a),this.loading){for(var s=i.parentResource,u=[],l=0;l<s.children.length;++l)s.children[l].isComplete||u.push(s.children[l]);var h=s.progressChunk*(u.length+1),f=h/(u.length+2);s.children.push(this.resources[r]),s.progressChunk=f;for(var d=0;d<u.length;++d)u[d].progressChunk=f;this.resources[r].progressChunk=f}return this._queue.push(this.resources[r]),this},e.prototype.pre=function(r){return this._beforeMiddleware.push(r),this},e.prototype.use=function(r){return this._afterMiddleware.push(r),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var r in this.resources){var n=this.resources[r];n._onLoadBinding&&n._onLoadBinding.detach(),n.isLoading&&n.abort()}return this.resources={},this},e.prototype.load=function(r){if(typeof r=="function"&&this.onComplete.once(r),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var n=this._queue._tasks.length,i=Fs/n,a=0;a<this._queue._tasks.length;++a)this._queue._tasks[a].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},e.prototype._prepareUrl=function(r){var n=(0,iC.default)(r,{strictMode:!0}),i=void 0;if(n.protocol||!n.path||r.indexOf("//")===0?i=r:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&r.charAt(0)!=="/"?i=this.baseUrl+"/"+r:i=this.baseUrl+r,this.defaultQueryString){var a=lC.exec(i)[0];i=i.substr(0,i.length-a.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=a}return i},e.prototype._loadResource=function(r,n){var i=this;r._dequeue=n,Bs.eachSeries(this._beforeMiddleware,function(a,o){a.call(i,r,function(){o(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=Fs,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(r){var n=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),Bs.eachSeries(this._afterMiddleware,function(i,a){i.call(n,r,a)},function(){r.onAfterMiddleware.dispatch(r),n.progress=Math.min(Fs,n.progress+r.progressChunk),n.onProgress.dispatch(n,r),r.error?n.onError.dispatch(r.error,n,r):n.onLoad.dispatch(n,r),n._resourcesParsing.splice(n._resourcesParsing.indexOf(r),1),n._queue.idle()&&n._resourcesParsing.length===0&&n._onComplete()},!0)},tC(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(r){this._queue.concurrency=r}}]),e}();pt._defaultBeforeMiddleware=[];pt._defaultAfterMiddleware=[];pt.pre=function(t){return pt._defaultBeforeMiddleware.push(t),pt};pt.use=function(t){return pt._defaultAfterMiddleware.push(t),pt};var Ui={exports:{}};(function(e,t){t.__esModule=!0,t.encodeBinary=n;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(i){for(var a="",o=0;o<i.length;){for(var s=[0,0,0],u=[0,0,0,0],l=0;l<s.length;++l)o<i.length?s[l]=i.charCodeAt(o++)&255:s[l]=0;u[0]=s[0]>>2,u[1]=(s[0]&3)<<4|s[1]>>4,u[2]=(s[1]&15)<<2|s[2]>>6,u[3]=s[2]&63;var h=o-(i.length-1);switch(h){case 2:u[3]=64,u[2]=64;break;case 1:u[3]=64;break}for(var f=0;f<u.length;++f)a+=r.charAt(u[f])}return a}e.exports.default=n})(Ui,Ui.exports);var kt=ki.Loader,hC=cn.exports.Resource,fC=fn,Nf=Ui.exports;kt.Resource=hC;kt.async=fC;kt.encodeBinary=Nf;kt.base64=Nf;dt.exports=kt;dt.exports.Loader=kt;dt.exports.default=kt;ln.__esModule=!0;ln.parse=Xf;ln.default=function(){return function(t,r){if(!t.data||t.type!==Hf.Resource.TYPE.XML){r();return}if(t.data.getElementsByTagName("page").length===0||t.data.getElementsByTagName("info").length===0||t.data.getElementsByTagName("info")[0].getAttribute("face")===null){r();return}var n=t.isDataUrl?"":dC.dirname(t.url);t.isDataUrl&&(n==="."&&(n=""),this.baseUrl&&n&&this.baseUrl.charAt(this.baseUrl.length-1)==="/"&&(n+="/")),n=n.replace(this.baseUrl,""),n&&n.charAt(n.length-1)!=="/"&&(n+="/");for(var i=t.data.getElementsByTagName("page"),a={},o=function(_){a[_.metadata.pageFile]=_.texture,Object.keys(a).length===i.length&&(Xf(t,a),r())},s=0;s<i.length;++s){var u=i[s].getAttribute("file"),l=n+u,h=!1;for(var f in this.resources){var d=this.resources[f];if(d.url===l){d.metadata.pageFile=u,d.texture?o(d):d.onAfterMiddleware.add(o),h=!0;break}}if(!h){var p={crossOrigin:t.crossOrigin,loadType:Hf.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(l,p,o)}}}};var cC=qE,dC=vC(cC),Hf=dt.exports,pC=vs;function vC(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function Xf(e,t){e.bitmapFont=pC.BitmapText.registerFont(e.data,t)}var pn={};pn.__esModule=!0;pn.default=function(){return function(t,r){var n=t.name+"_image";if(!t.data||t.type!==_C.Resource.TYPE.JSON||!t.data.frames||this.resources[n]){r();return}var i={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=Wf(t,this.baseUrl);this.add(n,a,i,function(s){if(s.error){r(s.error);return}var u=new mC.Spritesheet(s.texture.baseTexture,t.data,t.url);u.parse(function(){t.spritesheet=u,t.textures=u.textures,r()})})}};pn.getResourcePath=Wf;var _C=dt.exports,gC=It,yC=xC(gC),mC=J;function xC(e){return e&&e.__esModule?e:{default:e}}function Wf(e,t){return e.isDataUrl?e.data.meta.image:yC.default.resolve(e.url.replace(t,""),e.data.meta.image)}var Ni={};Ni.__esModule=!0;Ni.default=function(){return function(t,r){t.data&&t.type===TC.Resource.TYPE.IMAGE&&(t.texture=bC.default.fromLoader(t.data,t.url,t.name)),r()}};var TC=dt.exports,EC=ke,bC=SC(EC);function SC(e){return e&&e.__esModule?e:{default:e}}var Gs={},ks={};ks.__esModule=!0;ks.blobMiddlewareFactory=PC;var Us=cn.exports,wC=Ui.exports,Vf=window.URL||window.webkitURL;function PC(){return function(t,r){if(!t.data){r();return}if(t.xhr&&t.xhrType===Us.Resource.XHR_RESPONSE_TYPE.BLOB){if(!window.Blob||typeof t.data=="string"){var n=t.xhr.getResponseHeader("content-type");if(n&&n.indexOf("image")===0){t.data=new Image,t.data.src="data:"+n+";base64,"+(0,wC.encodeBinary)(t.xhr.responseText),t.type=Us.Resource.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,r()};return}}else if(t.data.type.indexOf("image")===0){var i=Vf.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=i,t.type=Us.Resource.TYPE.IMAGE,t.data.onload=function(){Vf.revokeObjectURL(i),t.data.onload=null,r()};return}}r()}}Gs.__esModule=!0;var RC=dt.exports,qf=vn(RC),MC=ks,OC=rt.exports,Ns=vn(OC),CC=Ni,AC=vn(CC),DC=pn,IC=vn(DC),LC=ln,$C=vn(LC);function vn(e){return e&&e.__esModule?e:{default:e}}function BC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function GC(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Hs=function(e){GC(t,e);function t(r,n){BC(this,t);var i=FC(this,e.call(this,r,n));Ns.default.call(i);for(var a=0;a<t._pixiMiddleware.length;++a)i.use(t._pixiMiddleware[a]());return i.onStart.add(function(o){return i.emit("start",o)}),i.onProgress.add(function(o,s){return i.emit("progress",o,s)}),i.onError.add(function(o,s,u){return i.emit("error",o,s,u)}),i.onLoad.add(function(o,s){return i.emit("load",o,s)}),i.onComplete.add(function(o,s){return i.emit("complete",o,s)}),i}return t.addPixiMiddleware=function(n){t._pixiMiddleware.push(n)},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(qf.default);Gs.default=Hs;for(var Yf in Ns.default.prototype)Hs.prototype[Yf]=Ns.default.prototype[Yf];Hs._pixiMiddleware=[MC.blobMiddlewareFactory,AC.default,IC.default,$C.default];var zf=qf.default.Resource;zf.setExtensionXhrType("fnt",zf.XHR_RESPONSE_TYPE.DOCUMENT);(function(e){e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var t=ln;Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return l(t).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return t.parse}});var r=pn;Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return l(r).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return r.getResourcePath}});var n=Ni;Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return l(n).default}});var i=dt.exports;Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return i.Resource}});var a=bi,o=l(a),s=Gs,u=l(s);function l(d){return d&&d.__esModule?d:{default:d}}e.Loader=u.default;var h=new u.default;h.destroy=function(){},e.shared=h;var f=o.default.prototype;f._loader=null,Object.defineProperty(f,"loader",{get:function(){if(!this._loader){var p=this._options.sharedLoader;this._loader=p?h:new u.default}return this._loader}}),f._parentDestroy=f.destroy,f.destroy=function(p,c){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(p,c)}})(Bf);var Kf={},Ut={};Ut.__esModule=!0;var kC=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),UC=J,vt=WC(UC),NC=ke,HC=XC(NC);function XC(e){return e&&e.__esModule?e:{default:e}}function WC(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function VC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qC(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function YC(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Xs=new vt.Point,Zf=new vt.Polygon,Jf=function(e){YC(t,e);function t(r,n,i,a,o){VC(this,t);var s=qC(this,e.call(this));return s._texture=r||HC.default.EMPTY,s.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),s.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),s.indices=a||new Uint16Array([0,1,3,2]),s.dirty=0,s.indexDirty=0,s.vertexDirty=0,s.autoUpdate=!0,s.blendMode=vt.BLEND_MODES.NORMAL,s.canvasPadding=vt.settings.MESH_CANVAS_PADDING,s.drawMode=o||t.DRAW_MODES.TRIANGLE_MESH,s.shader=null,s.tintRgb=new Float32Array([1,1,1]),s._glDatas={},s._uvTransform=new vt.TextureMatrix(s._texture),s.uploadUvTransform=!1,s.pluginName="mesh",s}return t.prototype._renderWebGL=function(n){this.refresh(),n.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(n){this.refresh(),n.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(n){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(n)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(n){if(!this.getBounds().contains(n.x,n.y))return!1;this.worldTransform.applyInverse(n,Xs);for(var i=this.vertices,a=Zf.points,o=this.indices,s=this.indices.length,u=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,l=0;l+2<s;l+=u){var h=o[l]*2,f=o[l+1]*2,d=o[l+2]*2;if(a[0]=i[h],a[1]=i[h+1],a[2]=i[f],a[3]=i[f+1],a[4]=i[d],a[5]=i[d+1],Zf.contains(Xs.x,Xs.y))return!0}return!1},t.prototype.destroy=function(n){for(var i in this._glDatas){var a=this._glDatas[i];a.destroy?a.destroy():(a.vertexBuffer&&(a.vertexBuffer.destroy(),a.vertexBuffer=null),a.indexBuffer&&(a.indexBuffer.destroy(),a.indexBuffer=null),a.uvBuffer&&(a.uvBuffer.destroy(),a.uvBuffer=null),a.vao&&(a.vao.destroy(),a.vao=null))}this._glDatas=null,e.prototype.destroy.call(this,n)},kC(t,[{key:"texture",get:function(){return this._texture},set:function(n){this._texture!==n&&(this._texture=n,n&&(n.baseTexture.hasLoaded?this._onTextureUpdate():n.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return vt.utils.rgb2hex(this.tintRgb)},set:function(n){this.tintRgb=vt.utils.hex2rgb(n,this.tintRgb)}}]),t}(vt.Container);Ut.default=Jf;Jf.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1};var Ws={};Ws.__esModule=!0;var zC=J,ar=QC(zC),KC=Se.exports,Hi=Qf(KC),ZC=Ut,JC=Qf(ZC);function Qf(e){return e&&e.__esModule?e:{default:e}}function QC(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function jC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eA(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function tA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rA=ar.Matrix.IDENTITY,jf=function(e){tA(t,e);function t(r){jC(this,t);var n=eA(this,e.call(this,r));return n.shader=null,n}return t.prototype.onContextChange=function(){var n=this.renderer.gl;this.shader=new ar.Shader(n,`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`)},t.prototype.render=function(n){var i=this.renderer,a=i.gl,o=n._texture;if(!!o.valid){var s=n._glDatas[i.CONTEXT_UID];s||(i.bindVao(null),s={shader:this.shader,vertexBuffer:Hi.default.GLBuffer.createVertexBuffer(a,n.vertices,a.STREAM_DRAW),uvBuffer:Hi.default.GLBuffer.createVertexBuffer(a,n.uvs,a.STREAM_DRAW),indexBuffer:Hi.default.GLBuffer.createIndexBuffer(a,n.indices,a.STATIC_DRAW),vao:null,dirty:n.dirty,indexDirty:n.indexDirty,vertexDirty:n.vertexDirty},s.vao=new Hi.default.VertexArrayObject(a).addIndex(s.indexBuffer).addAttribute(s.vertexBuffer,s.shader.attributes.aVertexPosition,a.FLOAT,!1,2*4,0).addAttribute(s.uvBuffer,s.shader.attributes.aTextureCoord,a.FLOAT,!1,2*4,0),n._glDatas[i.CONTEXT_UID]=s),i.bindVao(s.vao),n.dirty!==s.dirty&&(s.dirty=n.dirty,s.uvBuffer.upload(n.uvs)),n.indexDirty!==s.indexDirty&&(s.indexDirty=n.indexDirty,s.indexBuffer.upload(n.indices)),n.vertexDirty!==s.vertexDirty&&(s.vertexDirty=n.vertexDirty,s.vertexBuffer.upload(n.vertices)),i.bindShader(s.shader),s.shader.uniforms.uSampler=i.bindTexture(o),i.state.setBlendMode(ar.utils.correctBlendMode(n.blendMode,o.baseTexture.premultipliedAlpha)),s.shader.uniforms.uTransform&&(n.uploadUvTransform?s.shader.uniforms.uTransform=n._uvTransform.mapCoord.toArray(!0):s.shader.uniforms.uTransform=rA.toArray(!0)),s.shader.uniforms.translationMatrix=n.worldTransform.toArray(!0),s.shader.uniforms.uColor=ar.utils.premultiplyRgba(n.tintRgb,n.worldAlpha,s.shader.uniforms.uColor,o.baseTexture.premultipliedAlpha);var u=n.drawMode===JC.default.DRAW_MODES.TRIANGLE_MESH?a.TRIANGLE_STRIP:a.TRIANGLES;s.vao.draw(u,n.indices.length,0)}},t}(ar.ObjectRenderer);Ws.default=jf;ar.WebGLRenderer.registerPlugin("mesh",jf);var Vs={};Vs.__esModule=!0;var nA=J,iA=uA(nA),aA=Ut,oA=sA(aA);function sA(e){return e&&e.__esModule?e:{default:e}}function uA(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function lA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ec=function(){function e(t){lA(this,e),this.renderer=t}return e.prototype.render=function(r){var n=this.renderer,i=n.context,a=r.worldTransform,o=n.resolution;n.roundPixels?i.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o|0,a.ty*o|0):i.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o,a.ty*o),n.context.globalAlpha=r.worldAlpha,n.setBlendMode(r.blendMode),r.drawMode===oA.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(r):this._renderTriangles(r)},e.prototype._renderTriangleMesh=function(r){for(var n=r.vertices.length/2,i=0;i<n-2;i++){var a=i*2;this._renderDrawTriangle(r,a,a+2,a+4)}},e.prototype._renderTriangles=function(r){for(var n=r.indices,i=n.length,a=0;a<i;a+=3){var o=n[a]*2,s=n[a+1]*2,u=n[a+2]*2;this._renderDrawTriangle(r,o,s,u)}},e.prototype._renderDrawTriangle=function(r,n,i,a){var o=this.renderer.context,s=r.uvs,u=r.vertices,l=r._texture;if(!!l.valid){var h=l.baseTexture,f=h.source,d=h.width,p=h.height,c=void 0,_=void 0,v=void 0,g=void 0,m=void 0,y=void 0;if(r.uploadUvTransform){var x=r._uvTransform.mapCoord;c=(s[n]*x.a+s[n+1]*x.c+x.tx)*h.width,_=(s[i]*x.a+s[i+1]*x.c+x.tx)*h.width,v=(s[a]*x.a+s[a+1]*x.c+x.tx)*h.width,g=(s[n]*x.b+s[n+1]*x.d+x.ty)*h.height,m=(s[i]*x.b+s[i+1]*x.d+x.ty)*h.height,y=(s[a]*x.b+s[a+1]*x.d+x.ty)*h.height}else c=s[n]*h.width,_=s[i]*h.width,v=s[a]*h.width,g=s[n+1]*h.height,m=s[i+1]*h.height,y=s[a+1]*h.height;var T=u[n],E=u[i],S=u[a],b=u[n+1],w=u[i+1],P=u[a+1],A=r.canvasPadding/this.renderer.resolution;if(A>0){var $=A/Math.abs(r.worldTransform.a),B=A/Math.abs(r.worldTransform.d),I=(T+E+S)/3,G=(b+w+P)/3,F=T-I,U=b-G,V=Math.sqrt(F*F+U*U);T=I+F/V*(V+$),b=G+U/V*(V+B),F=E-I,U=w-G,V=Math.sqrt(F*F+U*U),E=I+F/V*(V+$),w=G+U/V*(V+B),F=S-I,U=P-G,V=Math.sqrt(F*F+U*U),S=I+F/V*(V+$),P=G+U/V*(V+B)}o.save(),o.beginPath(),o.moveTo(T,b),o.lineTo(E,w),o.lineTo(S,P),o.closePath(),o.clip();var j=c*m+g*v+_*y-m*v-g*_-c*y,M=T*m+g*S+E*y-m*S-g*E-T*y,C=c*E+T*v+_*S-E*v-T*_-c*S,N=c*m*S+g*E*v+T*_*y-T*m*v-g*_*S-c*E*y,W=b*m+g*P+w*y-m*P-g*w-b*y,Y=c*w+b*v+_*P-w*v-b*_-c*P,Q=c*m*P+g*w*v+b*_*y-b*m*v-g*_*P-c*w*y;o.transform(M/j,W/j,C/j,Y/j,N/j,Q/j),o.drawImage(f,0,0,d*h.resolution,p*h.resolution,0,0,d,p),o.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(r){var n=this.renderer.context,i=r.vertices,a=i.length/2;n.beginPath();for(var o=1;o<a-2;++o){var s=o*2,u=i[s],l=i[s+1],h=i[s+2],f=i[s+3],d=i[s+4],p=i[s+5];n.moveTo(u,l),n.lineTo(h,f),n.lineTo(d,p)}n.fillStyle="#FF0000",n.fill(),n.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();Vs.default=ec;iA.CanvasRenderer.registerPlugin("mesh",ec);var Xi={};Xi.__esModule=!0;var hA=Ut,qs=fA(hA);function fA(e){return e&&e.__esModule?e:{default:e}}function cA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dA(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function pA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var vA=function(e){pA(t,e);function t(r,n,i){cA(this,t);var a=dA(this,e.call(this,r));return a._ready=!0,a.verticesX=n||10,a.verticesY=i||10,a.drawMode=qs.default.DRAW_MODES.TRIANGLES,a.refresh(),a}return t.prototype._refresh=function(){for(var n=this._texture,i=this.verticesX*this.verticesY,a=[],o=[],s=[],u=[],l=this.verticesX-1,h=this.verticesY-1,f=n.width/l,d=n.height/h,p=0;p<i;p++){var c=p%this.verticesX,_=p/this.verticesX|0;a.push(c*f,_*d),s.push(c/l,_/h)}for(var v=l*h,g=0;g<v;g++){var m=g%l,y=g/l|0,x=y*this.verticesX+m,T=y*this.verticesX+m+1,E=(y+1)*this.verticesX+m,S=(y+1)*this.verticesX+m+1;u.push(x,T,E),u.push(T,S,E)}this.vertices=new Float32Array(a),this.uvs=new Float32Array(s),this.colors=new Float32Array(o),this.indices=new Uint16Array(u),this.dirty++,this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){qs.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(qs.default);Xi.default=vA;var Ys={};Ys.__esModule=!0;var _A=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),gA=Xi,yA=tc(gA),mA=Jt,xA=tc(mA);function tc(e){return e&&e.__esModule?e:{default:e}}function TA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EA(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function bA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Wi=10,SA=function(e){bA(t,e);function t(r,n,i,a,o){TA(this,t);var s=EA(this,e.call(this,r,4,4));return s._origWidth=r.orig.width,s._origHeight=r.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=typeof n!="undefined"?n:Wi,s._rightWidth=typeof a!="undefined"?a:Wi,s._topHeight=typeof i!="undefined"?i:Wi,s._bottomHeight=typeof o!="undefined"?o:Wi,s._cachedTint=16777215,s._tintedTexture=null,s._canvasUvs=null,s.refresh(!0),s}return t.prototype.updateHorizontalVertices=function(){var n=this.vertices,i=this._topHeight+this._bottomHeight,a=this._height>i?1:this._height/i;n[9]=n[11]=n[13]=n[15]=this._topHeight*a,n[17]=n[19]=n[21]=n[23]=this._height-this._bottomHeight*a,n[25]=n[27]=n[29]=n[31]=this._height},t.prototype.updateVerticalVertices=function(){var n=this.vertices,i=this._leftWidth+this._rightWidth,a=this._width>i?1:this._width/i;n[2]=n[10]=n[18]=n[26]=this._leftWidth*a,n[4]=n[12]=n[20]=n[28]=this._width-this._rightWidth*a,n[6]=n[14]=n[22]=n[30]=this._width},t.prototype._renderCanvas=function(n){var i=n.context,a=this.worldTransform,o=n.resolution,s=this.tint!==16777215,u=this._texture;s&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=xA.default.getTintedTexture(this,this.tint));var l=s?this._tintedTexture:u.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var h=this.vertices,f=this._canvasUvs,d=s?0:u.frame.x,p=s?0:u.frame.y,c=d+u.frame.width,_=p+u.frame.height;f[0]=d,f[1]=d+this._leftWidth,f[2]=c-this._rightWidth,f[3]=c,f[4]=p,f[5]=p+this._topHeight,f[6]=_-this._bottomHeight,f[7]=_;for(var v=0;v<8;v++)f[v]*=u.baseTexture.resolution;i.globalAlpha=this.worldAlpha,n.setBlendMode(this.blendMode),n.roundPixels?i.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o|0,a.ty*o|0):i.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o,a.ty*o);for(var g=0;g<3;g++)for(var m=0;m<3;m++){var y=m*2+g*8,x=Math.max(1,f[m+1]-f[m]),T=Math.max(1,f[g+5]-f[g+4]),E=Math.max(1,h[y+10]-h[y]),S=Math.max(1,h[y+11]-h[y+1]);i.drawImage(l,f[m],f[g+4],x,T,h[y],h[y+1],E,S)}},t.prototype._refresh=function(){e.prototype._refresh.call(this);var n=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var a=1/this._origWidth,o=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=a*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-a*this._rightWidth,n[9]=n[11]=n[13]=n[15]=o*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-o*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},_A(t,[{key:"width",get:function(){return this._width},set:function(n){this._width=n,this._refresh()}},{key:"height",get:function(){return this._height},set:function(n){this._height=n,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(n){this._leftWidth=n,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(n){this._rightWidth=n,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(n){this._topHeight=n,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(n){this._bottomHeight=n,this._refresh()}}]),t}(yA.default);Ys.default=SA;var zs={};zs.__esModule=!0;var wA=Ut,PA=RA(wA);function RA(e){return e&&e.__esModule?e:{default:e}}function MA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OA(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function CA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var AA=function(e){CA(t,e);function t(r,n){MA(this,t);var i=OA(this,e.call(this,r));return i.points=n,i.vertices=new Float32Array(n.length*4),i.uvs=new Float32Array(n.length*4),i.colors=new Float32Array(n.length*2),i.indices=new Uint16Array(n.length*2),i.autoUpdate=!0,i.refresh(),i}return t.prototype._refresh=function(){var n=this.points;if(!(n.length<1||!this._texture._uvs)){this.vertices.length/4!==n.length&&(this.vertices=new Float32Array(n.length*4),this.uvs=new Float32Array(n.length*4),this.colors=new Float32Array(n.length*2),this.indices=new Uint16Array(n.length*2));var i=this.uvs,a=this.indices,o=this.colors;i[0]=0,i[1]=0,i[2]=0,i[3]=1,o[0]=1,o[1]=1,a[0]=0,a[1]=1;for(var s=n.length,u=1;u<s;u++){var l=u*4,h=u/(s-1);i[l]=h,i[l+1]=0,i[l+2]=h,i[l+3]=1,l=u*2,o[l]=1,o[l+1]=1,l=u*2,a[l]=l,a[l+1]=l+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var n=this.points;if(!(n.length<1))for(var i=n[0],a=void 0,o=0,s=0,u=this.vertices,l=n.length,h=0;h<l;h++){var f=n[h],d=h*4;h<n.length-1?a=n[h+1]:a=f,s=-(a.x-i.x),o=a.y-i.y;var p=Math.sqrt(o*o+s*s),c=this._texture.height/2;o/=p,s/=p,o*=c,s*=c,u[d]=f.x+o,u[d+1]=f.y+s,u[d+2]=f.x-o,u[d+3]=f.y-s,i=f}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(PA.default);zs.default=AA;(function(e){e.__esModule=!0;var t=Ut;Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return s(t).default}});var r=Ws;Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return s(r).default}});var n=Vs;Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return s(n).default}});var i=Xi;Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return s(i).default}});var a=Ys;Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return s(a).default}});var o=zs;Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return s(o).default}});function s(u){return u&&u.__esModule?u:{default:u}}})(Kf);var rc={},Ks={};Ks.__esModule=!0;var DA=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),IA=J,nc=$A(IA),LA=L;function $A(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function BA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FA(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function GA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var kA=function(e){GA(t,e);function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1500,n=arguments[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:16384,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;BA(this,t);var o=FA(this,e.call(this)),s=16384;return i>s&&(i=s),i>r&&(i=r),o._properties=[!1,!0,!1,!1,!1],o._maxSize=r,o._batchSize=i,o._glBuffers={},o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=nc.BLEND_MODES.NORMAL,o.autoResize=a,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return t.prototype.setProperties=function(n){n&&(this._properties[0]="vertices"in n||"scale"in n?!!n.vertices||!!n.scale:this._properties[0],this._properties[1]="position"in n?!!n.position:this._properties[1],this._properties[2]="rotation"in n?!!n.rotation:this._properties[2],this._properties[3]="uvs"in n?!!n.uvs:this._properties[3],this._properties[4]="tint"in n||"alpha"in n?!!n.tint||!!n.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(n){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),n.setObjectRenderer(n.plugins.particle),n.plugins.particle.render(this))},t.prototype.onChildrenChange=function(n){for(var i=Math.floor(n/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},t.prototype.renderCanvas=function(n){if(!(!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable)){var i=n.context,a=this.worldTransform,o=!0,s=0,u=0,l=0,h=0;n.setBlendMode(this.blendMode),i.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var f=0;f<this.children.length;++f){var d=this.children[f];if(!!d.visible){var p=d._texture.frame;if(i.globalAlpha=this.worldAlpha*d.alpha,d.rotation%(Math.PI*2)==0)o&&(i.setTransform(a.a,a.b,a.c,a.d,a.tx*n.resolution,a.ty*n.resolution),o=!1),s=d.anchor.x*(-p.width*d.scale.x)+d.position.x+.5,u=d.anchor.y*(-p.height*d.scale.y)+d.position.y+.5,l=p.width*d.scale.x,h=p.height*d.scale.y;else{o||(o=!0),d.displayObjectUpdateTransform();var c=d.worldTransform;n.roundPixels?i.setTransform(c.a,c.b,c.c,c.d,c.tx*n.resolution|0,c.ty*n.resolution|0):i.setTransform(c.a,c.b,c.c,c.d,c.tx*n.resolution,c.ty*n.resolution),s=d.anchor.x*-p.width+.5,u=d.anchor.y*-p.height+.5,l=p.width,h=p.height}var _=d._texture.baseTexture.resolution;i.drawImage(d._texture.baseTexture.source,p.x*_,p.y*_,p.width*_,p.height*_,s*n.resolution,u*n.resolution,l*n.resolution,h*n.resolution)}}}},t.prototype.destroy=function(n){if(e.prototype.destroy.call(this,n),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},DA(t,[{key:"tint",get:function(){return this._tint},set:function(n){this._tint=n,(0,LA.hex2rgb)(n,this.tintRgb)}}]),t}(nc.Container);Ks.default=kA;var Zs={},Js={};Js.__esModule=!0;var UA=Bt,NA=HA(UA);function HA(e){return e&&e.__esModule?e:{default:e}}function XA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WA(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function VA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qA=function(e){VA(t,e);function t(r){return XA(this,t),WA(this,e.call(this,r,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join(`
`),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join(`
`)))}return t}(NA.default);Js.default=qA;var Qs={};Qs.__esModule=!0;var YA=Se.exports,Vi=ic(YA),zA=Zr,KA=ic(zA);function ic(e){return e&&e.__esModule?e:{default:e}}function ZA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var JA=function(){function e(t,r,n,i){ZA(this,e),this.gl=t,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var a=0;a<r.length;++a){var o=r[a];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,unsignedByte:o.unsignedByte,offset:o.offset},n[a]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var r=this.gl,n=0;this.indices=(0,KA.default)(this.size),this.indexBuffer=Vi.default.GLBuffer.createIndexBuffer(r,this.indices,r.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var a=this.dynamicProperties[i];a.offset=n,n+=a.size,this.dynamicStride+=a.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=Vi.default.GLBuffer.createVertexBuffer(r,o,r.STREAM_DRAW);var s=0;this.staticStride=0;for(var u=0;u<this.staticProperties.length;++u){var l=this.staticProperties[u];l.offset=s,s+=l.size,this.staticStride+=l.size}var h=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(h),this.staticDataUint32=new Uint32Array(h),this.staticBuffer=Vi.default.GLBuffer.createVertexBuffer(r,h,r.STATIC_DRAW),this.vao=new Vi.default.VertexArrayObject(r).addIndex(this.indexBuffer);for(var f=0;f<this.dynamicProperties.length;++f){var d=this.dynamicProperties[f];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,r.UNSIGNED_BYTE,!0,this.dynamicStride*4,d.offset*4):this.vao.addAttribute(this.dynamicBuffer,d.attribute,r.FLOAT,!1,this.dynamicStride*4,d.offset*4)}for(var p=0;p<this.staticProperties.length;++p){var c=this.staticProperties[p];c.unsignedByte?this.vao.addAttribute(this.staticBuffer,c.attribute,r.UNSIGNED_BYTE,!0,this.staticStride*4,c.offset*4):this.vao.addAttribute(this.staticBuffer,c.attribute,r.FLOAT,!1,this.staticStride*4,c.offset*4)}},e.prototype.uploadDynamic=function(r,n,i){for(var a=0;a<this.dynamicProperties.length;a++){var o=this.dynamicProperties[a];o.uploadFunction(r,n,i,o.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer.upload()},e.prototype.uploadStatic=function(r,n,i){for(var a=0;a<this.staticProperties.length;a++){var o=this.staticProperties[a];o.uploadFunction(r,n,i,o.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer.upload()},e.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},e}();Qs.default=JA;Zs.__esModule=!0;var QA=J,_n=nD(QA),jA=Js,eD=oc(jA),tD=Qs,ac=oc(tD),rD=L;function oc(e){return e&&e.__esModule?e:{default:e}}function nD(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function iD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function oD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var sc=function(e){oD(t,e);function t(r){iD(this,t);var n=aD(this,e.call(this,r));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new _n.Matrix,n.CONTEXT_UID=0,n}return t.prototype.onContextChange=function(){var n=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new eD.default(n),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(n){var i=n.children,a=n._maxSize,o=n._batchSize,s=this.renderer,u=i.length;if(u!==0){u>a&&(u=a);var l=n._glBuffers[s.CONTEXT_UID];l||(l=n._glBuffers[s.CONTEXT_UID]=this.generateBuffers(n));var h=i[0]._texture.baseTexture;this.renderer.setBlendMode(_n.utils.correctBlendMode(n.blendMode,h.premultipliedAlpha));var f=s.gl,d=n.worldTransform.copy(this.tempMatrix);d.prepend(s._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=d.toArray(!0),this.shader.uniforms.uColor=_n.utils.premultiplyRgba(n.tintRgb,n.worldAlpha,this.shader.uniforms.uColor,h.premultipliedAlpha),this.shader.uniforms.uSampler=s.bindTexture(h);for(var p=!1,c=0,_=0;c<u;c+=o,_+=1){var v=u-c;if(v>o&&(v=o),_>=l.length){if(!n.autoResize)break;l.push(this._generateOneMoreBuffer(n))}var g=l[_];g.uploadDynamic(i,c,v);var m=n._bufferUpdateIDs[_]||0;p=p||g._updateID<m,p&&(g._updateID=n._updateID,g.uploadStatic(i,c,v)),s.bindVao(g.vao),g.vao.draw(f.TRIANGLES,v*6)}}},t.prototype.generateBuffers=function(n){for(var i=this.renderer.gl,a=[],o=n._maxSize,s=n._batchSize,u=n._properties,l=0;l<o;l+=s)a.push(new ac.default(i,this.properties,u,s));return a},t.prototype._generateOneMoreBuffer=function(n){var i=this.renderer.gl,a=n._batchSize,o=n._properties;return new ac.default(i,this.properties,o,a)},t.prototype.uploadVertices=function(n,i,a,o,s,u){for(var l=0,h=0,f=0,d=0,p=0;p<a;++p){var c=n[i+p],_=c._texture,v=c.scale.x,g=c.scale.y,m=_.trim,y=_.orig;m?(h=m.x-c.anchor.x*y.width,l=h+m.width,d=m.y-c.anchor.y*y.height,f=d+m.height):(l=y.width*(1-c.anchor.x),h=y.width*-c.anchor.x,f=y.height*(1-c.anchor.y),d=y.height*-c.anchor.y),o[u]=h*v,o[u+1]=d*g,o[u+s]=l*v,o[u+s+1]=d*g,o[u+s*2]=l*v,o[u+s*2+1]=f*g,o[u+s*3]=h*v,o[u+s*3+1]=f*g,u+=s*4}},t.prototype.uploadPosition=function(n,i,a,o,s,u){for(var l=0;l<a;l++){var h=n[i+l].position;o[u]=h.x,o[u+1]=h.y,o[u+s]=h.x,o[u+s+1]=h.y,o[u+s*2]=h.x,o[u+s*2+1]=h.y,o[u+s*3]=h.x,o[u+s*3+1]=h.y,u+=s*4}},t.prototype.uploadRotation=function(n,i,a,o,s,u){for(var l=0;l<a;l++){var h=n[i+l].rotation;o[u]=h,o[u+s]=h,o[u+s*2]=h,o[u+s*3]=h,u+=s*4}},t.prototype.uploadUvs=function(n,i,a,o,s,u){for(var l=0;l<a;++l){var h=n[i+l]._texture._uvs;h?(o[u]=h.x0,o[u+1]=h.y0,o[u+s]=h.x1,o[u+s+1]=h.y1,o[u+s*2]=h.x2,o[u+s*2+1]=h.y2,o[u+s*3]=h.x3,o[u+s*3+1]=h.y3,u+=s*4):(o[u]=0,o[u+1]=0,o[u+s]=0,o[u+s+1]=0,o[u+s*2]=0,o[u+s*2+1]=0,o[u+s*3]=0,o[u+s*3+1]=0,u+=s*4)}},t.prototype.uploadTint=function(n,i,a,o,s,u){for(var l=0;l<a;++l){var h=n[i+l],f=h._texture.baseTexture.premultipliedAlpha,d=h.alpha,p=d<1&&f?(0,rD.premultiplyTint)(h._tintRGB,d):h._tintRGB+(d*255<<24);o[u]=p,o[u+s]=p,o[u+s*2]=p,o[u+s*3]=p,u+=s*4}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(_n.ObjectRenderer);Zs.default=sc;_n.WebGLRenderer.registerPlugin("particle",sc);(function(e){e.__esModule=!0;var t=Ks;Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return n(t).default}});var r=Zs;Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return n(r).default}});function n(i){return i&&i.__esModule?i:{default:i}}})(rc);var uc={},js={},gn={},qi={};qi.__esModule=!0;function sD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var uD=function(){function e(t){sD(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();qi.default=uD;gn.__esModule=!0;var lD=J,Ee=dD(lD),hD=qi,fD=cD(hD);function cD(e){return e&&e.__esModule?e:{default:e}}function dD(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function pD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var eu=Ee.ticker.shared;Ee.settings.UPLOADS_PER_FRAME=4;var vD=function(){function e(t){var r=this;pD(this,e),this.limiter=new fD.default(Ee.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!r.queue||r.prepareItems()},this.registerFindHook(TD),this.registerFindHook(ED),this.registerFindHook(_D),this.registerFindHook(gD),this.registerFindHook(yD),this.registerUploadHook(mD),this.registerUploadHook(xD)}return e.prototype.upload=function(r,n){typeof r=="function"&&(n=r,r=null),r&&this.add(r),this.queue.length?(n&&this.completes.push(n),this.ticking||(this.ticking=!0,eu.addOnce(this.tick,this,Ee.UPDATE_PRIORITY.UTILITY))):n&&n()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var r=this.queue[0],n=!1;if(r&&!r._destroyed){for(var i=0,a=this.uploadHooks.length;i<a;i++)if(this.uploadHooks[i](this.uploadHookHelper,r)){this.queue.shift(),n=!0;break}}n||this.queue.shift()}if(this.queue.length)eu.addOnce(this.tick,this,Ee.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var s=0,u=o.length;s<u;s++)o[s]()}},e.prototype.registerFindHook=function(r){return r&&this.addHooks.push(r),this},e.prototype.registerUploadHook=function(r){return r&&this.uploadHooks.push(r),this},e.prototype.add=function(r){for(var n=0,i=this.addHooks.length;n<i&&!this.addHooks[n](r,this.queue);n++);if(r instanceof Ee.Container)for(var a=r.children.length-1;a>=0;a--)this.add(r.children[a]);return this},e.prototype.destroy=function(){this.ticking&&eu.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();gn.default=vD;function _D(e,t){var r=!1;if(e&&e._textures&&e._textures.length){for(var n=0;n<e._textures.length;n++)if(e._textures[n]instanceof Ee.Texture){var i=e._textures[n].baseTexture;t.indexOf(i)===-1&&(t.push(i),r=!0)}}return r}function gD(e,t){return e instanceof Ee.BaseTexture?(t.indexOf(e)===-1&&t.push(e),!0):!1}function yD(e,t){if(e._texture&&e._texture instanceof Ee.Texture){var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function mD(e,t){return t instanceof Ee.Text?(t.updateText(!0),!0):!1}function xD(e,t){if(t instanceof Ee.TextStyle){var r=t.toFontString();return Ee.TextMetrics.measureFont(r),!0}return!1}function TD(e,t){if(e instanceof Ee.Text){t.indexOf(e.style)===-1&&t.push(e.style),t.indexOf(e)===-1&&t.push(e);var r=e._texture.baseTexture;return t.indexOf(r)===-1&&t.push(r),!0}return!1}function ED(e,t){return e instanceof Ee.TextStyle?(t.indexOf(e)===-1&&t.push(e),!0):!1}js.__esModule=!0;var bD=J,Yi=RD(bD),SD=gn,wD=PD(SD);function PD(e){return e&&e.__esModule?e:{default:e}}function RD(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function MD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function CD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var lc=function(e){CD(t,e);function t(r){MD(this,t);var n=OD(this,e.call(this,r));return n.uploadHookHelper=n.renderer,n.registerFindHook(ID),n.registerUploadHook(AD),n.registerUploadHook(DD),n}return t}(wD.default);js.default=lc;function AD(e,t){return t instanceof Yi.BaseTexture?(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0):!1}function DD(e,t){return t instanceof Yi.Graphics?((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0):!1}function ID(e,t){return e instanceof Yi.Graphics?(t.push(e),!0):!1}Yi.WebGLRenderer.registerPlugin("prepare",lc);var tu={};tu.__esModule=!0;var LD=J,hc=GD(LD),$D=gn,BD=FD($D);function FD(e){return e&&e.__esModule?e:{default:e}}function GD(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function kD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UD(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ND(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fc=16,cc=function(e){ND(t,e);function t(r){kD(this,t);var n=UD(this,e.call(this,r));return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=fc,n.canvas.height=fc,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(HD),n}return t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(BD.default);tu.default=cc;function HD(e,t){if(t instanceof hc.BaseTexture){var r=t.source,n=r.width===0?e.canvas.width:Math.min(e.canvas.width,r.width),i=r.height===0?e.canvas.height:Math.min(e.canvas.height,r.height);return e.ctx.drawImage(r,0,0,n,i,0,0,e.canvas.width,e.canvas.height),!0}return!1}hc.CanvasRenderer.registerPlugin("prepare",cc);var ru={};ru.__esModule=!0;function XD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var WD=function(){function e(t){XD(this,e),this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();ru.default=WD;(function(e){e.__esModule=!0;var t=js;Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return o(t).default}});var r=tu;Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return o(r).default}});var n=gn;Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return o(n).default}});var i=qi;Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return o(i).default}});var a=ru;Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return o(a).default}});function o(s){return s&&s.__esModule?s:{default:s}}})(uc);(function(e){e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var t=Eg;Object.keys(t).forEach(function(P){P==="default"||P==="__esModule"||Object.defineProperty(e,P,{enumerable:!0,get:function(){return t[P]}})});var r=J;Object.keys(r).forEach(function(P){P==="default"||P==="__esModule"||Object.defineProperty(e,P,{enumerable:!0,get:function(){return r[P]}})});var n=hs,i=b(n),a=af,o=S(a),s=hf,u=S(s),l=vs,h=S(l),f=Sf,d=S(f),p=If,c=S(p),_=Bf,v=S(_),g=Kf,m=S(g),y=rc,x=S(y),T=uc,E=S(T);function S(P){if(P&&P.__esModule)return P;var A={};if(P!=null)for(var $ in P)Object.prototype.hasOwnProperty.call(P,$)&&(A[$]=P[$]);return A.default=P,A}function b(P){return P&&P.__esModule?P:{default:P}}r.utils.mixins.performMixins();var w=v.shared||null;e.accessibility=o,e.extract=u,e.extras=h,e.filters=d,e.interaction=c,e.loaders=v,e.mesh=m,e.particles=x,e.prepare=E,e.loader=w,typeof i.default=="function"&&(0,i.default)(e),ne.PIXI=e})(K);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var nu=function(e,t){return nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},nu(e,t)};function yn(e,t){nu(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var VD=function(e){yn(t,e);function t(r){var n=this;return r.autoStart=!1,n=e.call(this,r)||this,n}return t}(K.Application),qD=VD,YD=function(e){yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(K.Container),zD=YD;(function(e){yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(K.Graphics);(function(e){yn(t,e);function t(r,n,i,a,o){var s=this,u;return r==="string"?u=K.Texture.fromFrame(r):u=K.Texture.from(r),s=e.call(this,u,n,i,a,o)||this,s}return t})(K.mesh.NineSlicePlane);(function(){function e(t){this._image=null,this._image=t,t?t instanceof HTMLImageElement?this.sprite=K.Sprite.from(t):t instanceof K.Texture&&(this.sprite=new K.Sprite(t)):this.sprite=new K.Sprite}return Object.defineProperty(e.prototype,"image",{get:function(){return this._image},set:function(t){this._image!==t&&(t instanceof HTMLImageElement?(this.sprite.texture&&this.sprite.texture.destroy(!1),this.sprite.texture=K.Texture.from(t)):t instanceof K.Texture&&(this.sprite.texture=t),this._image=t)},enumerable:!1,configurable:!0}),e})();(function(){function e(t){var r=t.frames;this.animatedSprite=new K.extras.AnimatedSprite(r)}return e.prototype.play=function(){this.animatedSprite.play()},e.prototype.stop=function(){this.animatedSprite.stop()},e.prototype.gotoAndPlay=function(t){this.animatedSprite.gotoAndPlay(t)},e.prototype.gotoAndStop=function(t){this.animatedSprite.gotoAndStop(t)},Object.defineProperty(e.prototype,"speed",{get:function(){return this.animatedSprite.animationSpeed},set:function(t){this.animatedSprite.animationSpeed=t},enumerable:!1,configurable:!0}),e})();(function(e){yn(t,e);function t(r,n){return e.call(this,r,n)||this}return t})(K.Text);var iu=K.extras.TilingSprite;(function(){function e(t){this._image=null,this._image=t,t?t instanceof HTMLImageElement?this.tilingSprite=new iu(K.Texture.from(t)):t instanceof K.Texture&&(this.tilingSprite=new iu(t)):this.tilingSprite=new iu(K.Texture.EMPTY)}return Object.defineProperty(e.prototype,"image",{get:function(){return this._image},set:function(t){this._image!==t&&(t instanceof HTMLImageElement?this.tilingSprite.texture=K.Texture.from(t):t instanceof K.Texture&&(this.tilingSprite.texture=t),this._image=t)},enumerable:!1,configurable:!0}),e})();var dc={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,h){this.fn=u,this.context=l,this.once=h||!1}function a(u,l,h,f,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new i(h,f||u,d),c=r?r+l:l;return u._events[c]?u._events[c].fn?u._events[c]=[u._events[c],p]:u._events[c].push(p):(u._events[c]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount==0?u._events=new n:delete u._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],h,f;if(this._eventsCount===0)return l;for(f in h=this._events)t.call(h,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},s.prototype.listeners=function(l){var h=r?r+l:l,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,c=new Array(p);d<p;d++)c[d]=f[d].fn;return c},s.prototype.listenerCount=function(l){var h=r?r+l:l,f=this._events[h];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,h,f,d,p,c){var _=r?r+l:l;if(!this._events[_])return!1;var v=this._events[_],g=arguments.length,m,y;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,f),!0;case 4:return v.fn.call(v.context,h,f,d),!0;case 5:return v.fn.call(v.context,h,f,d,p),!0;case 6:return v.fn.call(v.context,h,f,d,p,c),!0}for(y=1,m=new Array(g-1);y<g;y++)m[y-1]=arguments[y];v.fn.apply(v.context,m)}else{var x=v.length,T;for(y=0;y<x;y++)switch(v[y].once&&this.removeListener(l,v[y].fn,void 0,!0),g){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,h);break;case 3:v[y].fn.call(v[y].context,h,f);break;case 4:v[y].fn.call(v[y].context,h,f,d);break;default:if(!m)for(T=1,m=new Array(g-1);T<g;T++)m[T-1]=arguments[T];v[y].fn.apply(v[y].context,m)}}return!0},s.prototype.on=function(l,h,f){return a(this,l,h,f,!1)},s.prototype.once=function(l,h,f){return a(this,l,h,f,!0)},s.prototype.removeListener=function(l,h,f,d){var p=r?r+l:l;if(!this._events[p])return this;if(!h)return o(this,p),this;var c=this._events[p];if(c.fn)c.fn===h&&(!d||c.once)&&(!f||c.context===f)&&o(this,p);else{for(var _=0,v=[],g=c.length;_<g;_++)(c[_].fn!==h||d&&!c[_].once||f&&c[_].context!==f)&&v.push(c[_]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},s.prototype.removeAllListeners=function(l){var h;return l?(h=r?r+l:l,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(dc);var KD=dc.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var au=function(e,t){return au=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},au(e,t)};function mn(e,t){au(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ou=function(){return ou=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ou.apply(this,arguments)};function pc(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function Fe(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function ZD(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function JD(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ZD(arguments[t]));return e}var QD=function(){function e(t){var r=t.game,n=t.rendererSystem;this.renderers=[],this.game=r,this.rendererSystem=n}return e.prototype.register=function(){for(var t,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var a=Fe(n),o=a.next();!o.done;o=a.next()){var s=o.value;s.game=this.game,s.rendererManager=this.rendererSystem.rendererManager,s.containerManager=this.rendererSystem.containerManager,this.renderers.push(s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},e.prototype.componentChanged=function(t){var r,n,i=function(l){var h,f;try{for(var d=(h=void 0,Fe(a.renderers)),p=d.next();!p.done;p=d.next()){var c=p.value,_=c.observerInfo[l.componentName];if(_){if([Re.ADD,Re.REMOVE].indexOf(l.type)>-1){try{c.componentChanged&&c.componentChanged(l)}catch(g){console.error("gameObject: "+l.gameObject.name+", "+l.componentName+" is error.",l,g)}continue}var v=_.findIndex(function(g){return On(g,l.prop)});if(v>-1)try{c.componentChanged&&c.componentChanged(l)}catch(g){console.error("gameObject: "+(l.gameObject&&l.gameObject.name)+", "+l.componentName+" is componentChanged error.",l,g)}}}}catch(g){h={error:g}}finally{try{p&&!p.done&&(f=d.return)&&f.call(d)}finally{if(h)throw h.error}}},a=this;try{for(var o=Fe(t),s=o.next();!s.done;s=o.next()){var u=s.value;i(u)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.update=function(t){var r,n,i,a;try{for(var o=Fe(t.components),s=o.next();!s.done;s=o.next()){var u=s.value;try{for(var l=(i=void 0,Fe(this.renderers)),h=l.next();!h.done;h=l.next()){var f=h.value,d=[],p=f.observerInfo[u.name];if(p&&d.indexOf(t)===-1){d.push(t);try{f.rendererUpdate&&f.rendererUpdate(t)}catch(c){console.info("gameObject: "+t.name+", "+u.name+" is update error",c)}}}}catch(c){i={error:c}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e}(),jD=QD,e2=function(){function e(){this.containerMap={}}return e.prototype.addContainer=function(t){var r=t.name,n=t.container;this.containerMap[r]=n},e.prototype.getContainer=function(t){return this.containerMap[t]},e.prototype.removeContainer=function(t){var r;(r=this.containerMap[t])===null||r===void 0||r.destroy({children:!0}),delete this.containerMap[t]},e.prototype.updateTransform=function(t){var r=t.name,n=t.transform,i=this.containerMap[r];if(!!i){var a=n.anchor,o=n.origin,s=n.position,u=n.rotation,l=n.scale,h=n.size,f=n.skew;i.rotation=u,i.scale=l,i.pivot.x=h.width*o.x,i.pivot.y=h.height*o.y,i.skew=f;var d=s.x,p=s.y;if(n.parent){var c=n.parent;d=d+c.size.width*a.x,p=p+c.size.height*a.y}i.position={x:d,y:p}}},e}(),t2=e2,r2=function(e){mn(t,e);function t(r){var n=r.system,i=r.containerManager,a=e.call(this)||this;return a.name="Transform",a.waitRemoveIds=[],a.waitChangeScenes=[],a.containerManager=i,a.init(n),a}return t.prototype.init=function(r){var n=this;this.system=r,this.on("changeScene",function(i){var a=i.scene,o=i.mode,s=i.application;n.waitChangeScenes.push({scene:a,mode:o,application:s})})},t.prototype.update=function(){var r,n,i,a;try{for(var o=Fe(this.waitRemoveIds),s=o.next();!s.done;s=o.next()){var u=s.value;this.containerManager.removeContainer(u)}}catch(p){r={error:p}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}this.waitRemoveIds=[];try{for(var l=Fe(this.waitChangeScenes),h=l.next();!h.done;h=l.next()){var f=h.value,d=this.containerManager.getContainer(f.scene.id);d&&(f.application.stage.removeChildren(),f.application.stage.addChild(d))}}catch(p){i={error:p}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}this.waitChangeScenes=[]},t.prototype.componentChanged=function(r){r.type===Re.ADD?this.addContainer(r):r.type===Re.CHANGE?this.change(r):r.type===Re.REMOVE&&this.waitRemoveIds.push(r.gameObject.id)},t.prototype.addContainer=function(r){var n=new zD;n.name=r.gameObject.name,this.containerManager.addContainer({name:r.gameObject.id,container:n});var i=r.component;i.worldTransform=n.transform.worldTransform},t.prototype.change=function(r){var n=r.component;if(n.parent){var i=this.containerManager.getContainer(n.parent.gameObject.id);i.addChild(this.containerManager.getContainer(r.gameObject.id));var a=r.gameObject.transform.parent&&r.gameObject.transform.parent.gameObject.getComponent("Render");a&&(a.sortDirty=!0)}else{var o=this.containerManager.getContainer(r.gameObject.id);delete n.worldTransform,o.parent&&o.parent.removeChild(o)}},t.prototype.destroy=function(){this.removeAllListeners(),this.waitRemoveIds=null,this.waitChangeScenes=null,this.system=null,this.containerManager=null},t=pc([Tl.componentObserver({Transform:["_parent"]})],t),t}(KD),n2=r2,or=void 0;function vc(e){if(or)return or;if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{s3tc:!1,etc:!1,etc1:!1,pvrtc:!1,atc:!1,astc:!1};or={s3tc:!!e.getExtension("WEBGL_compressed_texture_s3tc"),etc:!!e.getExtension("WEBGL_compressed_texture_etc"),etc1:!!e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:!!e.getExtension("WEBGL_compressed_texture_pvrtc")||!!e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:!!e.getExtension("WEBGL_compressed_texture_atc"),astc:!!e.getExtension("WEBGL_compressed_texture_astc")};try{console.log("Eva.js Supported Compressed Texture Format List: "+Object.keys(or).filter(function(t){return or[t]}).join(", "))}catch{}return or}var i2=_l.XhrLoadStrategy,a2=i2,q,Z,O;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",e[e.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",e[e.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",e[e.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",e[e.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",e[e.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",e[e.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",e[e.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",e[e.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",e[e.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=3781]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",e[e.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR"})(O||(O={}));var _c=(q={},q[O.COMPRESSED_RGB_S3TC_DXT1_EXT]=[4,4],q[O.COMPRESSED_RGBA_S3TC_DXT1_EXT]=[4,4],q[O.COMPRESSED_RGBA_S3TC_DXT3_EXT]=[4,4],q[O.COMPRESSED_RGBA_S3TC_DXT5_EXT]=[4,4],q[O.COMPRESSED_SRGB_S3TC_DXT1_EXT]=[4,4],q[O.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=[4,4],q[O.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=[4,4],q[O.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=[4,4],q[O.COMPRESSED_R11_EAC]=[4,4],q[O.COMPRESSED_SIGNED_R11_EAC]=[4,4],q[O.COMPRESSED_RG11_EAC]=[4,4],q[O.COMPRESSED_SIGNED_RG11_EAC]=[4,4],q[O.COMPRESSED_RGB8_ETC2]=[4,4],q[O.COMPRESSED_RGBA8_ETC2_EAC]=[4,4],q[O.COMPRESSED_SRGB8_ETC2]=[4,4],q[O.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=[4,4],q[O.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=[4,4],q[O.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=[4,4],q[O.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=[4,4],q[O.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=[4,4],q[O.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=[8,4],q[O.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=[8,4],q[O.COMPRESSED_RGB_ETC1_WEBGL]=[4,4],q[O.COMPRESSED_RGB_ATC_WEBGL]=[4,4],q[O.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=[4,4],q[O.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=[4,4],q[O.COMPRESSED_RGBA_ASTC_4x4_KHR]=[4,4],q[O.COMPRESSED_RGBA_ASTC_5x5_KHR]=[5,5],q[O.COMPRESSED_RGBA_ASTC_6x6_KHR]=[6,6],q[O.COMPRESSED_RGBA_ASTC_8x8_KHR]=[8,8],q[O.COMPRESSED_RGBA_ASTC_10x10_KHR]=[10,10],q[O.COMPRESSED_RGBA_ASTC_12x12_KHR]=[12,12],q[O.COMPRESSED_RGBA_ASTC_10x5_KHR]=[10,5],q[O.COMPRESSED_RGBA_ASTC_10x6_KHR]=[10,6],q[O.COMPRESSED_RGBA_ASTC_10x8_KHR]=[10,8],q[O.COMPRESSED_RGBA_ASTC_12x10_KHR]=[12,10],q[O.COMPRESSED_RGBA_ASTC_5x4_KHR]=[5,4],q[O.COMPRESSED_RGBA_ASTC_6x5_KHR]=[6,5],q[O.COMPRESSED_RGBA_ASTC_8x5_KHR]=[8,5],q[O.COMPRESSED_RGBA_ASTC_8x6_KHR]=[8,6],q),o2=(Z={},Z[O.COMPRESSED_RGB_S3TC_DXT1_EXT]="WEBGL_compressed_texture_s3tc",Z[O.COMPRESSED_RGBA_S3TC_DXT1_EXT]="WEBGL_compressed_texture_s3tc",Z[O.COMPRESSED_RGBA_S3TC_DXT3_EXT]="WEBGL_compressed_texture_s3tc",Z[O.COMPRESSED_RGBA_S3TC_DXT5_EXT]="WEBGL_compressed_texture_s3tc",Z[O.COMPRESSED_SRGB_S3TC_DXT1_EXT]="WEBGL_compressed_texture_s3tc_srgb",Z[O.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]="WEBGL_compressed_texture_s3tc_srgb",Z[O.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]="WEBGL_compressed_texture_s3tc_srgb",Z[O.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]="WEBGL_compressed_texture_s3tc_srgb",Z[O.COMPRESSED_R11_EAC]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_SIGNED_R11_EAC]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_RG11_EAC]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_SIGNED_RG11_EAC]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_RGB8_ETC2]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_RGBA8_ETC2_EAC]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_SRGB8_ETC2]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]="WEBGL_compressed_texture_etc",Z[O.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]="WEBGL_compressed_texture_pvrtc",Z[O.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]="WEBGL_compressed_texture_pvrtc",Z[O.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]="WEBGL_compressed_texture_pvrtc",Z[O.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]="WEBGL_compressed_texture_pvrtc",Z[O.COMPRESSED_RGB_ETC1_WEBGL]="WEBGL_compressed_texture_etc1",Z[O.COMPRESSED_RGB_ATC_WEBGL]="WEBGL_compressed_texture_atc",Z[O.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]="WEBGL_compressed_texture_atc",Z[O.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]="WEBGL_compressed_texture_atc",Z[O.COMPRESSED_RGBA_ASTC_4x4_KHR]="WEBGL_compressed_texture_astc",Z[O.COMPRESSED_RGBA_ASTC_5x5_KHR]="WEBGL_compressed_texture_astc",Z[O.COMPRESSED_RGBA_ASTC_6x6_KHR]="WEBGL_compressed_texture_astc",Z[O.COMPRESSED_RGBA_ASTC_8x8_KHR]="WEBGL_compressed_texture_astc",Z[O.COMPRESSED_RGBA_ASTC_10x10_KHR]="WEBGL_compressed_texture_astc",Z[O.COMPRESSED_RGBA_ASTC_12x12_KHR]="WEBGL_compressed_texture_astc",Z),zi=function(){function e(){this.levelBuffers=[]}return e.prototype.upload=function(t){var r=this.levels,n=o2[this.internalFormat];t[n]||(t[n]=!0,n==="WEBGL_compressed_texture_pvrtc"?t.getExtension(n)||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"):t.getExtension(n));for(var i=0;i<this.levels;++i){var a=this.levelBuffers[i],o=a.levelWidth,s=a.levelHeight,u=a.levelBuffer;t.compressedTexImage2D(t.TEXTURE_2D,i,this.internalFormat,o,s,0,u)}r>1?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR))},e}(),s2=64,Qe={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},gc=[171,75,84,88,32,49,49,187,13,10,26,10],u2=67305985,l2=function(e){mn(t,e);function t(r,n){var i,a=e.call(this)||this;a.complete=!0,a.src=n.url;var o=new DataView(r);if(!h2(o))throw new Error("Not a valid KTX Texture");var s=o.getUint32(Qe.ENDIANNESS,!0)===u2;a.internalFormat=o.getUint32(Qe.GL_INTERNAL_FORMAT,s);var u=a.formerWidth=o.getUint32(Qe.PIXEL_WIDTH,s),l=a.formerHeight=o.getUint32(Qe.PIXEL_HEIGHT,s)||1,h=_c[a.internalFormat];a.width=u%h[0]==0?u:u+h[0]-u%h[0],a.height=l%h[1]==0?l:l+h[1]-l%h[1];var f=xl.resourcesMap[n.metadata.name].src[n.metadata.key],d=(i=f==null?void 0:f.size)!==null&&i!==void 0?i:{},p=d.width,c=d.height;p&&c&&(a.naturalWidth=p,a.naturalHeight=c);var _=o.getUint32(Qe.PIXEL_DEPTH,s)||1,v=o.getUint32(Qe.NUMBER_OF_ARRAY_ELEMENTS,s)||1,g=o.getUint32(Qe.NUMBER_OF_FACES,s),m=a.levels=o.getUint32(Qe.NUMBER_OF_MIPMAP_LEVELS,s),y=o.getUint32(Qe.BYTES_OF_KEY_VALUE_DATA,s);if(l===0||_!==1)throw new Error("Only 2D textures are supported!");if(g!==1)throw new Error("CubeTextures are not supported!");if(v!==1)throw new Error("It does not support array textures!");for(var x=u,T=l,E=s2+y,S=0;S<m;S++){var b=o.getUint32(E,s);E+=4;var w=_c[a.internalFormat],P=x%w[0]==0?x:x+w[0]-x%w[0],A=T%w[1]==0?T:T+w[1]-T%w[1],$={levelID:S,levelWidth:P,levelHeight:A,levelBuffer:new Uint8Array(r,E,b)};a.levelBuffers.push($),E+=b,E+=3-(E+3)%4,x=x>>1||1,T=T>>1||1}return a}return t}(zi);function h2(e){for(var t=0;t<gc.length;t++)if(e.getUint8(t)!==gc[t])return!1;return!0}var f2=function(e){mn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype._complete=function(r,n){e.prototype._complete.call(this,r,new l2(n,this.config))},t}(a2),sr=f2,c2=_l.XhrResponseType;function d2(e,t){e.addPreProcessResourceHandler(function(n){var i,a,o,s=(a=(i=n.src)===null||i===void 0?void 0:i.image)===null||a===void 0?void 0:a.texture;if(!!s){Array.isArray(s)||(s=[s]);var u=(o=vc(t))!==null&&o!==void 0?o:{},l=s.find(function(h){return u[h.type]});l&&Object.assign(n.src.image,l)}})}function p2(){Object.assign(ml,{astc:sr,etc:sr,pvrtc:sr,s3tc:sr,atc:sr}),sr.setExtensionXhrType("ktx",c2.Buffer)}var v2=K.glCore.GLTexture,_2={isCompressed:!1,uploadNotCompressed:v2.prototype.upload,upload:function(e){if(!(e instanceof zi))return this.uploadNotCompressed(e);this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST_MIPMAP_NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.isCompressed=!0,e.upload(t)},enableMipmap:function(){if(!this.isCompressed){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)}}},Ki,yc=Symbol(),g2=(Ki={},Ki[yc]=K.Texture.from,Ki.from=function(e){return e instanceof zi?new K.Texture(K.BaseTexture.from(e)):this[yc](e)},Ki),Zi,mc=Symbol(),y2=(Zi={},Zi[mc]=K.BaseTexture.from,Zi.from=function(e,t,r){if(!(e instanceof zi))return this[mc](e,t,r);var n=e.src,i=K.utils.BaseTextureCache[n];return i||(i=new K.BaseTexture(e,t),i.imageUrl=n,r&&(i.sourceScale=r),K.BaseTexture.addToCache(i,n)),i},Zi);function m2(e){d2(xl,e),p2(),Object.assign(K.glCore.GLTexture.prototype,_2),Object.assign(K.Texture,g2),Object.assign(K.BaseTexture,y2)}var su;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(su||(su={}));var xc=function(e){e.plugins.interaction.autoPreventDefault=!0,e.view.style.touchAction="none"},uu=function(e){e.plugins.interaction.autoPreventDefault=!1,e.view.style.touchAction="auto"},x2=function(e){mn(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.multiApps=[],r}return t.prototype.init=function(r){var n=this;this.params=r,this.application=this.createApplication(r),this.containerManager=new t2,this.rendererManager=new jD({game:this.game,rendererSystem:this}),this.game.canvas=this.application.view,this.transform=new n2({system:this,containerManager:this.containerManager}),this.game.on("sceneChanged",function(a){var o=a.scene,s=a.mode,u=a.params,l;switch(s){case Rt.SINGLE:l=n.application;break;case Rt.MULTI_CANVAS:l=n.createMultiApplication({params:u});break}o.canvas=l.view,n.transform.emit("changeScene",{scene:o,mode:s,application:l})});var i=this.application.renderer.gl;i&&(this.suportedCompressedTextureFormats=vc(i),m2(i))},t.prototype.registerObserver=function(r){var n,i=this.constructor.observerInfo;for(var a in r)i[a]||(i[a]=[]),(n=i[a]).push.apply(n,JD(r[a]))},t.prototype.createMultiApplication=function(r){var n=r.params,i=this.createApplication(n);return this.multiApps.push(i),i},t.prototype.createApplication=function(r){r.view=r.canvas,r.renderType===su.CANVAS&&(r.forceCanvas=!0),K.ticker.shared.autoStart=!1,K.ticker.shared.stop();var n=new qD(ou({sharedTicker:!0},r));return r.preventScroll!==void 0&&(console.warn("PreventScroll property will deprecate at next major version, please use enableEnable instead. https://eva.js.org/#/tutorials/game"),r.preventScroll?uu(n.renderer):xc(n.renderer)),r.enableScroll!==void 0&&(r.enableScroll?uu(n.renderer):xc(n.renderer)),r.preventScroll===void 0&&r.enableScroll===void 0&&uu(n.renderer),n},t.prototype.update=function(){var r,n,i,a,o=this.componentObserver.clear();try{for(var s=Fe(o),u=s.next();!u.done;u=s.next()){var l=u.value;this.transform.componentChanged(l)}}catch(p){r={error:p}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}try{for(var h=Fe(this.game.gameObjects),f=h.next();!f.done;f=h.next()){var d=f.value;this.containerManager.updateTransform({name:d.id,transform:d.transform}),this.rendererManager.update(d)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}},t.prototype.lateUpdate=function(r){this.transform.update(),this.application.ticker.update(r.time)},t.prototype.onDestroy=function(){var r,n;this.application.destroy();try{for(var i=Fe(this.multiApps),a=i.next();!a.done;a=i.next()){var o=a.value;o&&o.destroy()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}this.transform.destroy(),this.transform=null,this.params=null,this.rendererManager=null,this.containerManager=null,this.application=null,this.game=null,this.multiApps=null},t.prototype.resize=function(r,n){this.params.width=r,this.params.height=n,this.application.renderer.resize(r,n)},t.systemName="Renderer",t=pc([Tl.componentObserver({Transform:["_parent"]})],t),t}(Er),tN=x2,T2=function(e){mn(t,e);function t(r){var n=e.call(this,r)||this;return n.observerInfo=n.constructor.observerInfo,n}return t.prototype.componentChanged=function(r){},t.prototype.rendererUpdate=function(r){},t.prototype.update=function(r){var n,i,a=this.componentObserver.clear();try{for(var o=Fe(a),s=o.next();!s.done;s=o.next()){var u=s.value;this.componentChanged(u)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t}(Er),rN=T2,E2=function(){K.BaseTexture.prototype.destroy=function(){this.imageUrl&&(delete K.utils.TextureCache[this.imageUrl],this.imageUrl=null),this.source=null,this.dispose(),K.BaseTexture.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0}};E2();var Tc={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,h){this.fn=u,this.context=l,this.once=h||!1}function a(u,l,h,f,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new i(h,f||u,d),c=r?r+l:l;return u._events[c]?u._events[c].fn?u._events[c]=[u._events[c],p]:u._events[c].push(p):(u._events[c]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount==0?u._events=new n:delete u._events[l]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],h,f;if(this._eventsCount===0)return l;for(f in h=this._events)t.call(h,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},s.prototype.listeners=function(l){var h=r?r+l:l,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,c=new Array(p);d<p;d++)c[d]=f[d].fn;return c},s.prototype.listenerCount=function(l){var h=r?r+l:l,f=this._events[h];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,h,f,d,p,c){var _=r?r+l:l;if(!this._events[_])return!1;var v=this._events[_],g=arguments.length,m,y;if(v.fn){switch(v.once&&this.removeListener(l,v.fn,void 0,!0),g){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,f),!0;case 4:return v.fn.call(v.context,h,f,d),!0;case 5:return v.fn.call(v.context,h,f,d,p),!0;case 6:return v.fn.call(v.context,h,f,d,p,c),!0}for(y=1,m=new Array(g-1);y<g;y++)m[y-1]=arguments[y];v.fn.apply(v.context,m)}else{var x=v.length,T;for(y=0;y<x;y++)switch(v[y].once&&this.removeListener(l,v[y].fn,void 0,!0),g){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,h);break;case 3:v[y].fn.call(v[y].context,h,f);break;case 4:v[y].fn.call(v[y].context,h,f,d);break;default:if(!m)for(T=1,m=new Array(g-1);T<g;T++)m[T-1]=arguments[T];v[y].fn.apply(v[y].context,m)}}return!0},s.prototype.on=function(l,h,f){return a(this,l,h,f,!1)},s.prototype.once=function(l,h,f){return a(this,l,h,f,!0)},s.prototype.removeListener=function(l,h,f,d){var p=r?r+l:l;if(!this._events[p])return this;if(!h)return o(this,p),this;var c=this._events[p];if(c.fn)c.fn===h&&(!d||c.once)&&(!f||c.context===f)&&o(this,p);else{for(var _=0,v=[],g=c.length;_<g;_++)(c[_].fn!==h||d&&!c[_].once||f&&c[_].context!==f)&&v.push(c[_]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},s.prototype.removeAllListeners=function(l){var h;return l?(h=r?r+l:l,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(Tc);var nN=Tc.exports;function b2(e){return e}var lu=b2;function S2(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var w2=S2,P2=w2,Ec=Math.max;function R2(e,t,r){return t=Ec(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Ec(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),P2(e,this,s)}}var M2=R2;function O2(e){return function(){return e}}var C2=O2,A2=typeof ne=="object"&&ne&&ne.Object===Object&&ne,bc=A2,D2=bc,I2=typeof self=="object"&&self&&self.Object===Object&&self,L2=D2||I2||Function("return this")(),je=L2,$2=je,B2=$2.Symbol,Ji=B2,Sc=Ji,wc=Object.prototype,F2=wc.hasOwnProperty,G2=wc.toString,xn=Sc?Sc.toStringTag:void 0;function k2(e){var t=F2.call(e,xn),r=e[xn];try{e[xn]=void 0;var n=!0}catch{}var i=G2.call(e);return n&&(t?e[xn]=r:delete e[xn]),i}var U2=k2,N2=Object.prototype,H2=N2.toString;function X2(e){return H2.call(e)}var W2=X2,Pc=Ji,V2=U2,q2=W2,Y2="[object Null]",z2="[object Undefined]",Rc=Pc?Pc.toStringTag:void 0;function K2(e){return e==null?e===void 0?z2:Y2:Rc&&Rc in Object(e)?V2(e):q2(e)}var Tn=K2;function Z2(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var hu=Z2,J2=Tn,Q2=hu,j2="[object AsyncFunction]",eI="[object Function]",tI="[object GeneratorFunction]",rI="[object Proxy]";function nI(e){if(!Q2(e))return!1;var t=J2(e);return t==eI||t==tI||t==j2||t==rI}var Mc=nI,iI=je,aI=iI["__core-js_shared__"],oI=aI,fu=oI,Oc=function(){var e=/[^.]+$/.exec(fu&&fu.keys&&fu.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function sI(e){return!!Oc&&Oc in e}var uI=sI,lI=Function.prototype,hI=lI.toString;function fI(e){if(e!=null){try{return hI.call(e)}catch{}try{return e+""}catch{}}return""}var Cc=fI,cI=Mc,dI=uI,pI=hu,vI=Cc,_I=/[\\^$.*+?()[\]{}|]/g,gI=/^\[object .+?Constructor\]$/,yI=Function.prototype,mI=Object.prototype,xI=yI.toString,TI=mI.hasOwnProperty,EI=RegExp("^"+xI.call(TI).replace(_I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bI(e){if(!pI(e)||dI(e))return!1;var t=cI(e)?EI:gI;return t.test(vI(e))}var SI=bI;function wI(e,t){return e==null?void 0:e[t]}var PI=wI,RI=SI,MI=PI;function OI(e,t){var r=MI(e,t);return RI(r)?r:void 0}var Nt=OI,CI=Nt,AI=function(){try{var e=CI(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ac=AI,DI=C2,Dc=Ac,II=lu,LI=Dc?function(e,t){return Dc(e,"toString",{configurable:!0,enumerable:!1,value:DI(t),writable:!0})}:II,$I=LI,BI=800,FI=16,GI=Date.now;function kI(e){var t=0,r=0;return function(){var n=GI(),i=FI-(n-r);if(r=n,i>0){if(++t>=BI)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var UI=kI,NI=$I,HI=UI,XI=HI(NI),WI=XI,VI=lu,qI=M2,YI=WI;function zI(e,t){return YI(qI(e,t,VI),e+"")}var KI=zI;function ZI(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Ic=ZI;function JI(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var QI=JI;function jI(e){return e!==e}var eL=jI;function tL(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var rL=tL,nL=QI,iL=eL,aL=rL;function oL(e,t,r){return t===t?aL(e,t,r):nL(e,iL,r)}var sL=oL;function uL(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}var lL=uL;function hL(e){return function(t){return e(t)}}var Lc=hL;function fL(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var cL=fL,dL=Ic,pL=sL,vL=lL,_L=Lc,gL=cL,yL=Array.prototype,$c=yL.splice;function mL(e,t,r,n){var i=n?vL:pL,a=-1,o=t.length,s=e;for(e===t&&(t=gL(t)),r&&(s=dL(e,_L(r)));++a<o;)for(var u=0,l=t[a],h=r?r(l):l;(u=i(s,h,u,n))>-1;)s!==e&&$c.call(s,u,1),$c.call(e,u,1);return e}var xL=mL,TL=xL;function EL(e,t){return e&&e.length&&t&&t.length?TL(e,t):e}var bL=EL,SL=KI,wL=bL,PL=SL(wL),iN=PL,Bc=Ac;function RL(e,t,r){t=="__proto__"&&Bc?Bc(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var ML=RL;function OL(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var u=o[e?s:++i];if(r(a[u],u,a)===!1)break}return t}}var CL=OL,AL=CL,DL=AL(),IL=DL;function LL(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var $L=LL;function BL(e){return e!=null&&typeof e=="object"}var En=BL,FL=Tn,GL=En,kL="[object Arguments]";function UL(e){return GL(e)&&FL(e)==kL}var NL=UL,Fc=NL,HL=En,Gc=Object.prototype,XL=Gc.hasOwnProperty,WL=Gc.propertyIsEnumerable,VL=Fc(function(){return arguments}())?Fc:function(e){return HL(e)&&XL.call(e,"callee")&&!WL.call(e,"callee")},kc=VL,qL=Array.isArray,_t=qL,Qi={exports:{}};function YL(){return!1}var zL=YL;(function(e,t){var r=je,n=zL,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,s=o?r.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||n;e.exports=l})(Qi,Qi.exports);var KL=9007199254740991,ZL=/^(?:0|[1-9]\d*)$/;function JL(e,t){var r=typeof e;return t=t==null?KL:t,!!t&&(r=="number"||r!="symbol"&&ZL.test(e))&&e>-1&&e%1==0&&e<t}var Uc=JL,QL=9007199254740991;function jL(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=QL}var cu=jL,e$=Tn,t$=cu,r$=En,n$="[object Arguments]",i$="[object Array]",a$="[object Boolean]",o$="[object Date]",s$="[object Error]",u$="[object Function]",l$="[object Map]",h$="[object Number]",f$="[object Object]",c$="[object RegExp]",d$="[object Set]",p$="[object String]",v$="[object WeakMap]",_$="[object ArrayBuffer]",g$="[object DataView]",y$="[object Float32Array]",m$="[object Float64Array]",x$="[object Int8Array]",T$="[object Int16Array]",E$="[object Int32Array]",b$="[object Uint8Array]",S$="[object Uint8ClampedArray]",w$="[object Uint16Array]",P$="[object Uint32Array]",te={};te[y$]=te[m$]=te[x$]=te[T$]=te[E$]=te[b$]=te[S$]=te[w$]=te[P$]=!0;te[n$]=te[i$]=te[_$]=te[a$]=te[g$]=te[o$]=te[s$]=te[u$]=te[l$]=te[h$]=te[f$]=te[c$]=te[d$]=te[p$]=te[v$]=!1;function R$(e){return r$(e)&&t$(e.length)&&!!te[e$(e)]}var M$=R$,du={exports:{}};(function(e,t){var r=bc,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,o=a&&r.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(du,du.exports);var O$=M$,C$=Lc,Nc=du.exports,Hc=Nc&&Nc.isTypedArray,A$=Hc?C$(Hc):O$,Xc=A$,D$=$L,I$=kc,L$=_t,$$=Qi.exports,B$=Uc,F$=Xc,G$=Object.prototype,k$=G$.hasOwnProperty;function U$(e,t){var r=L$(e),n=!r&&I$(e),i=!r&&!n&&$$(e),a=!r&&!n&&!i&&F$(e),o=r||n||i||a,s=o?D$(e.length,String):[],u=s.length;for(var l in e)(t||k$.call(e,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||a&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||B$(l,u)))&&s.push(l);return s}var N$=U$,H$=Object.prototype;function X$(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||H$;return e===r}var W$=X$;function V$(e,t){return function(r){return e(t(r))}}var q$=V$,Y$=q$,z$=Y$(Object.keys,Object),K$=z$,Z$=W$,J$=K$,Q$=Object.prototype,j$=Q$.hasOwnProperty;function eB(e){if(!Z$(e))return J$(e);var t=[];for(var r in Object(e))j$.call(e,r)&&r!="constructor"&&t.push(r);return t}var tB=eB,rB=Mc,nB=cu;function iB(e){return e!=null&&nB(e.length)&&!rB(e)}var aB=iB,oB=N$,sB=tB,uB=aB;function lB(e){return uB(e)?oB(e):sB(e)}var pu=lB,hB=IL,fB=pu;function cB(e,t){return e&&hB(e,t,fB)}var dB=cB;function pB(){this.__data__=[],this.size=0}var vB=pB;function _B(e,t){return e===t||e!==e&&t!==t}var Wc=_B,gB=Wc;function yB(e,t){for(var r=e.length;r--;)if(gB(e[r][0],t))return r;return-1}var ji=yB,mB=ji,xB=Array.prototype,TB=xB.splice;function EB(e){var t=this.__data__,r=mB(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():TB.call(t,r,1),--this.size,!0}var bB=EB,SB=ji;function wB(e){var t=this.__data__,r=SB(t,e);return r<0?void 0:t[r][1]}var PB=wB,RB=ji;function MB(e){return RB(this.__data__,e)>-1}var OB=MB,CB=ji;function AB(e,t){var r=this.__data__,n=CB(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var DB=AB,IB=vB,LB=bB,$B=PB,BB=OB,FB=DB;function ur(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ur.prototype.clear=IB;ur.prototype.delete=LB;ur.prototype.get=$B;ur.prototype.has=BB;ur.prototype.set=FB;var ea=ur,GB=ea;function kB(){this.__data__=new GB,this.size=0}var UB=kB;function NB(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var HB=NB;function XB(e){return this.__data__.get(e)}var WB=XB;function VB(e){return this.__data__.has(e)}var qB=VB,YB=Nt,zB=je,KB=YB(zB,"Map"),vu=KB,ZB=Nt,JB=ZB(Object,"create"),ta=JB,Vc=ta;function QB(){this.__data__=Vc?Vc(null):{},this.size=0}var jB=QB;function eF(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var tF=eF,rF=ta,nF="__lodash_hash_undefined__",iF=Object.prototype,aF=iF.hasOwnProperty;function oF(e){var t=this.__data__;if(rF){var r=t[e];return r===nF?void 0:r}return aF.call(t,e)?t[e]:void 0}var sF=oF,uF=ta,lF=Object.prototype,hF=lF.hasOwnProperty;function fF(e){var t=this.__data__;return uF?t[e]!==void 0:hF.call(t,e)}var cF=fF,dF=ta,pF="__lodash_hash_undefined__";function vF(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=dF&&t===void 0?pF:t,this}var _F=vF,gF=jB,yF=tF,mF=sF,xF=cF,TF=_F;function lr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}lr.prototype.clear=gF;lr.prototype.delete=yF;lr.prototype.get=mF;lr.prototype.has=xF;lr.prototype.set=TF;var EF=lr,qc=EF,bF=ea,SF=vu;function wF(){this.size=0,this.__data__={hash:new qc,map:new(SF||bF),string:new qc}}var PF=wF;function RF(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var MF=RF,OF=MF;function CF(e,t){var r=e.__data__;return OF(t)?r[typeof t=="string"?"string":"hash"]:r.map}var ra=CF,AF=ra;function DF(e){var t=AF(this,e).delete(e);return this.size-=t?1:0,t}var IF=DF,LF=ra;function $F(e){return LF(this,e).get(e)}var BF=$F,FF=ra;function GF(e){return FF(this,e).has(e)}var kF=GF,UF=ra;function NF(e,t){var r=UF(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var HF=NF,XF=PF,WF=IF,VF=BF,qF=kF,YF=HF;function hr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}hr.prototype.clear=XF;hr.prototype.delete=WF;hr.prototype.get=VF;hr.prototype.has=qF;hr.prototype.set=YF;var _u=hr,zF=ea,KF=vu,ZF=_u,JF=200;function QF(e,t){var r=this.__data__;if(r instanceof zF){var n=r.__data__;if(!KF||n.length<JF-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ZF(n)}return r.set(e,t),this.size=r.size,this}var jF=QF,e3=ea,t3=UB,r3=HB,n3=WB,i3=qB,a3=jF;function fr(e){var t=this.__data__=new e3(e);this.size=t.size}fr.prototype.clear=t3;fr.prototype.delete=r3;fr.prototype.get=n3;fr.prototype.has=i3;fr.prototype.set=a3;var Yc=fr,o3="__lodash_hash_undefined__";function s3(e){return this.__data__.set(e,o3),this}var u3=s3;function l3(e){return this.__data__.has(e)}var h3=l3,f3=_u,c3=u3,d3=h3;function na(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new f3;++t<r;)this.add(e[t])}na.prototype.add=na.prototype.push=c3;na.prototype.has=d3;var p3=na;function v3(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var _3=v3;function g3(e,t){return e.has(t)}var y3=g3,m3=p3,x3=_3,T3=y3,E3=1,b3=2;function S3(e,t,r,n,i,a){var o=r&E3,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(e),h=a.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,p=r&b3?new m3:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var c=e[f],_=t[f];if(n)var v=o?n(_,c,f,t,e,a):n(c,_,f,e,t,a);if(v!==void 0){if(v)continue;d=!1;break}if(p){if(!x3(t,function(g,m){if(!T3(p,m)&&(c===g||i(c,g,r,n,a)))return p.push(m)})){d=!1;break}}else if(!(c===_||i(c,_,r,n,a))){d=!1;break}}return a.delete(e),a.delete(t),d}var zc=S3,w3=je,P3=w3.Uint8Array,R3=P3;function M3(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var O3=M3;function C3(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var A3=C3,Kc=Ji,Zc=R3,D3=Wc,I3=zc,L3=O3,$3=A3,B3=1,F3=2,G3="[object Boolean]",k3="[object Date]",U3="[object Error]",N3="[object Map]",H3="[object Number]",X3="[object RegExp]",W3="[object Set]",V3="[object String]",q3="[object Symbol]",Y3="[object ArrayBuffer]",z3="[object DataView]",Jc=Kc?Kc.prototype:void 0,gu=Jc?Jc.valueOf:void 0;function K3(e,t,r,n,i,a,o){switch(r){case z3:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Y3:return!(e.byteLength!=t.byteLength||!a(new Zc(e),new Zc(t)));case G3:case k3:case H3:return D3(+e,+t);case U3:return e.name==t.name&&e.message==t.message;case X3:case V3:return e==t+"";case N3:var s=L3;case W3:var u=n&B3;if(s||(s=$3),e.size!=t.size&&!u)return!1;var l=o.get(e);if(l)return l==t;n|=F3,o.set(e,t);var h=I3(s(e),s(t),n,i,a,o);return o.delete(e),h;case q3:if(gu)return gu.call(e)==gu.call(t)}return!1}var Z3=K3;function J3(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Q3=J3,j3=Q3,eG=_t;function tG(e,t,r){var n=t(e);return eG(e)?n:j3(n,r(e))}var rG=tG;function nG(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}var iG=nG;function aG(){return[]}var oG=aG,sG=iG,uG=oG,lG=Object.prototype,hG=lG.propertyIsEnumerable,Qc=Object.getOwnPropertySymbols,fG=Qc?function(e){return e==null?[]:(e=Object(e),sG(Qc(e),function(t){return hG.call(e,t)}))}:uG,cG=fG,dG=rG,pG=cG,vG=pu;function _G(e){return dG(e,vG,pG)}var gG=_G,jc=gG,yG=1,mG=Object.prototype,xG=mG.hasOwnProperty;function TG(e,t,r,n,i,a){var o=r&yG,s=jc(e),u=s.length,l=jc(t),h=l.length;if(u!=h&&!o)return!1;for(var f=u;f--;){var d=s[f];if(!(o?d in t:xG.call(t,d)))return!1}var p=a.get(e),c=a.get(t);if(p&&c)return p==t&&c==e;var _=!0;a.set(e,t),a.set(t,e);for(var v=o;++f<u;){d=s[f];var g=e[d],m=t[d];if(n)var y=o?n(m,g,d,t,e,a):n(g,m,d,e,t,a);if(!(y===void 0?g===m||i(g,m,r,n,a):y)){_=!1;break}v||(v=d=="constructor")}if(_&&!v){var x=e.constructor,T=t.constructor;x!=T&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof T=="function"&&T instanceof T)&&(_=!1)}return a.delete(e),a.delete(t),_}var EG=TG,bG=Nt,SG=je,wG=bG(SG,"DataView"),PG=wG,RG=Nt,MG=je,OG=RG(MG,"Promise"),CG=OG,AG=Nt,DG=je,IG=AG(DG,"Set"),LG=IG,$G=Nt,BG=je,FG=$G(BG,"WeakMap"),GG=FG,yu=PG,mu=vu,xu=CG,Tu=LG,Eu=GG,ed=Tn,cr=Cc,td="[object Map]",kG="[object Object]",rd="[object Promise]",nd="[object Set]",id="[object WeakMap]",ad="[object DataView]",UG=cr(yu),NG=cr(mu),HG=cr(xu),XG=cr(Tu),WG=cr(Eu),Ht=ed;(yu&&Ht(new yu(new ArrayBuffer(1)))!=ad||mu&&Ht(new mu)!=td||xu&&Ht(xu.resolve())!=rd||Tu&&Ht(new Tu)!=nd||Eu&&Ht(new Eu)!=id)&&(Ht=function(e){var t=ed(e),r=t==kG?e.constructor:void 0,n=r?cr(r):"";if(n)switch(n){case UG:return ad;case NG:return td;case HG:return rd;case XG:return nd;case WG:return id}return t});var VG=Ht,bu=Yc,qG=zc,YG=Z3,zG=EG,od=VG,sd=_t,ud=Qi.exports,KG=Xc,ZG=1,ld="[object Arguments]",hd="[object Array]",ia="[object Object]",JG=Object.prototype,fd=JG.hasOwnProperty;function QG(e,t,r,n,i,a){var o=sd(e),s=sd(t),u=o?hd:od(e),l=s?hd:od(t);u=u==ld?ia:u,l=l==ld?ia:l;var h=u==ia,f=l==ia,d=u==l;if(d&&ud(e)){if(!ud(t))return!1;o=!0,h=!1}if(d&&!h)return a||(a=new bu),o||KG(e)?qG(e,t,r,n,i,a):YG(e,t,u,r,n,i,a);if(!(r&ZG)){var p=h&&fd.call(e,"__wrapped__"),c=f&&fd.call(t,"__wrapped__");if(p||c){var _=p?e.value():e,v=c?t.value():t;return a||(a=new bu),i(_,v,r,n,a)}}return d?(a||(a=new bu),zG(e,t,r,n,i,a)):!1}var jG=QG,ek=jG,cd=En;function dd(e,t,r,n,i){return e===t?!0:e==null||t==null||!cd(e)&&!cd(t)?e!==e&&t!==t:ek(e,t,r,n,dd,i)}var pd=dd,tk=Yc,rk=pd,nk=1,ik=2;function ak(e,t,r,n){var i=r.length,a=i,o=!n;if(e==null)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=r[i];var u=s[0],l=e[u],h=s[1];if(o&&s[2]){if(l===void 0&&!(u in e))return!1}else{var f=new tk;if(n)var d=n(l,h,u,e,t,f);if(!(d===void 0?rk(h,l,nk|ik,n,f):d))return!1}}return!0}var ok=ak,sk=hu;function uk(e){return e===e&&!sk(e)}var vd=uk,lk=vd,hk=pu;function fk(e){for(var t=hk(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,lk(i)]}return t}var ck=fk;function dk(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var _d=dk,pk=ok,vk=ck,_k=_d;function gk(e){var t=vk(e);return t.length==1&&t[0][2]?_k(t[0][0],t[0][1]):function(r){return r===e||pk(r,e,t)}}var yk=gk,mk=Tn,xk=En,Tk="[object Symbol]";function Ek(e){return typeof e=="symbol"||xk(e)&&mk(e)==Tk}var Su=Ek,bk=_t,Sk=Su,wk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pk=/^\w*$/;function Rk(e,t){if(bk(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Sk(e)?!0:Pk.test(e)||!wk.test(e)||t!=null&&e in Object(t)}var wu=Rk,gd=_u,Mk="Expected a function";function Pu(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Mk);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Pu.Cache||gd),r}Pu.Cache=gd;var Ok=Pu,Ck=Ok,Ak=500;function Dk(e){var t=Ck(e,function(n){return r.size===Ak&&r.clear(),n}),r=t.cache;return t}var Ik=Dk,Lk=Ik,$k=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bk=/\\(\\)?/g,Fk=Lk(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace($k,function(r,n,i,a){t.push(i?a.replace(Bk,"$1"):n||r)}),t}),Gk=Fk,yd=Ji,kk=Ic,Uk=_t,Nk=Su,Hk=1/0,md=yd?yd.prototype:void 0,xd=md?md.toString:void 0;function Td(e){if(typeof e=="string")return e;if(Uk(e))return kk(e,Td)+"";if(Nk(e))return xd?xd.call(e):"";var t=e+"";return t=="0"&&1/e==-Hk?"-0":t}var Xk=Td,Wk=Xk;function Vk(e){return e==null?"":Wk(e)}var qk=Vk,Yk=_t,zk=wu,Kk=Gk,Zk=qk;function Jk(e,t){return Yk(e)?e:zk(e,t)?[e]:Kk(Zk(e))}var Ed=Jk,Qk=Su,jk=1/0;function eU(e){if(typeof e=="string"||Qk(e))return e;var t=e+"";return t=="0"&&1/e==-jk?"-0":t}var aa=eU,tU=Ed,rU=aa;function nU(e,t){t=tU(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[rU(t[r++])];return r&&r==n?e:void 0}var bd=nU,iU=bd;function aU(e,t,r){var n=e==null?void 0:iU(e,t);return n===void 0?r:n}var oU=aU;function sU(e,t){return e!=null&&t in Object(e)}var uU=sU,lU=Ed,hU=kc,fU=_t,cU=Uc,dU=cu,pU=aa;function vU(e,t,r){t=lU(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var o=pU(t[n]);if(!(a=e!=null&&r(e,o)))break;e=e[o]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&dU(i)&&cU(o,i)&&(fU(e)||hU(e)))}var _U=vU,gU=uU,yU=_U;function mU(e,t){return e!=null&&yU(e,t,gU)}var xU=mU,TU=pd,EU=oU,bU=xU,SU=wu,wU=vd,PU=_d,RU=aa,MU=1,OU=2;function CU(e,t){return SU(e)&&wU(t)?PU(RU(e),t):function(r){var n=EU(r,e);return n===void 0&&n===t?bU(r,e):TU(t,n,MU|OU)}}var AU=CU;function DU(e){return function(t){return t==null?void 0:t[e]}}var IU=DU,LU=bd;function $U(e){return function(t){return LU(t,e)}}var BU=$U,FU=IU,GU=BU,kU=wu,UU=aa;function NU(e){return kU(e)?FU(UU(e)):GU(e)}var HU=NU,XU=yk,WU=AU,VU=lu,qU=_t,YU=HU;function zU(e){return typeof e=="function"?e:e==null?VU:typeof e=="object"?qU(e)?WU(e[0],e[1]):XU(e):YU(e)}var KU=zU,ZU=ML,JU=dB,QU=KU;function jU(e,t){var r={};return t=QU(t),JU(e,function(n,i,a){ZU(r,t(n,i,a),n)}),r}var aN=jU;export{qt as C,nN as E,eN as G,Re as O,yl as R,rN as a,tN as b,Q_ as c,Tl as d,K as l,aN as m,iN as p,xl as r,It as u};
